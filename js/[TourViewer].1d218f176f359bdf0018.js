(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1035:function(e,t,i){var n={"./af":737,"./af.js":737,"./ar":738,"./ar-dz":739,"./ar-dz.js":739,"./ar-kw":740,"./ar-kw.js":740,"./ar-ly":741,"./ar-ly.js":741,"./ar-ma":742,"./ar-ma.js":742,"./ar-sa":743,"./ar-sa.js":743,"./ar-tn":744,"./ar-tn.js":744,"./ar.js":738,"./az":745,"./az.js":745,"./be":746,"./be.js":746,"./bg":747,"./bg.js":747,"./bm":748,"./bm.js":748,"./bn":749,"./bn.js":749,"./bo":750,"./bo.js":750,"./br":751,"./br.js":751,"./bs":752,"./bs.js":752,"./ca":753,"./ca.js":753,"./cs":754,"./cs.js":754,"./cv":755,"./cv.js":755,"./cy":756,"./cy.js":756,"./da":757,"./da.js":757,"./de":758,"./de-at":759,"./de-at.js":759,"./de-ch":760,"./de-ch.js":760,"./de.js":758,"./dv":761,"./dv.js":761,"./el":762,"./el.js":762,"./en-au":763,"./en-au.js":763,"./en-ca":764,"./en-ca.js":764,"./en-gb":765,"./en-gb.js":765,"./en-ie":766,"./en-ie.js":766,"./en-il":767,"./en-il.js":767,"./en-in":768,"./en-in.js":768,"./en-nz":769,"./en-nz.js":769,"./en-sg":770,"./en-sg.js":770,"./eo":771,"./eo.js":771,"./es":772,"./es-do":773,"./es-do.js":773,"./es-us":774,"./es-us.js":774,"./es.js":772,"./et":775,"./et.js":775,"./eu":776,"./eu.js":776,"./fa":777,"./fa.js":777,"./fi":778,"./fi.js":778,"./fil":779,"./fil.js":779,"./fo":780,"./fo.js":780,"./fr":781,"./fr-ca":782,"./fr-ca.js":782,"./fr-ch":783,"./fr-ch.js":783,"./fr.js":781,"./fy":784,"./fy.js":784,"./ga":785,"./ga.js":785,"./gd":786,"./gd.js":786,"./gl":787,"./gl.js":787,"./gom-deva":788,"./gom-deva.js":788,"./gom-latn":789,"./gom-latn.js":789,"./gu":790,"./gu.js":790,"./he":791,"./he.js":791,"./hi":792,"./hi.js":792,"./hr":793,"./hr.js":793,"./hu":794,"./hu.js":794,"./hy-am":795,"./hy-am.js":795,"./id":796,"./id.js":796,"./is":797,"./is.js":797,"./it":798,"./it-ch":799,"./it-ch.js":799,"./it.js":798,"./ja":800,"./ja.js":800,"./jv":801,"./jv.js":801,"./ka":802,"./ka.js":802,"./kk":803,"./kk.js":803,"./km":804,"./km.js":804,"./kn":805,"./kn.js":805,"./ko":806,"./ko.js":806,"./ku":807,"./ku.js":807,"./ky":808,"./ky.js":808,"./lb":809,"./lb.js":809,"./lo":810,"./lo.js":810,"./lt":811,"./lt.js":811,"./lv":812,"./lv.js":812,"./me":813,"./me.js":813,"./mi":814,"./mi.js":814,"./mk":815,"./mk.js":815,"./ml":816,"./ml.js":816,"./mn":817,"./mn.js":817,"./mr":818,"./mr.js":818,"./ms":819,"./ms-my":820,"./ms-my.js":820,"./ms.js":819,"./mt":821,"./mt.js":821,"./my":822,"./my.js":822,"./nb":823,"./nb.js":823,"./ne":824,"./ne.js":824,"./nl":825,"./nl-be":826,"./nl-be.js":826,"./nl.js":825,"./nn":827,"./nn.js":827,"./oc-lnc":828,"./oc-lnc.js":828,"./pa-in":829,"./pa-in.js":829,"./pl":830,"./pl.js":830,"./pt":831,"./pt-br":832,"./pt-br.js":832,"./pt.js":831,"./ro":833,"./ro.js":833,"./ru":834,"./ru.js":834,"./sd":835,"./sd.js":835,"./se":836,"./se.js":836,"./si":837,"./si.js":837,"./sk":838,"./sk.js":838,"./sl":839,"./sl.js":839,"./sq":840,"./sq.js":840,"./sr":841,"./sr-cyrl":842,"./sr-cyrl.js":842,"./sr.js":841,"./ss":843,"./ss.js":843,"./sv":844,"./sv.js":844,"./sw":845,"./sw.js":845,"./ta":846,"./ta.js":846,"./te":847,"./te.js":847,"./tet":848,"./tet.js":848,"./tg":849,"./tg.js":849,"./th":850,"./th.js":850,"./tl-ph":851,"./tl-ph.js":851,"./tlh":852,"./tlh.js":852,"./tr":853,"./tr.js":853,"./tzl":854,"./tzl.js":854,"./tzm":855,"./tzm-latn":856,"./tzm-latn.js":856,"./tzm.js":855,"./ug-cn":857,"./ug-cn.js":857,"./uk":858,"./uk.js":858,"./ur":859,"./ur.js":859,"./uz":860,"./uz-latn":861,"./uz-latn.js":861,"./uz.js":860,"./vi":862,"./vi.js":862,"./x-pseudo":863,"./x-pseudo.js":863,"./yo":864,"./yo.js":864,"./zh-cn":865,"./zh-cn.js":865,"./zh-hk":866,"./zh-hk.js":866,"./zh-mo":867,"./zh-mo.js":867,"./zh-tw":868,"./zh-tw.js":868};function o(e){var t=a(e);return i(t)}function a(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=a,e.exports=o,o.id=1035},1091:function(e,t,i){"use strict";i.r(t),i.d(t,"mapStateToProps",(function(){return Ms})),i.d(t,"mapDispatchToProps",(function(){return As})),i.d(t,"LoadingSpinner",(function(){return Us}));var n=i(176),o=i.n(n),a=i(177),r=i.n(a),s=i(102),c=i.n(s),l=i(178),d=i.n(l),u=i(179),p=i.n(u),m=i(136),h=i.n(m),f=i(12),g=i.n(f),b=i(5),w=i.n(b),v=i(0),x=i.n(v),C=i(8),S=i.n(C),y=i(3),E=i.n(y),I=i(75),k=i(65),_=i(135),O=i(686),j=i.n(O),T=i(1066),N=i(24),V=i.n(N),M=i(659),A=i.n(M),L=i(268),P=i(603),z=i(1042),R=i(909),D=i(1043),F=i.n(D),H=i(625),B=i(917),U=i(622),W=i.n(U),J=i(99),G=i.n(J),q=i(188),K=i.n(q),Y=i(642),X=i(628),Z=i(626),$=i(735),Q=i(11),ee=i(9),te=function(e){return Object(ee.a)({method:"POST",url:"".concat("twilio","/video-token"),data:e})},ie=function(e){return Object(ee.a)({url:"".concat("twilio","/connected/participants/").concat(e)})},ne=i(643),oe=function(e){var t=e.modalStr,i=e.tourId,n=e.isHostConnected,o=e.dataForToken,a=e.handleHostConnected,r=e.handleClickClose,s=Object(y.useState)(!1),c=W()(s,2),l=c[0],d=c[1],u=Object(y.useRef)(null);return Object(y.useEffect)((function(){function e(){return(e=S()(w.a.mark((function e(){var t,n,r,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),u.current=K.a.CancelToken.source(),e.next=5,ne.b(i,o.room,null===(t=u.current)||void 0===t?void 0:t.token);case 5:if(n=e.sent,!n.isHostConnected){e.next=15;break}return e.next=10,te(o);case 10:r=e.sent,s=r.token,a(s),e.next=17;break;case 15:return e.next=17,Object(Q.asyncDelay)(2500);case 17:d(!1),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0),d(!1);case 24:case"end":return e.stop()}}),e,null,[[0,20]])})))).apply(this,arguments)}n||l||function(){e.apply(this,arguments)}()}),[n,l,o]),Object(y.useEffect)((function(){return function(){u.current&&u.current.cancel()}}),[]),E.a.createElement(ae,e,E.a.createElement(re,null,E.a.createElement(se,null,E.a.createElement($.a,{color:"#BBD2D4",size:"32px"})),E.a.createElement(ce,null,t.hwmPleaseWait),E.a.createElement(le,{onClick:r},t.hwmGoBack)))},ae=Object(k.default)(Y.a).withConfig({displayName:"HostWaitingModal__Container",componentId:"sc-18v6u0l-0"})(["@media screen and (","){&__content{width:360px;}}"],Q.media.up.lgm),re=k.default.div.withConfig({displayName:"HostWaitingModal__Content",componentId:"sc-18v6u0l-1"})(["display:flex;flex-direction:column;align-items:center;padding:3px 23px 0px;"]),se=k.default.div.withConfig({displayName:"HostWaitingModal__SpinnerWrapper",componentId:"sc-18v6u0l-2"})(["margin-bottom:12px;"]),ce=Object(k.default)(X.a).withConfig({displayName:"HostWaitingModal__Message",componentId:"sc-18v6u0l-3"})(["margin-bottom:30px;text-align:center;"]),le=Object(k.default)(Z.f).withConfig({displayName:"HostWaitingModal__CloseButton",componentId:"sc-18v6u0l-4"})(["min-width:150px;@media screen and (","){width:100%;}"],Q.media.down.md),de=Object(I.connect)((function(e){return{modalStr:e.app.localization.modalStr}}),void 0)(Object(y.memo)(oe)),ue=i(6),pe="host",me="host_reset",he="host_request_changing",fe="scene",ge="room_life_time_request",be="infospot",we="host_set",ve="white_board_status",xe="You are now sharing your screen.",Ce=" is now sharing their screen.",Se=" has joined the conversation.",ye="You are following the host's screen.",Ee="You stopped following the host's screen.",Ie="Something went wrong.",ke="Something went wrong. Please make sure that the application has access to the camera.",_e=function(e){var t={type:pe,data:{hostSid:e}};return JSON.stringify(t)},Oe=function(e){var t={type:we,data:{host:e}};return JSON.stringify(t)},je=function(e){return A()(e)?null:"string"==typeof e?JSON.parse(e):e},Te=function(e){return setTimeout((function(){e()}),18e5)},Ne=function(e){return e.identity.split("::")[0]||e.identity},Ve=function(e){return V()(e,"localParticipant.sid",null)},Me=function(e,t){return V()(e,"selectedImage.infospots",[]).filter((function(e){return e.id===t}))[0]||null},Ae=function(e,t,i){return e?i||e:i||t},Le=function(e,t){return{audio:"boolean"!=typeof e||e,video:!!("boolean"!=typeof t||t)&&{name:"camera",width:{min:640,ideal:1280},height:{min:360,ideal:720}}}},Pe=function(e){var t=e.split("::");return parseInt(t[t.length-1],10)},ze=i(691),Re=i.n(ze),De=i(30),Fe=i.n(De),He=function(e){return Object(ee.a)({url:"".concat("collections","/").concat(e,"/view")})},Be=i(20),Ue=function(e){return{type:Be.w,tour:e}},We=function(e){return{type:Be.g,modal:e}},Je=function(){return{type:Be.b}},Ge=function(e){return{type:Be.l,collection:e}},qe=function(e){return function(t){var i=V()(e,"config","{}")||"{}",n="string"==typeof i?JSON.parse(i):i,o="string"==typeof e.contacts?JSON.parse(e.contacts):e.contacts,a=x()({},e,{contacts:o||{person:"",email:"",number:""},images:e.images&&"string"==typeof e.images?JSON.parse(e.images):e.images,logo:e.logo||!1,defaultHotspotStyle:e.defaultHotspotStyle||2,defaultHotspotImage:e.defaultHotspotImage||null,socialImage:e.socialImage||"https://".concat(Q.domain.production,"/api/meta/").concat(e.shortId,"/centerimage.png"),config:{enableRibbon:!n||null==n.enableRibbon||n.enableRibbon,tinyPlanet:!(!n||null==n.tinyPlanet)&&n.tinyPlanet,hideRibbonAtStart:!(!n||null==n.hideRibbonAtStart)&&n.hideRibbonAtStart,audioHotspots:!(!n||null==n.audioHotspots)&&n.audioHotspots,lockHorizontalFov:!(!n||null==n.lockHorizontalFov)&&n.lockHorizontalFov,autoRotate:!n||null==n.autoRotate||n.autoRotate,autoRotateSpeed:n&&null!=n.autoRotateSpeed&&n.autoRotateSpeed,ambience:n&&null!=n.ambience?n.ambience:void 0,toggleHotspots:!(!n||null==n.toggleHotspots)&&n.toggleHotspots,isHideShareButton:n.isHideShareButton||!1,navigationMode:n.navigationMode,transitionType:n.transitionType,roomType:n.roomType||null},theme:"classic",isVideoChatEnabled:!0});t(Ue(a))}},Ke=i(84),Ye=i(885),Xe=k.default.div.withConfig({displayName:"ConfirmContinueChating__Container",componentId:"njxn7i-0"})(["font-size:16px;z-index:6;"]),Ze=function(e){var t=e.viewerProps,i=e.confirm,n=e.cancel,o=Object(y.useState)(60),a=W()(o,2),r=a[0],s=a[1];Object(y.useEffect)((function(){var e=t.modal,i=null;return"confirm-continue-chating"===e&&(s(60),i=setInterval((function(){s((function(e){return e-1}))}),1e3)),function(){clearInterval(i)}}),[t.modal]),Object(y.useEffect)((function(){r||n()}),[r]);var c="Do you want to continue this call? The window closes through ".concat(r," s.");return E.a.createElement(Xe,{className:"confirm-window-container"},E.a.createElement(Ye.a,x()({},t,{unclosable:!0,modalName:"confirm-continue-chating",title:c,confirm:i,cancel:n,height:"auto"})))},$e=k.default.div.withConfig({displayName:"ConfirmHostChanging__Container",componentId:"t8cu5h-0"})(["font-size:16px;z-index:6;"]),Qe=function(e){var t=e.viewerProps,i=e.confirm,n=e.cancel;return E.a.createElement($e,{className:"confirm-window-container"},E.a.createElement(Ye.a,x()({},t,{unclosable:!0,modalName:"confirm-host-changing",title:"Another user requests to be a host. Allow host changing?",confirm:i,cancel:n,height:"auto"})))},et=i(1018),tt=i.n(et),it=i(658),nt=function(e){var t=e.cpLiveStr,i=e.sizeParticipant,n=e.setCpLiveSize,o=e.hideMobile,a=e.isFixedSize,r=Object(y.useState)(!1),s=W()(r,2),c=s[0],l=s[1],d=[{title:t.smallSize,value:1},{title:t.mediumSize,value:1.65},{title:t.fullscreenSize,value:1e3}];return E.a.createElement(it.Tooltip,{interactive:!0,trigger:"click",position:"left",html:E.a.createElement("div",null,d.map((function(e){return E.a.createElement(at,{key:e.title,isActive:i===e.value,onClick:function(){return t=e.value,l(!1),void n(t);var t}},E.a.createElement("span",{className:"title"},e.title),E.a.createElement("img",{src:"./assets/img/cp-live/check-icon.png",alt:"icon"}))}))),theme:"light",open:c,onRequestClose:function(){return l(!1)}},E.a.createElement(ot,{onClick:function(){return l(!c)},isFullScreen:1e3===i,isMediumSize:1.65===i,isSmallSize:1===i,hideMobile:o,isFixedSize:a},E.a.createElement("img",{src:"./assets/img/cp-live/setting-icon.svg",alt:"icon"})))},ot=k.default.button.withConfig({displayName:"SizeControls__SettingButton",componentId:"sc-7b6uix-0"})(["padding:0;border:none;cursor:pointer;",";"," "," img{"," object-fit:contain;}@media screen and (","){",";}@media screen and (","){",";}@media screen and (","){",";}@media screen and (","){",";}",""],(function(e){return e.isFullScreen?Object(k.css)(["background:rgba(0,0,0,0.25);border-radius:3px;width:42px;height:42px;display:flex;align-items:center;justify-content:center;"]):Object(k.css)(["width:16px;height:16px;background-color:transparent;"])}),(function(e){return e.isSmallSize&&Object(k.css)(["@media screen and (","){margin:0;}"],Q.media.down.xsm)}),(function(e){return e.isMediumSize&&Object(k.css)(["width:21px;height:21px;"])}),(function(e){var t=e.isFullScreen,i=e.isMediumSize;return t?Object(k.css)(["width:24px;height:24px;"]):i?Object(k.css)(["width:21px;height:21px;"]):Object(k.css)(["width:100%;height:100%;"])}),Q.media.down.md,(function(e){return e.isFullScreen&&Object(k.css)(["width:24px;height:24px;img{width:18px;height:18px;}"])}),Q.media.down.mdm,(function(e){return e.hideMobile&&Object(k.css)(["display:none;"])}),Q.media.down.xs,(function(e){return e.isFullScreen&&Object(k.css)(["width:22px;height:22px;img{width:14px;height:14px;}"])}),Q.media.down.xsm,(function(e){return!e.isFullScreen&&Object(k.css)(["img{width:17px;height:17px;}"])}),(function(e){return e.isFixedSize&&Object(k.css)(["width:18px;height:18px;img{width:18px;height:18px;}"])})),at=k.default.div.withConfig({displayName:"SizeControls__Option",componentId:"sc-7b6uix-1"})(["width:100%;display:flex;align-items:center;justify-content:space-between;padding:3px 0;cursor:pointer;span.title{font-weight:500;font-size:12px;line-height:14px;color:#263238;}img{width:11px;height:8px;opacity:",";transition:opacity .25s ease-in-out;margin-left:4px;}"],(function(e){return e.isActive?1:0})),rt=Object(I.connect)((function(e){return{cpLiveStr:e.app.localization.cpLiveStr}}),(function(e){return{setCpLiveSize:function(t){return e(function(e){return{type:Be.n,size:e}}(t))}}}))(Object(y.memo)(nt)),st=i(618),ct=function(e){var t=e.modalStr,i=e.commonStr,n=e.handleClickClose,o=e.handleClickConfirm;return E.a.createElement(lt,e,E.a.createElement(dt,null,E.a.createElement(mt,null,t.cecAreYouSure),E.a.createElement(pt,{onClick:n},E.a.createElement(st.Icon,{src:"./assets/img/closeIcon.svg",size:"24px",color:"#BBD2D5"}))),E.a.createElement(ut,null,E.a.createElement(ht,null,t.cecMeetingWillEnd),E.a.createElement(bt,null,E.a.createElement(ft,{onClick:n},i.no),E.a.createElement(gt,{onClick:o},i.yes))))},lt=Object(k.default)(Y.a).withConfig({displayName:"ConfirmEndCall__Container",componentId:"ojmz2k-0"})(["@media screen and (","){&__content{width:504px;}}"],Q.media.up.lgm),dt=k.default.div.withConfig({displayName:"ConfirmEndCall__Header",componentId:"ojmz2k-1"})(["margin:0;padding:0;"]),ut=k.default.div.withConfig({displayName:"ConfirmEndCall__Content",componentId:"ojmz2k-2"})(["display:flex;flex-direction:column;align-items:center;padding:0 32px 10px;"]),pt=k.default.button.withConfig({displayName:"ConfirmEndCall__CloseButton",componentId:"ojmz2k-3"})(["position:absolute;top:16px;right:18px;display:flex;align-items:center;padding:0;margin:0;border:none;background-color:transparent;cursor:pointer;"]),mt=Object(k.default)(X.g).withConfig({displayName:"ConfirmEndCall__StyledModalTitle",componentId:"ojmz2k-4"})(["padding:0 60px;margin-bottom:15px;@media screen and (","){padding:0 30px;}"],Q.media.down.smm),ht=Object(k.default)(X.b).withConfig({displayName:"ConfirmEndCall__Message",componentId:"ojmz2k-5"})(["text-align:center;margin-bottom:30px;"]),ft=Object(k.default)(Z.e).withConfig({displayName:"ConfirmEndCall__CancelButton",componentId:"ojmz2k-6"})(["min-width:170px;@media screen and (","){width:calc(50% - 7px);}@media screen and (","){width:100%;}"],Q.media.down.lgm,Q.media.down.xs),gt=Object(k.default)(Z.d).withConfig({displayName:"ConfirmEndCall__ConfirmButton",componentId:"ojmz2k-7"})(["min-width:170px;@media screen and (","){width:calc(50% - 7px);}@media screen and (","){width:100%;}"],Q.media.down.lgm,Q.media.down.xs),bt=k.default.div.withConfig({displayName:"ConfirmEndCall__Controls",componentId:"ojmz2k-8"})(["display:flex;align-items:center;justify-content:center;width:100%;button:not(:last-child){margin-right:14px;}@media screen and (","){flex-direction:column;button:not(:last-child){margin-right:unset;margin-bottom:14px;}}"],Q.media.down.xs),wt=Object(I.connect)((function(e){return{modalStr:e.app.localization.modalStr,commonStr:e.app.localization.commonStr}}),void 0)(Object(y.memo)(ct)),vt=function(e){var t=e.modalStr,i=e.commonStr,n=e.roomName,o=e.tourTitle,a=e.participantCount,r=void 0===a?0:a,s=e.handleClickClose,c="".concat(window.location.origin,"/tours/").concat(n,"?showVideoChat=1");return E.a.createElement(xt,e,E.a.createElement(Ct,null,E.a.createElement(X.g,null,t.immInviteMember),E.a.createElement(kt,{onClick:s},E.a.createElement(st.Icon,{src:"./assets/img/closeIcon.svg",size:"24px",color:"#BBD2D5"}))),E.a.createElement(St,null,E.a.createElement(yt,null,E.a.createElement(It,{src:"./assets/img/cp-live/invite-member@2x.jpg"})),E.a.createElement(Et,null,E.a.createElement(_t,null,t.immCopyInfo),E.a.createElement(Ot,null,E.a.createElement(jt,null,E.a.createElement(Tt,{src:"./assets/img/cp-live/icon-link.svg",size:"11px",color:"#7634E1"}),E.a.createElement(Vt,null,c)),E.a.createElement(jt,null,E.a.createElement(Tt,{src:"./assets/img/cp-live/icon-picture.svg",width:"10px",height:"8px",color:"#7634E1"}),E.a.createElement(Vt,null,o)),E.a.createElement(jt,null,E.a.createElement(Tt,{src:"./assets/img/cp-live/icon-simple-user.svg",size:"10px",color:"#7634E1"}),E.a.createElement(Vt,null,r))),E.a.createElement(Mt,{onClick:function(){var e="".concat(t.immVideoMeeting," ").concat(o,"\n").concat(t.immParticipantCount," ").concat(r,"\n").concat(t.immToJoinClickLink," ").concat(c),n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),Object(Ke.b)(i.textCopied)}},E.a.createElement(Nt,{src:"./assets/img/cp-live/icon-copy.svg",size:"14px",color:"#fff"}),t.immCopyJoiningInfo))))},xt=Object(k.default)(Y.a).withConfig({displayName:"InviteMemberModal__Container",componentId:"y9uneg-0"})(["@media screen and (","){&__content{width:768px;}}"],Q.media.up.lgm),Ct=k.default.div.withConfig({displayName:"InviteMemberModal__Header",componentId:"y9uneg-1"})(["margin:0;padding:0;"]),St=k.default.div.withConfig({displayName:"InviteMemberModal__Content",componentId:"y9uneg-2"})(["display:flex;padding:0 0 25px;@media screen and (","){flex-direction:column;}"],Q.media.down.md),yt=k.default.section.withConfig({displayName:"InviteMemberModal__LeftSection",componentId:"y9uneg-3"})(["display:block;width:50%;@media screen and (","){width:100%;text-align:center;}"],Q.media.down.md),Et=k.default.section.withConfig({displayName:"InviteMemberModal__RightSection",componentId:"y9uneg-4"})(["width:50%;padding:20px 26px 0 40px;@media screen and (","){width:100%;padding:40px 26px 0 26px;}@media screen and (","){width:100%;padding:40px 0 0 0;}"],Q.media.down.md,Q.media.down.xs),It=k.default.img.withConfig({displayName:"InviteMemberModal__InviteMemeberImage",componentId:"y9uneg-5"})(["width:100%;max-width:321px;object-fit:contain;float:right;@media screen and (","){float:inherit;}"],Q.media.down.md),kt=k.default.button.withConfig({displayName:"InviteMemberModal__CloseButton",componentId:"y9uneg-6"})(["position:absolute;top:16px;right:18px;display:flex;align-items:center;padding:0;margin:0;border:none;background-color:transparent;cursor:pointer;"]),_t=Object(k.default)(X.d).withConfig({displayName:"InviteMemberModal__MeetingDetailsTitle",componentId:"y9uneg-7"})(["margin-bottom:37px;"]),Ot=k.default.div.withConfig({displayName:"InviteMemberModal__MeetingDetails",componentId:"y9uneg-8"})(["display:flex;flex-direction:column;margin-bottom:50px;"]),jt=k.default.div.withConfig({displayName:"InviteMemberModal__InfoItem",componentId:"y9uneg-9"})(["width:100%;display:flex;align-items:baseline;&:not(:last-child){margin-bottom:10px;}"]),Tt=Object(k.default)(st.Icon).withConfig({displayName:"InviteMemberModal__StyledIcon",componentId:"y9uneg-10"})(["margin-right:10px;"]),Nt=Object(k.default)(st.Icon).withConfig({displayName:"InviteMemberModal__CopyIcon",componentId:"y9uneg-11"})(["margin-right:8px;"]),Vt=Object(k.default)(X.b).withConfig({displayName:"InviteMemberModal__Text",componentId:"y9uneg-12"})(["margin-bottom:0;flex-grow:1;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;"]),Mt=Object(k.default)(Z.c).withConfig({displayName:"InviteMemberModal__CopyButton",componentId:"y9uneg-13"})(["min-width:173px;@media screen and (","){min-width:unset;width:100%;}"],Q.media.down.md),At=Object(I.connect)((function(e){return{modalStr:e.app.localization.modalStr,commonStr:e.app.localization.commonStr}}),void 0)(Object(y.memo)(vt)),Lt=function(e){var t=e.participant,i=e.participants,n=e.isMessageChatShow,o=e.hasNewMessages,a=e.cpLiveStr,r=e.isHost,s=e.hostIds,c=e.handleClickShareButton,l=e.isLocal,d=e.toggleAudioStatus,u=e.isAudioEnabled,p=e.toggleVideoStatus,m=e.isVideoEnabled,h=e.setMessageChatStatus,f=e.toggleHideTourViewerControls,g=e.isHideTourViewerControls,b=e.handleLogout,w=e.isAudioExist,v=e.isVideoExist,x=e.joinSettings,C=e.roomName,S=e.tourTitle,I=e.isEndCallDisabled,k=e.isShowConfimEndCall,_=e.isShowInviteMemeberModal,O=e.handleClickConfirmEndCall,j=e.handleClickCancelEndCall,T=e.handleClickEndCall,N=e.setIsShowInviteMemeberModal,V=e.isWhiteBoardStarted,M=e.setWhiteBoardStatus,A=e.host,L=e.isStopTrackLive,P=Object(y.useState)(!1),z=W()(P,2),R=z[0],D=z[1],F=Object(y.useMemo)((function(){if(!x.isHost)return!0;var e=Pe(null==t?void 0:t.identity),n=s.filter((function(t){return t!==e}));return i.reduce((function(e,t){var i=Pe(null==t?void 0:t.identity);return n.includes(i)}),!1)}),[t,i,r,s]),H=[{title:a.shareScreen,icon:!r&&l?"./assets/img/cp-live/share-screen-off.svg":"./assets/img/cp-live/share-screen-on.svg",action:function(){return c()},active:!(!r&&l),mobileHide:!0},{title:a.micro,icon:u&&w?"./assets/img/cp-live/micro-icon.svg":"./assets/img/cp-live/micro-off-icon.svg",action:function(){return w?d():null},isDisabled:!w},{title:a.video,icon:m&&v?"./assets/img/cp-live/video-icon.svg":"./assets/img/cp-live/video-off-icon.svg",action:function(){return v?p():null},isDisabled:!v},{title:a.shareScreenMobile,icon:!r&&l?"./assets/img/cp-live/share-screen-on.svg":"./assets/img/cp-live/share-screen-off.svg",action:function(){return c()},desktopHide:!0},{title:a.exit,icon:"./assets/img/cp-live/exit-icon.svg",action:function(){F||!F&&!i.length?b(!0):T()},addSeparate:!0},{title:a.draw,icon:"./assets/img/cp-live/draw-icon.svg",action:function(){return A&&!L?M():null},active:Boolean(A)&&V,mobileHide:!0,mobilteTooltipOpt:!0,margin:"0 8px 0 0",isDisabled:!A||L,disabledTitle:"You can use drawing only in share screen mode"},{title:a.chat,icon:"./assets/img/cp-live/chat-icon.svg",action:function(){return h()},hasNotification:o,addSeparate:!0,active:n,mobileHide:!0,mobilteTooltipOpt:!0},{title:a.controls,icon:g?"./assets/img/cp-live/controls-icon-on.svg":"./assets/img/cp-live/controls-icon-off.svg",action:function(){return f()},mobileHide:!0,mobilteTooltipOpt:!0}],B=((null==i?void 0:i.length)||0)+1;return E.a.createElement(Pt,{isMessageChatShow:n},(null==x?void 0:x.isHost)&&E.a.createElement(Bt,null,E.a.createElement(Rt,{tooltipOption:!0,onClick:function(){N(!0)}},E.a.createElement("img",{src:"./assets/img/cp-live/add-user-icon.svg",alt:"icon"}),E.a.createElement("span",null,"Invite"))),E.a.createElement(zt,null,H.map((function(e){return E.a.createElement(y.Fragment,{key:e.title},e.isDisabled&&e.disabledTitle?E.a.createElement(it.Tooltip,{title:e.disabledTitle,theme:"dark",arrow:!0},E.a.createElement(Rt,{isActive:e.active,isDisabled:e.isDisabled,onClick:e.action,mobileHide:e.mobileHide,desktopHide:e.desktopHide,margin:e.margin},E.a.createElement("img",{src:e.icon,alt:"icon"}),E.a.createElement("span",null,e.title))):E.a.createElement(Rt,{isActive:e.active,isDisabled:e.isDisabled,onClick:e.action,mobileHide:e.mobileHide,desktopHide:e.desktopHide,margin:e.margin},E.a.createElement("img",{src:e.icon,alt:"icon"}),E.a.createElement("span",null,e.title)),e.addSeparate&&E.a.createElement(Dt,null))})),E.a.createElement(Rt,{desktopHide:!0},E.a.createElement(it.Tooltip,{interactive:!0,trigger:"click",offset:15,html:E.a.createElement("div",null,H.filter((function(e){return e.mobilteTooltipOpt})).map((function(e){return E.a.createElement(Rt,{key:e.title,tooltipOption:!0,onClick:function(){D(!R),e.action()},isDisabled:e.isDisabled},E.a.createElement("img",{src:e.icon,alt:"icon"}),E.a.createElement("span",null,e.title))}))),open:R,onRequestClose:function(){return D(!1)},theme:"dark"},E.a.createElement("button",{className:"tooltip-trigger",onClick:function(){return D(!R)}},E.a.createElement("div",{className:"dot"}),E.a.createElement("div",{className:"dot"}),E.a.createElement("div",{className:"dot"}))))),(null==x?void 0:x.isHost)&&E.a.createElement(Ht,null,E.a.createElement(Ft,{onClick:T,disabled:I},"End Call")),k&&E.a.createElement(wt,{isOpen:k,handleClickClose:j,handleClickConfirm:O}),_&&E.a.createElement(At,{isOpen:_,handleClickClose:function(){N(!1)},roomName:C,tourTitle:S,participantCount:B}))},Pt=k.default.div.withConfig({displayName:"VideoChatControls__Container",componentId:"k7ki6a-0"})(["position:fixed;left:0;right:",";bottom:0;height:",";background:rgba(0,0,0,0.75);backdrop-filter:blur(7px);z-index:1;padding:4px 14px;display:flex;justify-content:space-between;align-items:center;@media screen and (","){right:0;}"],(function(e){return e.isMessageChatShow?"".concat(P.b):0}),P.a,Q.media.down.lg),zt=k.default.div.withConfig({displayName:"VideoChatControls__Options",componentId:"k7ki6a-1"})(["display:flex;align-items:center;margin:0 auto;width:fit-content;@media screen and (","){width:100%;justify-content:space-between;}"],Q.media.down.xsm),Rt=k.default.div.withConfig({displayName:"VideoChatControls__Option",componentId:"k7ki6a-2"})(["min-width:46px;min-height:46px;border-radius:4px;background:",";padding:3px;cursor:",";display:",";flex-direction:column;justify-content:center;align-items:center;",";span{color:#fff;font-weight:500;font-size:10px;line-height:12px;display:inline-block;width:100%;text-align:center;opacity:",";}img{margin:auto 0;opacity:",";}",";@media screen and (","){display:",";.tooltip-trigger{border:none;background-color:transparent;display:flex;align-items:center;justify-content:space-between;flex-direction:column;height:24px;.dot{width:4px;height:4px;background-color:#fff;border-radius:50%;}}",";}"],(function(e){return e.isActive?"#59C1C9":"transparent"}),(function(e){return e.isDisabled?"not-allowed":"pointer"}),(function(e){return e.desktopHide?"none":"flex"}),(function(e){var t=e.margin;return t&&Object(k.css)(["margin:",";"],t)}),(function(e){return e.isDisabled?.37:1}),(function(e){return e.isDisabled?.37:1}),(function(e){return e.hasNotification&&Object(k.css)(["position:relative;&::after{position:absolute;right:4px;bottom:4px;content:'';display:block;width:7px;height:7px;border-radius:50%;background-color:#FF8B7B;}"])}),Q.media.down.xsm,(function(e){return e.mobileHide?"none":"flex"}),(function(e){return e.tooltipOption&&Object(k.css)(["width:100%;flex-direction:row;justify-content:flex-start;min-height:auto;img{width:15px;height:15px;margin-right:15px;}span{font-size:12px;line-height:14px;width:fit-content;}"])})),Dt=k.default.div.withConfig({displayName:"VideoChatControls__Separate",componentId:"k7ki6a-3"})(["width:1px;height:35px;background:#4F5463;margin:0 22px;@media screen and (","){display:none;}"],Q.media.down.smm),Ft=Object(k.default)(Z.a).withConfig({displayName:"VideoChatControls__EndCallButton",componentId:"k7ki6a-4"})(["max-height:28px;@media screen and (","){display:none;}"],Q.media.down.mdm),Ht=k.default.div.withConfig({displayName:"VideoChatControls__EndCallButtonWrapper",componentId:"k7ki6a-5"})(["margin-left:22px;@media screen and (","){display:none;}"],Q.media.down.mdm),Bt=k.default.div.withConfig({displayName:"VideoChatControls__InviteButtonWrapper",componentId:"k7ki6a-6"})(["margin-right:22px;@media screen and (","){display:none;}"],Q.media.down.mdm),Ut=Object(I.connect)((function(e){return{hasNewMessages:e.tourViewer.hasNewMessages,cpLiveStr:e.app.localization.cpLiveStr,isStopTrackLive:e.tourViewer.isStopTrackLive}}),null)(Object(y.memo)(Lt)),Wt={videoTracks:[],audioTracks:[],dataTracks:[],isVideoEnabled:!0,isAudioEnabled:!0,videoScalingFactor:1,isShowInviteMemeberModal:!1,isShowConfimEndCall:!1,isEndCallDisabled:!1},Jt=function(e,t){switch(t.type){case"ADD_VIDEO_TRACK":return function(e,t){return x()({},e,{videoTracks:[].concat(Fe()(e.videoTracks),[t.track])})}(e,t);case"REMOVE_VIDEO_TRACK":return function(e,t){var i=t.track,n=e.videoTracks.filter((function(e){return e.sid!==i.sid}));return x()({},e,{videoTracks:n})}(e,t);case"SET_VIDEO_TRACKS":return function(e,t){return x()({},e,{videoTracks:t.tracks})}(e,t);case"ADD_AUDIO_TRACK":return function(e,t){return x()({},e,{audioTracks:[].concat(Fe()(e.audioTracks),[t.track])})}(e,t);case"REMOVE_AUDIO_TRACK":return function(e,t){var i=t.track,n=e.audioTracks.filter((function(e){return e.sid!==i.sid}));return x()({},e,{audioTracks:n})}(e,t);case"SET_AUDIO_TRACKS":return function(e,t){return x()({},e,{audioTracks:t.tracks})}(e,t);case"ADD_DATA_TRACK":return function(e,t){return x()({},e,{dataTracks:[].concat(Fe()(e.dataTracks),[t.track])})}(e,t);case"REMOVE_DATA_TRACK":return function(e,t){var i=t.track,n=e.dataTracks.filter((function(e){return e.sid!==i.sid}));return x()({},e,{dataTracks:n})}(e,t);case"SET_DATA_TRACKS":return function(e,t){return x()({},e,{dataTracks:t.tracks})}(e,t);case"SET_VIDEO_STATUS":return function(e,t){return x()({},e,{isVideoEnabled:t.status})}(e,t);case"SET_AUDIO_STATUS":return function(e,t){return x()({},e,{isAudioEnabled:t.status})}(e,t);case"SET_VIDEO_SCALING_FACTOR":return function(e,t){return x()({},e,{videoScalingFactor:t.videoScalingFactor})}(e,t);case"SET_IS_END_CALL_DISABLED":return function(e,t){return x()({},e,{isEndCallDisabled:t.isEndCallDisabled})}(e,t);case"SET_IS_SHOW_CONFIRM_END_CALL":return function(e,t){return x()({},e,{isShowConfimEndCall:t.isShowConfimEndCall})}(e,t);case"SET_IS_SHOW_INVITE_MEMBER_MODAL":return function(e,t){return x()({},e,{isShowInviteMemeberModal:t.isShowInviteMemeberModal})}(e,t);case"CLOSE_CONFIRM_END_CALL_AND_DISABLE":return function(e){return x()({},e,{isShowConfimEndCall:!1,isEndCallDisabled:!0})}(e);case"SET_ALL_TRACKS":return function(e,t){var i=t.tracksObj,n=(null==i?void 0:i.videoTracks)||e.videoTracks,o=(null==i?void 0:i.audioTracks)||e.audioTracks,a=(null==i?void 0:i.dataTracks)||e.dataTracks;return x()({},e,{videoTracks:n,audioTracks:o,dataTracks:a})}(e,t);default:return e}},Gt=function(e){return{type:"SET_VIDEO_STATUS",status:e}},qt=function(e){return{type:"SET_AUDIO_STATUS",status:e}},Kt=function(e){return{type:"SET_IS_END_CALL_DISABLED",isEndCallDisabled:e}},Yt=function(e){return{type:"SET_IS_SHOW_CONFIRM_END_CALL",isShowConfimEndCall:e}},Xt=function(e){return{type:"SET_IS_SHOW_INVITE_MEMBER_MODAL",isShowInviteMemeberModal:e}},Zt=function(e){return{type:"SET_ALL_TRACKS",tracksObj:e}},$t=k.default.div.withConfig({displayName:"Participant__Container",componentId:"sc-1wyu0wn-0"})(["display:flex;flex-direction:column;margin-top:",";width:",";height:",";max-height:",";position:",";background:rgba(0,0,0,0.25);border-radius:3px;padding:",";pointer-events:auto;position:relative;"," ",";",";@media screen and (","){width:",";height:",";}@media screen and (","){width:",";height:",";padding:",";}@media screen and (","){width:",";height:",";}@media screen and (max-width:375px){width:",";height:",";",";}@media screen and (max-width:375px) and (min-height:640px){width:",";height:",";}@media screen and (orientation:landscape) and (max-height:375px){width:",";height:",";}"],(function(e){return e.isFullScreen?"0":"20px"}),(function(e){var t=e.isFullScreen,i=e.size;return t?"100%":"".concat(140*i,"px")}),(function(e){var t=e.isFullScreen,i=e.size;return t?"auto":"".concat(165*i,"px")}),(function(e){return e.isFullScreen?"auto":"250px"}),(function(e){return e.isFullScreen?"relative":"static"}),(function(e){return e.isFullScreen?"0":"10px 10px 15px"}),(function(e){var t=e.isHide,i=e.isLocal;return t&&!i&&Object(k.css)(["display:none;"])}),(function(e){var t=e.isLocal,i=e.isFullScreen;return!t&&!i&&Object(k.css)(["margin-left:10px;"])}),(function(e){var t=e.isLast,i=e.isFullScreen;return t&&i&&Object(k.css)(["grid-column-start:1;grid-column-end:4;width:50%;margin:0 auto;"])}),Q.media.down.lg,(function(e){var t=e.isFullScreen,i=e.size,n=e.isLast;return t&&n?"50%":t&&!n?"100%":1.65===i?"".concat(105*i,"px"):"140px"}),(function(e){var t=e.isFullScreen,i=e.size;return t?"auto":1.65===i?"".concat(120*i,"px"):"165px"}),Q.media.down.sm,(function(e){var t=e.isFullScreen,i=e.size,n=e.isLast;return t&&n?"50%":t&&!n?"100%":1.65===i?"".concat(105*i,"px"):"82px"}),(function(e){var t=e.isFullScreen,i=e.size;return t?"auto":1.65===i?"".concat(120*i,"px"):"106px"}),(function(e){return e.isFullScreen?"0":"5px 5px"}),Q.media.down.xs,(function(e){var t=e.isFullScreen,i=e.size,n=e.isLast;return t&&n?"50%":t&&!n?"100%":1.65===i?"168px":"82px"}),(function(e){var t=e.isFullScreen,i=e.size;return t?"auto":1.65===i?"200px":"106px"}),(function(e){var t=e.isFullScreen,i=e.size,n=e.isLast,o=e.isMessageChatShow;return t&&n?"50%":t&&!n?"100%":1.65!==i||o?"72px":"140px"}),(function(e){var t=e.isFullScreen,i=e.size,n=e.isMessageChatShow;return t?"auto":1.65!==i||n?"94px":"170px"}),(function(e){var t=e.isLocal,i=e.isFullScreen;return!t&&!i&&Object(k.css)(["margin-left:5px;"])}),(function(e){var t=e.isFullScreen,i=e.size,n=e.isLast;return t&&n?"50%":t&&!n?"100%":1.65===i?"140px":"72px"}),(function(e){var t=e.isFullScreen,i=e.size;return t?"auto":1.65===i?"170px":"94px"}),(function(e){var t=e.isFullScreen,i=e.isLast;return t&&i?"50%":t&&!i?"100%":"110px"}),(function(e){return e.isFullScreen?"auto":"140px"})),Qt=k.default.div.withConfig({displayName:"Participant__Header",componentId:"sc-1wyu0wn-1"})(["display:flex;align-items:center;justify-content:space-between;flex-shrink:0;position:absolute;z-index:1;left:10px;top:10px;right:10px;",";@media screen and (","){",";}@media screen and (","){left:5px;top:5px;right:5px;}@media screen and (","){",";}"],(function(e){return e.isFullScreen&&Object(k.css)(["left:15px;top:15px;right:15px;"])}),Q.media.down.md,(function(e){return e.isFullScreen&&Object(k.css)(["left:10px;top:10px;right:10px;"])}),Q.media.down.sm,Q.media.down.xs,(function(e){return e.isFullScreen&&Object(k.css)(["left:5px;top:5px;"])})),ei=k.default.div.withConfig({displayName:"Participant__HeaderMobile",componentId:"sc-1wyu0wn-2"})(["display:none;@media screen and (","){left:0;right:0;top:0;position:fixed;z-index:1;background:rgba(0,0,0,0.75);backdrop-filter:blur(7px);padding:8px 16px 8px 20px;display:flex;align-items:center;display:flex;align-items:center;height:44px;}"],Q.media.down.mdm),ti=k.default.div.withConfig({displayName:"Participant__HeaderControls",componentId:"sc-1wyu0wn-3"})(["display:flex;align-items:center;justify-content:space-between;padding:0 0 0 20px;flex-grow:1;button:not(:last-child){margin-right:10px;}"]),ii=Object(k.default)(Z.h).withConfig({displayName:"Participant__InviteButton",componentId:"sc-1wyu0wn-4"})(["min-width:75px;color:#fff;"]),ni=Object(k.default)(Z.g).withConfig({displayName:"Participant__EndCallButton",componentId:"sc-1wyu0wn-5"})(["min-width:75px;"]),oi=k.default.button.withConfig({displayName:"Participant__ToggleHidePartcipant",componentId:"sc-1wyu0wn-6"})(["border:none;background-color:transparent;padding:0;cursor:pointer;img{width:6px;height:10px;transform:",";}@media screen and (","){line-height:1;img{width:4px;height:8px;}}"],(function(e){return e.isHide?"rotate(180deg)":"rotate(0deg)"}),Q.media.down.sm),ai=k.default.div.withConfig({displayName:"Participant__UserName",componentId:"sc-1wyu0wn-7"})(["font-weight:bold;font-size:12px;line-height:14px;color:#fff;text-align:center;width:100%;white-space:nowrap;margin-top:10px;flex-shrink:0;position:relative;span{overflow:hidden;text-overflow:ellipsis;width:100%;display:inline-block;}",";@media screen and (","){",";}@media screen and (","){",";}@media screen and (","){",";}"],(function(e){return e.isFullScreen&&Object(k.css)(["position:absolute;left:50%;transform:translateX(-50%);top:20px;font-size:24px;width:fit-content;line-height:29px;max-width:70%;"])}),Q.media.down.md,(function(e){return e.isFullScreen&&Object(k.css)(["top:10px;font-size:14px;line-height:16px;"])}),Q.media.down.sm,(function(e){return!e.isFullScreen&&Object(k.css)(["font-size:10px;width:90%;margin:10px auto 0;"])}),Q.media.down.xs,(function(e){return e.isFullScreen&&Object(k.css)(["top:0;font-size:10px;line-height:12px;"])})),ri=k.default.div.withConfig({displayName:"Participant__ParticipantEntity",componentId:"sc-1wyu0wn-8"})(["width:100%;height:100%;position:relative;"]),si=k.default.img.withConfig({displayName:"Participant__AudioIndicator",componentId:"sc-1wyu0wn-9"})(["position:absolute;width:13px;height:16px;top:-1px;right:0;",";@media screen and (","){width:15px;height:20px;top:0;}@media screen and (","){width:10px;height:15px;right:-7px;}@media screen and (","){top:-1px;}"],(function(e){return e.isFullScreen&&Object(k.css)(["width:23px;height:26px;right:-33px;top:3px;"])}),Q.media.down.md,Q.media.down.sm,Q.media.down.xs),ci=k.default.div.withConfig({displayName:"Participant__VideoContainer",componentId:"sc-1wyu0wn-10"})(["position:absolute;height:100%;width:100%;max-width:",";max-height:",";border-radius:",";top:",";;left:50%;overflow:hidden;background-color:rgba(0,0,0,0.6);backface-visibility:hidden;-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden;transform:translate3d(0,0,0) translateX(-50%);-webkit-transform:translate3d(0,0,0) translateX(-50%);-moz-transform:translate3d(0,0,0) translateX(-50%);pointer-events:all;"],(function(e){var t=e.size;return 1e3===t?"100%":"".concat(118*t,"px")}),(function(e){var t=e.size;return 1e3===t?"100%":"".concat(118*t,"px")}),(function(e){return 1e3===e.size?"0":"50%"}),(function(e){return 1e3===e.size?"0":"2px"})),li=k.default.div.withConfig({displayName:"Participant__VideoPlaceholder",componentId:"sc-1wyu0wn-11"})(["font-size:10px;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);@media screen and (","){font-size:8px;}"],Q.media.down.md),di=k.default.video.withConfig({displayName:"Participant__Video",componentId:"sc-1wyu0wn-12"})(["transform:translate(-50%,0) rotateY(180deg);margin-left:50%;height:100%;max-height:100vh;"," "," ",""],(function(e){var t=e.videoScalingFactor;return t&&Object(k.css)(["height:calc(100%*",");"],t)}),(function(e){return e.isHide&&Object(k.css)(["visibility:hidden;"])}),(function(e){return e.isFullScreen&&Object(k.css)(["width:100%;height:100%;@media screen and (","){object-fit:cover;}"],Q.media.down.lg)})),ui=k.default.audio.withConfig({displayName:"Participant__Audio",componentId:"sc-1wyu0wn-13"})([""]),pi=k.default.button.withConfig({displayName:"Participant__ToggleDataHost",componentId:"sc-1wyu0wn-14"})(["border:0;background-color:transparent;padding:0;cursor:pointer;font-size:0;img{width:15px;height:15px;}@media screen and (","){img{width:8px;height:8px;}}"],Q.media.down.sm),mi=k.default.div.withConfig({displayName:"Participant__HostMarker",componentId:"sc-1wyu0wn-15"})(["position:absolute;left:0;bottom:0;width:12px;height:12px;background-color:#FF002E;border-radius:50%;border:1px solid #FFF;"," @media screen and (","){","}@media screen and (","){width:8px;height:8px;","}"],(function(e){return e.isFullScreen&&Object(k.css)(["top:15px;right:15px;bottom:unset;left:unset;"])}),Q.media.down.md,(function(e){return e.isFullScreen&&Object(k.css)(["top:10px;right:10px;bottom:unset;left:unset;"])}),Q.media.down.sm,(function(e){return e.isFullScreen&&Object(k.css)(["top:5px;right:5px;"])})),hi=function(e){var t=e.participant,i=e.participants,n=e.isLocal,o=e.isStopTrack,a=e.isHide,r=void 0!==a&&a,s=e.isRemoteParticipantsExist,c=e.host,l=e.toggleStopTrack,d=e.handleSendHostMsg,u=e.handleReceiveData,p=e.handleLogout,m=e.stopSharingScreen,h=e.sendHostRequestChangingMsg,f=e.sendSyncMessages,g=e.sizeParticipant,b=e.isLastRemoteParticipantAndThree,v=e.toggleHideRemoteParticipantas,x=void 0===v?function(){return null}:v,C=e.isMessageChatShow,I=e.setMessageChatStatus,k=e.toggleHideTourViewerControls,O=e.isHideTourViewerControls,j=e.isAudioExist,T=e.isVideoExist,N=e.joinSettings,M=e.handleEndCall,A=e.hostIds,L=e.roomName,P=e.tourTitle,z=e.isWhiteBoardStarted,R=e.setWhiteBoardStatus,D=Object(y.useReducer)(Jt,Wt),F=W()(D,2),H=F[0],B=F[1],U=Object(y.useRef)(),J=Object(y.useRef)(),G=c&&t&&c.sid===t.sid,q=Ne(t),K=function(e){var t=function(e){var t=V()(e,"dimensions.width",null),i=V()(e,"dimensions.height",null);return!t||!i||t>i?1:i/t}(e);B(function(e){return{type:"SET_VIDEO_SCALING_FACTOR",videoScalingFactor:e}}(t))},Y=function(e){return Array.from(e.values()).map((function(e){return e.track})).filter((function(e){return null!==e}))},X=function(){var e=S()(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B({type:"CLOSE_CONFIRM_END_CALL_AND_DISABLE"}),e.next=4,M();case 4:B(Kt(!1)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),B(Kt(!1));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=S()(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B(Yt(!1));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=S()(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!i.length){e.next=4;break}return B(Yt(!0)),e.abrupt("return");case 4:return e.next=6,X();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(y.useEffect)((function(){return B(Zt({videoTracks:Y(t.videoTracks),audioTracks:Y(t.audioTracks),dataTracks:Y(t.dataTracks)})),t.on("trackSubscribed",(function(e){"data"===e.kind?(B(function(e){return{type:"ADD_DATA_TRACK",track:e}}(e)),e.on("message",(function(e){u(e)}))):"video"===e.kind?(B(function(e){return{type:"ADD_VIDEO_TRACK",track:e}}(e)),e.once("started",(function(e){K(e)}))):B(function(e){return{type:"ADD_AUDIO_TRACK",track:e}}(e))})),t.on("trackUnsubscribed",(function(e){"data"===e.kind&&n?B(function(e){return{type:"REMOVE_DATA_TRACK",track:e}}(e)):"video"===e.kind?B(function(e){return{type:"REMOVE_VIDEO_TRACK",track:e}}(e)):B(function(e){return{type:"REMOVE_AUDIO_TRACK",track:e}}(e))})),t.on("trackDisabled",(function(e){"video"===e.kind&&B(Gt(!1)),"audio"===e.kind&&B(qt(!1))})),t.on("trackEnabled",(function(e){"video"===e.kind&&B(Gt(!0)),"audio"===e.kind&&B(qt(!0))})),function(){B(Zt({videoTracks:[],audioTracks:[],dataTracks:[]})),t.removeAllListeners()}}),[]),Object(y.useEffect)((function(){var e=H.videoTracks[0];if(e)return e.attach(U.current),n&&(K(e),(null==N?void 0:N.isVideoEnabled)||(e.disable(),B(Gt(e.isEnabled)))),function(){e.detach()}}),[H.videoTracks]),Object(y.useEffect)((function(){var e=H.audioTracks[0];if(e)return e.attach(U.current),n&&!(null==N?void 0:N.isAudioEnabled)&&(e.disable(),B(qt(e.isEnabled))),function(){e.detach()}}),[H.audioTracks]),Object(y.useEffect)((function(){f()}),[H.dataTracks]),E.a.createElement($t,{isHide:r,isLocal:n,isFullScreen:1e3===g,isLast:b,size:g,isMessageChatShow:C},n&&1e3!==g&&E.a.createElement(ei,null,E.a.createElement(rt,{sizeParticipant:g,isFixedSize:!0}),(null==N?void 0:N.isHost)&&E.a.createElement(ti,null,E.a.createElement(ii,{onClick:function(){return B(Xt(!0))}},"+ Invite"),E.a.createElement(ni,{onClick:$,disabled:H.isEndCallDisabled},"End Call"))),E.a.createElement(Qt,{isFullScreen:1e3===g},n&&E.a.createElement(rt,{sizeParticipant:g,hideMobile:1e3!==g}),!n&&G&&c&&E.a.createElement(pi,{onClick:l},E.a.createElement("img",{src:o?"./assets/img/cp-live/play-icon.svg":"./assets/img/cp-live/pause-icon.svg",alt:"icon"})),n&&s&&1e3!==g&&E.a.createElement(oi,{isHide:n&&r,onClick:x},E.a.createElement("img",{src:"./assets/img/cp-live/arrow-icon.png",alt:"icon"}))),E.a.createElement(ri,{size:g},E.a.createElement(ci,{className:"video-container",isHost:G,isLocal:n,size:g},E.a.createElement(li,{className:"video-placeholder"},E.a.createElement(_.a,{icon:tt.a,size:"5x"})),E.a.createElement(di,{className:"video",ref:U,autoPlay:!0,isHide:!H.isVideoEnabled,videoScalingFactor:H.videoScalingFactor,isFullScreen:1e3===g})),E.a.createElement(ui,{ref:J,autoPlay:!0}),G&&c&&E.a.createElement(mi,{isFullScreen:1e3===g})),E.a.createElement(ai,{isFullScreen:1e3===g},E.a.createElement("span",null,q),!H.isAudioEnabled&&E.a.createElement(si,{src:"./assets/img/cp-live/micro-off-icon.svg",alt:"icon",isFullScreen:1e3===g})),n&&E.a.createElement(Ut,{participant:t,participants:i,isMessageChatShow:C,isStopTrack:o,toggleStopTrack:l,handleClickShareButton:function(){G?m(t.sid):c?h(t.sid):d(t.sid)},isLocal:n,host:c,isHost:G,hostIds:A,toggleAudioStatus:function(){t.audioTracks.forEach((function(e){e.track.isEnabled?e.track.disable():e.track.enable(),B(qt(e.track.isEnabled))}))},isAudioEnabled:H.isAudioEnabled,toggleVideoStatus:function(){t.videoTracks.forEach((function(e){e.track.isEnabled?e.track.disable():e.track.enable(),B(Gt(e.track.isEnabled))}))},isVideoEnabled:H.isVideoEnabled,setMessageChatStatus:I,toggleHideTourViewerControls:k,isHideTourViewerControls:O,handleLogout:p,isAudioExist:j,isVideoExist:T,handleEndCall:M,joinSettings:N,roomName:L,tourTitle:P,handleClickConfirmEndCall:X,handleClickCancelEndCall:Z,handleClickEndCall:$,setIsShowInviteMemeberModal:function(e){return B(Xt(e))},isEndCallDisabled:H.isEndCallDisabled,isShowConfimEndCall:H.isShowConfimEndCall,isShowInviteMemeberModal:H.isShowInviteMemeberModal,isWhiteBoardStarted:z,setWhiteBoardStatus:R}))},fi={room:null,participants:[],host:null,isHost:!1,isStopTrack:!1,continueStatus:0,isHideRemoteParticipantas:!1,lastSelectedInfospotId:null,isAudioExist:!1,isVideoExist:!1},gi=function(e,t){switch(t.type){case"ADD_PARTICIPANT":return function(e,t){var i=t.participant,n=e.participants,o=[].concat(Fe()(n),[i]);return x()({},e,{participants:o})}(e,t);case"REMOVE_PARTICIPANT":return function(e,t){var i=t.participant,n=e.participants.filter((function(e){return e.sid!==i.sid}));return x()({},e,{participants:n})}(e,t);case"SET_HOST":return function(e,t){var i=t.host;return x()({},e,{host:i})}(e,t);case"SET_HOST_STATUS":return function(e,t){var i=t.isHost;return x()({},e,{isHost:i})}(e,t);case"SET_STOP_TRACK":return function(e,t){var i=t.isStopTrack;return x()({},e,{isStopTrack:i})}(e,t);case"TOGGLE_STOP_TRACK":return function(e){var t=e.isStopTrack;return x()({},e,{isStopTrack:!t})}(e);case"SET_CONTINUE_STATUS":return function(e,t){var i=t.continueStatus;return x()({},e,{continueStatus:i})}(e,t);case"NEXT_CONTINUE_STATUS":return function(e){var t=e.continueStatus+1;return x()({},e,{continueStatus:t})}(e);case"SET_HIDE_REMOTE_PARTICIPANTS":return function(e,t){var i=t.isHideRemoteParticipantas;return x()({},e,{isHideRemoteParticipantas:i})}(e,t);case"TOGGLE_HIDE_REMOTE_PARTICIPANTS":return function(e){var t=e.isHideRemoteParticipantas;return x()({},e,{isHideRemoteParticipantas:!t})}(e);case"SET_ROOM":return function(e,t){var i=t.room;return x()({},e,{room:i})}(e,t);case"SET_LAST_SELECTED_INFOSPOT_ID":return function(e,t){var i=t.lastSelectedInfospotId;return x()({},e,{lastSelectedInfospotId:i})}(e,t);case"SET_AUDIO_EXIST":return function(e,t){var i=t.isAudioExist;return x()({},e,{isAudioExist:i})}(e,t);case"SET_VIDEO_EXIST":return function(e,t){var i=t.isVideoExist;return x()({},e,{isVideoExist:i})}(e,t);default:return e}},bi=function(e){return{type:"SET_HOST",host:e}},wi=function(e){return{type:"SET_HOST_STATUS",isHost:e}},vi=function(e){return{type:"SET_STOP_TRACK",isStopTrack:e}},xi=function(e){return{type:"SET_AUDIO_EXIST",isAudioExist:e}},Ci=function(e){return{type:"SET_VIDEO_EXIST",isVideoExist:e}},Si=new(0,i(691).LocalDataTrack),yi=k.default.div.withConfig({displayName:"Room__ParticipantsContainer",componentId:"sc-8nsts2-0"})(["display:flex;flex-direction:row;justify-content:flex-end;height:",";",";@media screen and (","){",";}@media screen and (","){flex-wrap:nowrap;max-width:100%;}@media screen and (","){",";}"],(function(e){return e.isFullScreen?"100%":"auto"}),(function(e){return e.isFullScreen&&Object(k.css)(["display:grid;width:100%;&.container-for-1{grid-template-columns:1fr;grid-template-rows:1fr;}&.container-for-2{grid-template-columns:1fr;grid-template-rows:50% 50%;}&.container-for-3,&.container-for-4{grid-template-columns:50% 50%;grid-template-rows:50% 50%;}"])}),Q.media.down.xl,(function(e){var t=e.size,i=e.isMessageChatShow;return 1.65===t&&i&&Object(k.css)(["flex-wrap:wrap;max-width:485px;"])}),Q.media.down.lg,Q.media.down.md,(function(e){return 1.65===e.size&&Object(k.css)(["flex-wrap:wrap;max-width:485px;"])})),Ei=Object(I.connect)(null,(function(e){return{setLiveHost:function(t){return e(function(e){return{type:Be.q,host:e}}(t))},setLocalParticipantSid:function(t){return e(function(e){return{type:Be.r,sid:e}}(t))},setIsStopTrackLive:function(t){return e(function(e){return{type:Be.p,status:e}}(t))}}}))((function(e){var t=e.roomName,i=e.tourTitle,n=e.token,o=e.handleLogout,a=e.setCameraForStreaming,r=e.setEnableControls,s=e.setDisableControls,c=e.sceneId,l=e.viewer,d=e.viewerProps,u=e.selectedInfospotId,p=e.setSelectedHtmlInfospot,m=e.isTourViewTypeLegacy,h=e.cpLiveSize,f=e.user,g=e.isMessageChatShow,b=e.setMessageChatStatus,v=e.toggleHideTourViewerControls,C=e.isHideTourViewerControls,I=e.joinSettings,k=(e.isLiveHostEnabled,e.handleEndCall),_=e.hostIds,O=e.isWhiteBoardStarted,j=e.setWhiteBoardStatus,T=e.tourId,N=e.setLiveHost,M=e.setLocalParticipantSid,A=e.setIsStopTrackLive,L=Object(y.useReducer)(gi,fi),P=W()(L,2),z=P[0],R=P[1],D=Object(y.useRef)(z.room),F=Object(y.useRef)(z.host),H=Object(y.useRef)(z.isStopTrack),B=Object(y.useRef)(null),U=Object(y.useRef)(null),J=Object(y.useRef)(!0),G=Object(y.useRef)(d),q=Object(y.useMemo)((function(){return z.participants.length>0}),[z.participants]),K=Object(y.useCallback)((function(){R({type:"TOGGLE_STOP_TRACK"});var e=Me(G.current,z.lastSelectedInfospotId);p(e)}),[z.lastSelectedInfospotId]),Y=Object(y.useCallback)((function(){return R({type:"TOGGLE_HIDE_REMOTE_PARTICIPANTS"})}),[]),X=function(e){var t=Ne(e),i="".concat(t," ").concat(Ce);Object(Ke.b)(i)},Z=function(){var e=function(e){var t={type:ge,data:{senderSid:e}};return JSON.stringify(t)}(D.current.localParticipant.sid);Si.send(e)},$=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=d.openModal;e&&Z(),t("confirm-continue-chating")},Q=function(e,t){var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isReturnObj:!1},i=e.senderSid,n=e.sceneId,o=e.coords,a=e.fov,r=e.tourId,s=t.isReturnObj,c={type:fe,data:{senderSid:i,sceneId:n,coords:x()({},o),fov:a,tourId:r}};return s?c:JSON.stringify(c)}({senderSid:z.room.localParticipant.sid,sceneId:c,coords:e,fov:t,tourId:T});Si.send(i)},ee=function(e,t){var i=function(e,t){var i={type:be,data:{senderSid:e,infospotId:t}};return JSON.stringify(i)}(e,t);Si.send(i)},te=Object(y.useCallback)((function(e){var t=_e(e);Si.send(t);var i=z.room.localParticipant.sid===e?z.room.localParticipant:z.room.participants.get(e);i&&(R(bi(i)),z.room.localParticipant.sid===e?(R(wi(!0)),r(),Object(Ke.b)(xe)):(R(wi(!1)),s(),X(i)))}),[z.host,z.room,z.participants]),ie=Object(y.useCallback)((function(e){var t,i=(t={type:he,data:{senderSid:e}},JSON.stringify(t));Si.send(i)}),[]),oe=function(){R(bi(null)),R(wi(!1)),H.current?R(vi(!1)):r()},ae=function(e){var t,i=(t={type:me,data:{senderSid:e}},JSON.stringify(t));Si.send(i),oe()},re=Object(y.useCallback)((function(e){var t=je(e);if(t)if(je(t).type!==pe)if(function(e){return je(e).type===me}(t))oe();else if(function(e){return je(e).type===be}(t))!function(e){var t=e.data.infospotId,i=Me(G.current,t);R({type:"SET_LAST_SELECTED_INFOSPOT_ID",lastSelectedInfospotId:t}),H.current||p(i)}(t);else if(function(e){return je(e).type===he}(t))!function(e){var t=d.openModal;U.current=e,F.current&&F.current.sid===D.current.localParticipant.sid&&t("confirm-host-changing")}(t);else{if(function(e){return je(e).type===ge}(t))return clearTimeout(B.current),void $(!1);if(!function(e){return je(e).type===we}(t)||z.host)if(!function(e){return je(e).type===ve}(t)||O){var i=t.data,n=i.senderSid,o=i.sceneId,c=i.coords,l=i.fov,u=i.tourId;n===z.room.localParticipant.sid||H.current||a(c,o,l,u)}else j(t.data);else N(t.data.host)}else!function(e,t){var i=e.data.hostSid,n=t.localParticipant.sid===i?t.localParticipant:t.participants.get(i);if(n){var o=null===F.current;R(bi(n)),n.identity===t.localParticipant.identity?(R(wi(!0)),r(),Object(Ke.b)(xe)):(R(wi(!1)),z.isStopTrack||s(),R(vi(!1)),o&&X(n))}}(t,z.room)}),[z.host,z.room,z.participants]),se=function(e,t,i){if(e&&t){var n=Ve(z.room);ee(n,i)}},ce=function(){var e=S()(w.a.mark((function e(){var t,i,n,o,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=1;t<=3;t++)F.current&&F.current.sid===D.current.localParticipant.sid&&(i=_e(F.current.sid),Si.send(i),se(z.room,z.isHost,u)),z.isHost&&(n=Oe(z.host),Si.send(n),O&&(r=void 0,r={type:ve,data:!0},o=JSON.stringify(r),Si.send(o)));z.isHost&&(a=Oe(z.host),Si.send(a));case 2:case"end":return e.stop()}var r}),e)})));return function(){return e.apply(this,arguments)}}();Object(y.useEffect)((function(){D.current=z.room,G.current=d}),[d]),Object(y.useEffect)((function(){D.current=z.room,z.room&&M(D.current.localParticipant.sid)}),[z.room]),Object(y.useEffect)((function(){F.current=z.host,N(z.host)}),[z.host]),Object(y.useEffect)((function(){var e=null;return z.continueStatus&&(e=Te($)),function(){clearTimeout(e)}}),[z.continueStatus]),Object(y.useEffect)((function(){var e=function(e){R(function(e){return{type:"ADD_PARTICIPANT",participant:e}}(e)),function(e){var t=Ne(e),i="".concat(t," ").concat(Se);Object(Ke.b)(i)}(e)},i=function(e){F.current&&F.current.sid===e.sid&&(r(),R(bi(null)),R(wi(!1))),R(function(e){return{type:"REMOVE_PARTICIPANT",participant:e}}(e))};return function(){var a=S()(w.a.mark((function a(){var r,s,c,l,u,p;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.prev=1,s=Le(!0,!0),a.next=5,Re.a.createLocalTracks(s);case 5:r=a.sent,R(Ci(!!s.video)),R(xi(!!s.audio)),a.next=36;break;case 10:return a.prev=10,a.t0=a.catch(1),a.prev=12,c=Le(!1,!0),a.next=16,Re.a.createLocalTracks(c);case 16:r=a.sent,R(Ci(!!c.video)),a.next=36;break;case 20:return a.prev=20,a.t1=a.catch(12),a.prev=22,l=Le(!0,!1),a.next=26,Re.a.createLocalTracks(l);case 26:r=a.sent,R(xi(!!l.audio)),a.next=36;break;case 30:return a.prev=30,a.t2=a.catch(22),u=Le(!1,!1),a.next=35,Re.a.createLocalTracks(u);case 35:r=a.sent;case 36:return a.next=38,Re.a.connect(n,{name:t,tracks:r,preferredVideoCodecs:["VP8"]});case 38:p=a.sent,R({type:"SET_ROOM",room:p}),p.on("participantConnected",e),p.on("participantDisconnected",i),p.participants.forEach(e),p.localParticipant.publishTrack(Si,{name:"dataTrack"}),p.on("disconnected",(function(){o()})),B.current=Te($),!d.tour.isNotifyEnabled||"guest"!==f.type&&f.id===d.tour.userId||Object(ne.c)(d.tour.shortId),a.next=53;break;case 49:a.prev=49,a.t3=a.catch(0),a.t3.message&&a.t3.name&&"TwilioError"===a.t3.name?Object(Ke.a)(Ie+a.t3.message):Object(Ke.a)(ke),o(!0);case 53:case"end":return a.stop()}}),a,null,[[0,49],[1,10],[12,20],[22,30]])})));return function(){return a.apply(this,arguments)}}()(),function(){var e,t,i=D.current;(i&&"connected"===(null==i||null===(e=i.localParticipant)||void 0===e?void 0:e.state)||"disconnected"===(null==i||null===(t=i.localParticipant)||void 0===t?void 0:t.state))&&(i.localParticipant.tracks.forEach((function(e){"data"!==e.track.kind&&e.track.stop(),i.localParticipant.unpublishTrack(e.track,!0)})),i.disconnect()),r()}}),[t,n]),Object(y.useEffect)((function(){var e,t;if(l&&l.OrbitControls&&z.isHost){var i=function(e){var t,i,n=null;n=m?e.target.object.position:l.control.getRotations();var o=(null==e||null===(t=e.target)||void 0===t||null===(i=t.object)||void 0===i?void 0:i.fov)||null;Q(n,o)},n=function(e){var t,i,n=null,o=(null==l||null===(t=l.control)||void 0===t||null===(i=t.object)||void 0===i?void 0:i.fov)||null,a=function(e){return V()(e,"subtype",null)===ue.r.SLIDER}(e.target);n=m?l.control.object.position:l.control.getRotations(),a&&Q(n,o)};l.control.addEventListener("change",i),l.panorama.addEventListener("click",n);var o=null,a=(null==l||null===(e=l.control)||void 0===e||null===(t=e.object)||void 0===t?void 0:t.fov)||null;return o=m?l.control.object.position:l.control.getRotations(),Q(o,a),function(){l.control.removeEventListener("change",i),l.panorama.removeEventListener("click",n)}}}),[l,z.isHost,c,m,T]),Object(y.useEffect)((function(){H.current=z.isStopTrack,J.current?J.current=!1:(z.isStopTrack&&F.current?(r(),Object(Ke.b)(Ee)):!z.isStopTrack&&F.current?(s(),Object(Ke.b)(ye)):r(),A(z.isStopTrack))}),[z.isStopTrack]),Object(y.useEffect)((function(){if(z.room&&z.isHost){var e=Ve(z.room);ee(e,u)}}),[u,z.room,z.isHost]),Object(y.useEffect)((function(){z.isHost&&A(!1)}),[z.isHost]);var le=z.participants.map((function(e,n){return E.a.createElement(hi,{key:e.sid,participant:e,participants:z.participants,host:z.host,toggleStopTrack:K,handleReceiveData:re,handleSendHostMsg:te,handleLogout:o,stopSharingScreen:ae,sendHostRequestChangingMsg:ie,sendSyncMessages:ce,isStopTrack:z.isStopTrack,isRemoteParticipantsExist:q,sizeParticipant:h,isHide:1e3!==h&&z.isHideRemoteParticipantas,isLastRemoteParticipantAndThree:2===z.participants.length&&z.participants.length-1===n,isAudioExist:z.isAudioExist,isVideoExist:z.isVideoExist,joinSettings:I,handleEndCall:k,hostIds:_,roomName:t,tourTitle:i})}));return E.a.createElement(E.a.Fragment,null,E.a.createElement(yi,{isFullScreen:1e3===h,className:"container-for-".concat(z.participants.length+1),size:h,isMessageChatShow:g},z.room?E.a.createElement(hi,{isLocal:!0,key:z.room.localParticipant.sid,participant:z.room.localParticipant,participants:z.participants,host:z.host,toggleStopTrack:K,handleReceiveData:re,handleSendHostMsg:te,handleLogout:o,stopSharingScreen:ae,sendHostRequestChangingMsg:ie,sendSyncMessages:ce,isStopTrack:z.isStopTrack,toggleHideRemoteParticipantas:Y,isRemoteParticipantsExist:q,sizeParticipant:h,isHide:1e3!==h&&z.isHideRemoteParticipantas,isMessageChatShow:g,setMessageChatStatus:b,toggleHideTourViewerControls:v,isHideTourViewerControls:C,isAudioExist:z.isAudioExist,isVideoExist:z.isVideoExist,joinSettings:I,handleEndCall:k,hostIds:_,roomName:t,tourTitle:i,isWhiteBoardStarted:O,setWhiteBoardStatus:j}):"",le),E.a.createElement(Ze,{viewerProps:d,confirm:function(){(0,d.closeModal)(),R({type:"NEXT_CONTINUE_STATUS"})},cancel:function(){(0,d.closeModal)(),o(!0)}}),E.a.createElement(Qe,{viewerProps:d,confirm:function(){var e=d.closeModal,t=U.current.data.senderSid;te(t),e()},cancel:function(){(0,d.closeModal)()}}))})),Ii={username:"",roomName:null,token:null,isHostConnected:!1,isGoBack:!1},ki=function(e,t){switch(t.type){case"SET_USER_NAME":return function(e,t){var i=t.username;return x()({},e,{username:i})}(e,t);case"SET_ROOM_NAME":return function(e,t){var i=t.roomName;return x()({},e,{roomName:i})}(e,t);case"SET_GENERAL_CONNECTION_DATA":return function(e,t){var i=t.data,n=(null==i?void 0:i.username)||e.username,o=(null==i?void 0:i.roomName)||e.roomName;return x()({},e,{username:n,roomName:o})}(e,t);case"SET_TOKEN":return function(e,t){var i=t.token;return x()({},e,{token:i})}(e,t);case"SET_IS_HOST_CONNECTED":return function(e,t){var i=t.isHostConnected;return x()({},e,{isHostConnected:i})}(e,t);case"SET_CONNECTED":return function(e,t){var i=t.token;return x()({},e,{token:i,isHostConnected:!0})}(e,t);case"SET_IS_GO_BACK":return function(e,t){var i=t.isGoBack;return x()({},e,{isGoBack:i})}(e,t);default:return e}},_i=function(e){return{type:"SET_ROOM_NAME",roomName:e}},Oi=function(e){return{type:"SET_TOKEN",token:e}},ji=function(e){return{type:"SET_CONNECTED",token:e}},Ti=k.default.div.withConfig({displayName:"VideoChat__Wrapper",componentId:"t4hqc4-0"})(["position:absolute;right:",";top:0;z-index:2;color:white;font-family:'Lato',sans-serif;font-size:10px;pointer-events:none;left:15px;display:",";@media screen and (","){display:flex;justify-content:flex-end;}",";"," @media screen and (","){",";}",";.confirm-window-container{pointer-events:auto;}"],(function(e){return e.isMessageChatShow?"calc(1.5em + ".concat(P.b,")"):"1.5em"}),(function(e){return e.isVr?"none":"block"}),Q.media.down.xl,(function(e){return!e.isFullScreen&&Object(k.css)(["@media screen and (","){right:1.5em;}@media screen and (","){right:.8em;left:.8em;}"],Q.media.down.lg,Q.media.down.xs)}),(function(e){return e.isInfoSpotModalOpen&&Object(k.css)(["& > *:not(.confirm-window-container){opacity:0.3;}"])}),Q.media.down.mdm,(function(e){return!e.isFullScreen&&Object(k.css)(["top:32px;"])}),(function(e){return e.isFullScreen&&Object(k.css)(["left:0;right:0;top:0;bottom:0;background-color:#4d4d4d;z-index:3;"])})),Ni=Object(I.connect)((function(e){return{cpLiveSize:e.tourViewer.cpLiveSize,vr:e.tourViewer.vr}}),null)((function(e){var t=e.tourId,i=e.tourShortId,n=e.sceneId,o=e.setCameraForStreaming,a=e.setEnableControls,r=e.setDisableControls,s=e.setVideoChatStatus,c=e.viewer,l=e.viewerProps,d=e.user,u=e.selectedInfospotId,p=e.setSelectedHtmlInfospot,m=e.isTourViewTypeLegacy,h=e.cpLiveSize,f=e.setCpLiveUsername,g=e.isMessageChatShow,b=e.setMessageChatStatus,v=e.toggleHideTourViewerControls,x=e.isHideTourViewerControls,C=e.vr,I=e.joinSettings,k=e.isLiveHostEnabled,_=e.resetJoinSettings,O=e.showMeetingEndModal,j=e.isHostnameNotTheSame,T=e.setIsInitiatorMeetingEnd,N=e.hostIds,M=e.tourTitle,A=e.close,L=e.isWhiteBoardStarted,P=e.setWhiteBoardStatus,z=e.collectionId,R=Object(y.useReducer)(ki,Ii),D=W()(R,2),F=D[0],H=D[1],B=F.roomName,U=F.token,J=F.isHostConnected,q=F.isGoBack,K=Object(y.useRef)(G.a.generate()),Y=k&&!J&&!q,X="Guest-".concat(K.current),Z="User-".concat(K.current),$=(null==I?void 0:I.isJoinAsGuest)?"".concat((null==I?void 0:I.userName)||X):"".concat((null==d?void 0:d.name)||Z),Q=(null==I?void 0:I.isJoinAsGuest)?null:d.id,ie={identity:"".concat($,"::").concat(K.current,"::").concat(Q),room:Ae(z,i,B),type:l.tour.config.roomType},ne=Object(y.useMemo)((function(){return function(e){return!!V()(e,"modal",null)}(l)}),[l.modal]);Object(y.useEffect)((function(){function e(){return(e=S()(w.a.mark((function e(){var t,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te(ie);case 3:t=e.sent,(i=t.token)&&(s(!0),H(ji(i)),f($)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),s(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return(!k||k&&I.isHost)&&(H(_i(ie.room)),function(){e.apply(this,arguments)}()),function(){j||O(),A()}}),[]),Object(y.useEffect)((function(){k&&!I.isHost&&(H(_i(ie.room)),f($))}),[U]);var oe=Object(y.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];p(null),H(Oi(null)),s(!1),e&&T(!0)}),[]);Object(y.useEffect)((function(){return window.addEventListener("beforeunload",(function(){return H(Oi(null))})),function(){window.removeEventListener("beforeunload",(function(){return H(Oi(null))})),H(Oi(null))}}),[]);var ae=function(){var e=S()(w.a.mark((function e(){var i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={roomName:B,tourId:t},T(!0),e.next=5,n=i,Object(ee.a)({method:"POST",url:"".concat("twilio","/room/close"),data:n});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}var n}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),re=function(){return U?E.a.createElement(Ti,{isInfoSpotModalOpen:ne,isFullScreen:1e3===h,isMessageChatShow:g,isVr:C},E.a.createElement(Ei,{viewerProps:l,setCameraForStreaming:o,roomName:B,sceneId:n,token:U,handleLogout:oe,viewer:c,setEnableControls:a,setDisableControls:r,selectedInfospotId:u,setSelectedHtmlInfospot:p,isTourViewTypeLegacy:m,cpLiveSize:h,user:d,isMessageChatShow:g,setMessageChatStatus:b,toggleHideTourViewerControls:v,isHideTourViewerControls:x,joinSettings:I,isLiveHostEnabled:k,handleEndCall:ae,hostIds:N,tourTitle:M,tourId:i,isWhiteBoardStarted:L,setWhiteBoardStatus:P})):null};return k?J||I.isHost?re():E.a.createElement(de,{isOpen:Y,tourId:t,isHostConnected:J,dataForToken:ie,handleHostConnected:function(e){e&&(s(!0),H(ji(e)))},handleClickClose:function(){H(function(e){return{type:"SET_IS_GO_BACK",isGoBack:e}}(!0)),s(!1),_()}}):re()})),Vi={newMessage:"",messages:[],rows:1,isFullsize:!1},Mi=function(e,t){switch(t.type){case"SET_MESSAGE_VALUE":return function(e,t){return x()({},e,{newMessage:t.value})}(e,t);case"SET_MESSAGES":return function(e,t){return x()({},e,{messages:[t.data].concat(Fe()(e.messages))})}(e,t);case"SET_ROWS":return function(e,t){return x()({},e,{rows:t.rows})}(e,t);case"SET_FULLSIZE":return function(e,t){return x()({},e,{isFullsize:t.bool})}(e,t);default:return e}},Ai=function(e){return{type:"SET_MESSAGES",data:e}},Li=function(e){return{type:"SET_MESSAGE_VALUE",value:e}},Pi=function(e){return{type:"SET_ROWS",rows:e}},zi=function(e){return{type:"SET_FULLSIZE",bool:e}},Ri=i(616),Di=i.n(Ri),Fi=i(1036),Hi=i.n(Fi);Di.a.updateLocale("en",{relativeTime:{s:"%d seconds",ss:"%d seconds",m:"%d minute",mm:"%d minutes",h:"hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}});var Bi=function(e){var t=Object(y.useState)(Di()(e.createdDate).fromNow()),i=W()(t,2),n=i[0],o=i[1];return Object(y.useEffect)((function(){var t=setInterval((function(){return o(Di()(e.createdDate).fromNow())}),1e3);return function(){clearInterval(t)}}),[n]),E.a.createElement(Ui,{isOwner:e.owner},E.a.createElement(Wi,{isOwner:e.owner},!e.owner&&E.a.createElement(Ji,null,e.userpicture&&e.userpicture.length>0?E.a.createElement(Gi,{src:e.userpicture}):E.a.createElement(_.a,{icon:Hi.a})),E.a.createElement(qi,{isOwner:e.owner},E.a.createElement("div",{className:"header"},!e.owner&&E.a.createElement("span",{className:"username"},"".concat(e.username)),E.a.createElement("span",{className:"date"},n)),E.a.createElement("p",null,e.msg))))},Ui=k.default.div.withConfig({displayName:"Message__Wrapper",componentId:"m0cjas-0"})(["display:block;&:not(:last-child){margin-top:24px;}"]),Wi=k.default.div.withConfig({displayName:"Message__Container",componentId:"m0cjas-1"})(["display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-end;",";"],(function(e){return!e.isOwner&&Object(k.css)(["justify-content:flex-start;"])})),Ji=k.default.div.withConfig({displayName:"Message__UserPictureContainer",componentId:"m0cjas-2"})(["height:26px;width:26px;border-radius:50%;font-size:26px;margin-right:10px;"]),Gi=k.default.img.withConfig({displayName:"Message__UserPicture",componentId:"m0cjas-3"})(["height:100%;border-radius:4em;cursor:pointer;"]),qi=k.default.div.withConfig({displayName:"Message__Content",componentId:"m0cjas-4"})(["display:flex;flex-direction:column;align-items:flex-start;",";p{padding:8px 12px;font-size:12px;line-height:14px;letter-spacing:0.01em;white-space:break-spaces;margin:5px 0 0 0;border-radius:4px;background:",";width:fit-content;}span{font-size:10px;line-height:12px;letter-spacing:0.01em;&.username{color:#fff;margin-right:9px;}&.date{color:#979797;}}"],(function(e){return e.isOwner&&Object(k.css)(["margin-left:auto;align-items:flex-end;"])}),(function(e){return e.isOwner?"#496174":"#1F242A"})),Ki=Object(y.memo)(Bi),Yi="https://".concat(Q.domain.production),Xi=function(e){var t=e.tourShortId,i=e.liveUsername,n=e.user,o=e.isShow,a=e.setMessageChatStatus,r=e.setCpLiveHasNewMsg,s=e.hasNewMessages,c=e.setSocket,l=Object(y.useRef)(),d=Object(y.useRef)(),u=Object(y.useRef)(),p=Object(y.useReducer)(Mi,Vi),m=W()(p,2),h=m[0],f=m[1],g=h.isFullsize,b=Q.mobileNavigator?g?h.rows:1:h.rows,w=function(){a(!1),l.current.disconnect()},v=function(){d&&d.current&&(d.current.scrollTop=d.current.scrollHeight)};Object(y.useEffect)((function(){if(i){l.current=io(Yi,{query:{roomId:t,username:i,userpicture:n.picture||""},transports:["websocket","polling"]}).connect();var e=l.current;return e.on("connect",(function(){window.addEventListener("beforeunload",w),e.on("new_message",(function(e){f(Ai(e)),o||r(!0)}))})),c(l.current),function(){w(),window.removeEventListener("beforeunload",w)}}}),[i,n.name]),Object(y.useEffect)((function(){v()}),[h.messages]),Object(y.useEffect)((function(){s&&o&&r(!1),v()}),[s,o]),Object(y.useEffect)((function(){var e=document.getElementById("drift-widget");if(e)return e.classList.add("drift-widget--hide-controls"),function(){e.classList.remove("drift-widget--hide-controls")}}),[]);var C=function(e){var t=(new Date).toISOString();l.current.emit("new_message",{msg:e,createdDate:t}),f(Li("")),f(Pi(1));var o={username:i,userpicture:n.picture||"",msg:e,createdDate:t,sid:l.current.id};f(Ai(o))};return E.a.createElement(Zi,{isShow:o,isFullsize:g},E.a.createElement($i,null,E.a.createElement("span",null,"Chat"),E.a.createElement("button",{onClick:function(){f(zi(!1)),a()}},E.a.createElement("img",{src:"/public/close-chat-icon.png",alt:"icon"}))),E.a.createElement(Qi,{ref:d},h.messages.map((function(e){var t="".concat(null==e?void 0:e.sid,"-").concat(null==e?void 0:e.createdDate);return E.a.createElement(Ki,x()({key:t,owner:l.current.id===e.sid},e))}))),E.a.createElement(tn,{rows:h.rows,isFullsize:g,isMobile:Q.mobileNavigator},E.a.createElement("div",{className:"message-input__container"},E.a.createElement(en,{placeholder:"Type your message...",value:h.newMessage,onChange:function(e){var t=e.currentTarget.value;!function(e){var t=e.target.rows;e.target.rows=1;var i=~~(e.target.scrollHeight/16.8);i===t&&(e.target.rows=i),i>=5&&(e.target.rows=5,e.target.scrollTop=e.target.scrollHeight),f(Pi(i<5?i:5))}(e),f(Li(t))},onKeyDown:function(e){if(!Q.mobileNavigator){var t=h.newMessage.trim();13===e.keyCode&&!1===e.shiftKey&&t&&(e.preventDefault(),e.stopPropagation(),C(t))}},rows:b,onFocus:function(){window.innerWidth<=Q.SBP.lg-.02&&(f(zi(!0)),v())},onBlur:function(){window.innerWidth<=Q.SBP.lg-.02&&v()},isMobile:Q.mobileNavigator,ref:u}),Q.mobileNavigator&&E.a.createElement("button",{className:"send-msg",onClick:function(){var e=h.newMessage.trim();e&&C(e),u.current.focus()}},E.a.createElement("img",{src:"/public/send-msg-chat-icon.png",alt:"icon"})))))},Zi=k.default.div.withConfig({displayName:"MessageChat__Wrapper",componentId:"sc-14oy28n-0"})(["width:",";background-color:#2A3038;margin:0 auto;display:flex;flex-direction:column;position:fixed;right:",";top:0;bottom:0;z-index:6;color:#fff;@media screen and (","){width:100%;top:auto;height:",";right:",";",";}"],P.b,(function(e){return e.isShow?0:"-".concat(P.b)}),Q.media.down.lg,P.c,(function(e){return e.isShow?0:"-100%"}),(function(e){var t=e.isFullsize,i=e.isShow;return t&&i&&Object(k.css)(["top:0;left:0;right:0;bottom:0;height:auto;"])})),$i=k.default.div.withConfig({displayName:"MessageChat__Header",componentId:"sc-14oy28n-1"})(["width:90%;margin:0 auto;border-bottom:1px solid #000;padding:15px 0;text-align:center;position:relative;height:50px;max-height:50px;button{position:absolute;right:5px;top:50%;transform:translateY(-50%);width:20px;height:20px;padding:0;border:none;cursor:pointer;background-color:transparent;}@media screen and (","){width:95%;}"],Q.media.down.lg),Qi=k.default.div.withConfig({displayName:"MessageChat__Content",componentId:"sc-14oy28n-2"})(["display:flex;flex-direction:column-reverse;padding:15px;width:100%;overflow-y:auto;flex-grow:1;"]),en=k.default.textarea.withConfig({displayName:"MessageChat__MessageInput",componentId:"sc-14oy28n-3"})(["margin-top:auto;background:#FFFFFF;border:2px solid #E2EAEB;resize:none;border-radius:4px;font-size:14px;padding:6px 0 6px 14px;min-height:36px;height:auto;line-height:",";width:100%;margin:0;display:block;",";&::placeholder{color:#979797;}"],"".concat(16.8,"px"),(function(e){return e.isMobile&&Object(k.css)(["padding-right:40px;"])})),tn=k.default.div.withConfig({displayName:"MessageChat__MessageInputWrapper",componentId:"sc-14oy28n-4"})(["position:relative;display:flex;flex-grow:1;padding:15px;align-items:flex-end;"," "," .message-input__container{position:relative;display:block;width:100%;}.send-msg{position:absolute;padding:7px 6px 7px 0;border:0;right:0;top:0;bottom:0;width:30px;cursor:pointer;background-color:transparent;margin:0;img{width:24px;height:22px;}}"],(function(e){return!e.isFullsize&&Object(k.css)(["min-height:66px;max-height:66px;"])}),(function(e){var t=e.isFullsize,i=e.rows,n=e.isMobile;return(t||!n)&&Object(k.css)(["height:100%;max-height:",";"],"".concat(16.8*i+42,"px"))})),nn=Object(I.connect)((function(e){return{liveUsername:e.tourViewer.liveUsername,user:e.app.user,hasNewMessages:e.tourViewer.hasNewMessages}}),(function(e){return{setCpLiveHasNewMsg:function(t){return e(function(e){return{type:Be.m,status:e}}(t))}}}))(Object(y.memo)(Xi)),on=i(25),an=i(870),rn=i.n(an),sn=i(1068),cn=i(73),ln=i(669),dn=i.n(ln),un=i(644),pn=i.n(un),mn=i(648),hn=i.n(mn),fn=i(649),gn=i.n(fn),bn=k.default.div.withConfig({displayName:"UI__LogoDescriptionContainer",componentId:"sc-1clwifi-0"})(["position:absolute;",";z-index:1;"],(function(e){return e.isCascade?Object(k.css)(["right:4em;top:2em;"]):Object(k.css)(["left:15px;top:15px;"])})),wn=k.default.img.withConfig({displayName:"UI__Logo",componentId:"sc-1clwifi-1"})(["max-width:10em;max-height:8em;@media screen and (max-width:60em){max-width:4em;max-height:3em;}"]),vn=(k.default.div.withConfig({displayName:"UI__BrandingIcon",componentId:"sc-1clwifi-2"})(["background:url('./assets/img/logo.png') no-repeat center;margin-top:1em;background-color:rgba(88,88,90,0.7);background-size:1.5em;padding:1.25em;border-radius:0.4em;cursor:pointer;&:hover{background:url('./assets/img/logo-i.png') no-repeat center;background-color:rgba(88,88,90,0.7);background-size:2em;}"]),k.default.div.withConfig({displayName:"UI__Description",componentId:"sc-1clwifi-3"})(["color:white;text-shadow:1px 1px 2px #333;"])),xn=k.default.div.withConfig({displayName:"UI__NameProperty",componentId:"sc-1clwifi-4"})(["font-size:18px;margin:5px 0px;"]),Cn=k.default.div.withConfig({displayName:"UI__SecondaryProperty",componentId:"sc-1clwifi-5"})(["font-size:13px;margin:5px 0px;cursor:pointer;width:fit-content;"]),Sn=k.default.div.withConfig({displayName:"UI__Reel",componentId:"sc-1clwifi-6"})(["z-index:2;width:",";position:absolute;bottom:",";left:0em;display:flex;font-weight:100;",";@media screen and (","){width:100%;bottom:",";}"],(function(e){return e.isChat?"calc(100% - ".concat(P.b,")"):"100%"}),(function(e){return e.isVideoChatStarted?P.a:0}),(function(e){return e.hasCollection?Object(k.css)(["flex-direction:column-reverse;background-color:transparent;"]):Object(k.css)(["background:",";backdrop-filter:blur(7px);"],(function(e){return e.visible?"rgba(0, 0, 0, 0.3)":"rgba(0, 0, 0, 0)"}))}),Q.media.down.lg,(function(e){var t=e.isChat,i=e.isVideoChatStarted;return i&&!t?P.a:i&&t?P.c:0})),yn=function(e){return E.a.createElement(_n,{reelvisible:e.reelvisible?1:0,onClick:e.onClick,icon:e.reelvisible?pn.a:dn.a})},En=Object(k.default)(_.a).withConfig({displayName:"UI__ImageCycleIcon",componentId:"sc-1clwifi-7"})(["position:absolute;z-index:2;width:2em;text-shadow:1px 1px 2px #333;color:white;font-size:2em;",";",";",";@media screen and (","){",";bottom:",";}@media screen and (max-height:40em){bottom:",";}"],(function(e){return e.left?"left: 2em;":e.isChat?"right: calc(2em + ".concat(P.b,")"):"right: 2em;"}),(function(e){return e.hasCollection?Object(k.css)(["bottom:",";"],(function(e){return e.isVideoChatStarted&&e.reelvisible?"calc(".concat(P.a," + 6.5em)"):!e.isVideoChatStarted&&e.reelvisible?"6.5em":e.isVideoChatStarted&&!e.reelvisible?P.a:0})):Object(k.css)(["bottom:",";"],(function(e){return e.isVideoChatStarted&&e.reelvisible?"calc(".concat(P.a," + 3.7em)"):!e.isVideoChatStarted&&e.reelvisible?"3.7em":e.isVideoChatStarted&&!e.reelvisible?P.a:0}))}),(function(e){return e.disabled?Object(k.css)(["cursor:default;opacity:",";"],st.disabledOpacity):Object(k.css)(["cursor:pointer;"])}),Q.media.down.lg,(function(e){return e.left?"left: 2em;":"right: 2em;"}),(function(e){return e.reelvisible&&e.isChat&&e.isVideoChatStarted?"calc(".concat(e.hasCollection?"6.2em":"3.7em"," + ").concat(P.c,")"):!e.reelvisible&&e.isChat&&e.isVideoChatStarted?P.c:e.reelvisible||e.isChat||!e.isVideoChatStarted?e.reelvisible&&!e.isChat&&e.isVideoChatStarted?"calc(".concat(P.a," + 6.2em)"):e.reelvisible||e.isChat||e.isVideoChatStarted?e.hasCollection?"6.2em":"3.7em":0:P.a}),(function(e){return e.reelvisible&&e.isChat&&e.isVideoChatStarted?"calc(".concat(e.hasCollection?"6.2em":"4em"," + ").concat(P.c,")"):!e.reelvisible&&e.isChat&&e.isVideoChatStarted?P.c:e.reelvisible||e.isChat||!e.isVideoChatStarted?e.reelvisible&&!e.isChat&&e.isVideoChatStarted?"calc(".concat(P.a," + 4em)"):e.reelvisible||e.isChat||e.isVideoChatStarted?e.hasCollection?"6.2em":"4em":0:P.a})),In=function(e){return E.a.createElement(En,{reelvisible:e.reelvisible,onClick:e.disabled?function(){return null}:e.onClick,icon:gn.a,right:"true",disabled:e.disabled,isChat:e.isChat,isVideoChatStarted:e.isVideoChatStarted,hasCollection:e.hasCollection})},kn=function(e){return E.a.createElement(En,{reelvisible:e.reelvisible,onClick:e.disabled?function(){return null}:e.onClick,icon:hn.a,left:"true",isChat:e.isChat,isVideoChatStarted:e.isVideoChatStarted,hasCollection:e.hasCollection})},_n=Object(k.default)(_.a).withConfig({displayName:"UI__Icon",componentId:"sc-1clwifi-8"})(["position:absolute;top:-1em;z-index:3;width:2em;text-shadow:1px 1px 2px #333;color:white;font-size:2em;margin-left:50%;cursor:pointer;",";"],(function(e){return e.reelvisible?"\n  ":"\n  position: absolute;\n  bottom: 0;\n  margin-bottom: -0.6em;\n  "})),On=(k.default.div.withConfig({displayName:"UI__TitleContainer",componentId:"sc-1clwifi-9"})(["width:10em;text-align:center;color:white;margin-bottom:0.6em;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;"]),k.default.div.withConfig({displayName:"UI__ImgContainer",componentId:"sc-1clwifi-10"})(["display:flex;flex-direction:column;align-items:center;flex-shrink:0;",";transition:all 0.3s;",""],(function(e){return e.hasCollection?Object(k.css)(["width:4.25em;max-width:4.25em;height:3.2em;max-height:3.2em;border-radius:4px;.scene-title{display:none;}&:not(:last-child){margin-right:.375em;}",";"],(function(e){return e.isActive&&Object(k.css)(["border:3px solid #59C1C9;width:4.625em;max-width:4.625em;height:3.575em;max-height:3.575em;"])})):Object(k.css)(["align-items:flex-start;padding:0.2em;height:5.5em;width:9.3em;max-height:5.5em;max-width:9.3em;background:rgba(0,0,0,0.7);border-radius:5px;.scene-title{font-weight:bold;font-size:12px;color:#979797;white-space:nowrap;text-overflow:ellipsis;margin-top:auto;overflow:hidden;width:100%;}",";&:not(:last-child){margin-right:.75em;}"],(function(e){return e.isActive&&Object(k.css)(["border:3px solid #59C1C9;width:9.675em;max-width:9.675em;height:5.875em;max-height:5.875em;.scene-title{color:#fff;}"])}))}),(function(e){return e.isDisabled?Object(k.css)(["opacity:",";pointer-events:none;"],st.disabledOpacity):null}))),jn=k.default.img.withConfig({displayName:"UI__Image",componentId:"sc-1clwifi-11"})(["height:100%;width:100%;transition:all 0.3s;object-fit:cover;cursor:pointer;position:absolute;top:0;left:0;&:hover{transform:scale(1.1);transition:all 0.3s;}",""],(function(e){return e.disabled?Object(k.css)(["cursor:not-allowed;pointer-events:none;"]):null})),Tn=k.default.div.withConfig({displayName:"UI__PreviewImage",componentId:"sc-1clwifi-12"})(["position:relative;overflow:hidden;height:",";width:100%;border-radius:4px;"],(function(e){return e.hasCollection?"4em":"100%"})),Nn=k.default.div.withConfig({displayName:"UI__EmptyImagePlaceholder",componentId:"sc-1clwifi-13"})(["position:absolute;left:0;top:0;display:flex;align-items:center;justify-content:center;background-color:white;width:100%;height:100%;border-radius:4px;"]),Vn=Object(k.default)(_.a).withConfig({displayName:"UI__ImageIcon",componentId:"sc-1clwifi-14"})(["color:grey;font-size:35px;"]),Mn=(k.default.button.withConfig({displayName:"UI__InfoButton",componentId:"sc-1clwifi-15"})(["background-color:rgba(88,88,90,0.7);"]),k.default.div.withConfig({displayName:"UI__IconWrapper",componentId:"sc-1clwifi-16"})(["margin-top:1em;background-color:rgba(88,88,90,0.7);font-size:1em;text-align:center;padding:0.6em;padding-right:0.8em;padding-left:0.8em;border-radius:0.4em;cursor:pointer;color:white;&:hover{color:#008b8b;}"]),k.default.div.withConfig({displayName:"UI__Collections",componentId:"sc-1clwifi-17"})(["height:7.4em;max-height:7.4em;display:",";align-items:center;overflow-y:hidden;overflow-x:scroll;z-index:1;transition:all 0.3s;background:rgba(0,0,0,0.3);backdrop-filter:blur(7px);padding:.15em .55em 0 .55em;font-size:16px;::-webkit-scrollbar-thumb{box-shadow:inset 0 0 16px white;-webkit-box-shadow:inset 0 0 16px white;background-color:rgba(42,48,56,0.7);}"],(function(e){return e.visible?"flex":"none"}))),An=k.default.div.withConfig({displayName:"UI__CollectionItem",componentId:"sc-1clwifi-18"})(["display:flex;flex-direction:column;align-items:flex-start;padding:0.2em;height:5.5em;width:9.3em;max-height:5.5em;max-width:9.3em;background:rgba(0,0,0,0.7);border-radius:5px;flex-shrink:0;transition:all 0.3s;&:not(:last-child){margin-right:.75em;}.tour-title{font-weight:bold;font-size:12px;color:#979797;white-space:nowrap;text-overflow:ellipsis;margin-top:auto;overflow:hidden;width:100%;}",";",""],(function(e){return e.isActive&&Object(k.css)(["border:3px solid #59C1C9;width:9.675em;height:5.875em;max-width:9.675em;max-height:5.875em;.tour-title{color:#fff;}"])}),(function(e){return e.isDisabled?Object(k.css)(["opacity:",";pointer-events:none;"],st.disabledOpacity):null})),Ln=k.default.div.withConfig({displayName:"UI__CollectionPreviewImage",componentId:"sc-1clwifi-19"})(["position:relative;height:4em;width:100%;overflow:hidden;border-radius:4px;"]),Pn=k.default.img.withConfig({displayName:"UI__CollectionImage",componentId:"sc-1clwifi-20"})(["height:100%;width:100%;max-width:100%;transition:all 0.3s;object-fit:cover;cursor:pointer;position:absolute;top:0;left:0;&:hover{transform:scale(1.1);transition:all 0.3s;}",""],(function(e){return e.disabled?Object(k.css)(["cursor:not-allowed;pointer-events:none;"]):null})),zn=k.default.div.withConfig({displayName:"UI__Previews",componentId:"sc-1clwifi-21"})(["display:flex;align-items:center;overflow-x:scroll;overflow-y:hidden;padding:.35em .55em 0 .55em;z-index:1;transition:all 0.3s;",";::-webkit-scrollbar-thumb{box-shadow:inset 0 0 16px white;-webkit-box-shadow:inset 0 0 16px white;background-color:rgba(42,48,56,0.7);}",";"],(function(e){return e.visible?"margin-bottom: 0;":"margin-bottom: -10em; display:none;"}),(function(e){return e.hasCollection?Object(k.css)(["background:rgba(0,0,0,0.6);backdrop-filter:blur(7px);height:5.1em;max-height:5.1em;",""],(function(e){return e.hasImages&&Object(k.css)(["&:hover{height:7.4em;max-height:7.4em;background:rgba(0,0,0,0.3);","{height:5.5em;max-height:5.5em;max-width:9.3em;width:9.3em;transition:all 0.3s;padding:0.2em;background:rgba(0,0,0,0.7);.scene-title{white-space:nowrap;text-overflow:ellipsis;margin-top:auto;overflow:hidden;width:100%;display:inline-block;color:#979797;font-weight:bold;font-size:12px;}&#active-scene .scene-title{color:#fff;}}}&:hover + ","{height:5.1em;max-height:5.1em;transition:all 0.3s;background:rgba(0,0,0,0.6);","{width:4.25em;max-width:4.25em;height:3.2em;max-height:3.2em;transition:all 0.3s;padding:0;.tour-title{display:none;}&#active-collection{width:4.625em;max-width:4.625em;height:3.575em;max-height:3.575em;}}}"],On,Mn,An)})):Object(k.css)(["height:7.4em;max-height:7.4em;"])})),Rn=k.default.div.withConfig({displayName:"UI__GsvIcon",componentId:"sc-1clwifi-22"})(["position:absolute;background:rgba(73,9,175,0.61);backdrop-filter:blur(4px);border-radius:3px;padding:2px 3px;z-index:1;color:#fff;top:5px;left:5px;display:flex;align-items:center;img{width:8px;height:13px;margin-right:2px;}span{font-size:9px;letter-spacing:0.05em;text-transform:uppercase;}"]),Dn=k.default.div.withConfig({displayName:"UI__GsvNotPublish",componentId:"sc-1clwifi-23"})(["position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);background:#FFFFFF;box-shadow:0px 10px 20px rgba(0,0,0,0.08);border-radius:10px;border-radius:1em;padding:2rem 3rem;max-width:504px;p{font-weight:600;font-size:28px;line-height:34px;text-align:center;color:#496174;}.btn{max-width:fit-content;margin:0 auto;display:block;}@media screen and (","){padding:1rem;top:25%;transform:translate(-50%,-25%);p{font-size:16px;line-height:18px;}}"],Q.media.down.md),Fn=i(1048),Hn=i.n(Fn),Bn=i(1055),Un=i.n(Bn),Wn=(i(1028),i(1029)),Jn=i.n(Wn),Gn=i(689),qn=i.n(Gn),Kn=i(1030),Yn=i.n(Kn),Xn=i(1031),Zn=i.n(Xn),$n=i(1032),Qn=i.n($n),eo=i(653),to=i(1033),no=i.n(to),oo=i(1034),ao=i.n(oo),ro=k.default.div.withConfig({displayName:"ViewerAmbienceControl__Wrapper",componentId:"sc-1jdsu0j-0"})(["z-index:1;position:relative;display:flex;flex-direction:column;"]),so=k.default.div.withConfig({displayName:"ViewerAmbienceControl__IconWrapper",componentId:"sc-1jdsu0j-1"})(["display:flex;justify-content:center;align-items:center;color:white;width:40px !important;height:40px;font-size:1rem;margin-bottom:.3em;background:rgba(20,20,20,0.5);border-radius:.5em;"," "," &:hover{background:rgba(0,0,0,0.6);}"],(function(e){return e.title===e.commonStr.editTour&&"padding-left: .25em;"}),(function(e){return e.isDisabled?Object(k.css)(["opacity:",";cursor:default;pointer-events:none;"],st.disabledOpacity):Object(k.css)(["cursor:pointer;"])})),co=Object(I.connect)((function(e){return{viewerStr:e.app.localization.viewerStr,commonStr:e.app.localization.commonStr}}),null)((function(e){var t=e.ambience,i=e.setAmbiencePlaying,n=e.isDisabled,o=void 0!==n&&n,a=e.viewerStr,r=e.commonStr,s=t.playing?ao.a:no.a;return E.a.createElement(ro,null,E.a.createElement(eo.a,{title:a.toggleAmbientSound,position:"left",isDisabled:o},E.a.createElement(so,{onClick:i,title:a.toggleAmbientSound,isDisabled:o,commonStr:r},E.a.createElement(_.a,{icon:s}))))})),lo=function(e){var t=e.items,i=e.isDisabled,n=e.isHideTourViewerControls,o=e.commonStr,a=t.map((function(e){return!e.hide&&E.a.createElement(go,{key:e.title,href:i?"#":e.link},E.a.createElement(eo.a,{title:e.title,position:"left",isDisabled:i},E.a.createElement(mo,{onClick:e.onClick,title:e.title,iconColor:e.iconColor,isDisabled:i,commonStr:o},e.image||E.a.createElement(_.a,{icon:e.icon}))))}));return!n&&a},uo=function(e){var t=e.isHideTourViewerControls,i=e.toggleHideTourViewerControls,n=e.commonStr,o=t?"Show controls":"Hide controls";return E.a.createElement(eo.a,{title:o,position:"left"},E.a.createElement(mo,{onClick:i,title:o,commonStr:n},t?E.a.createElement(_.a,{icon:Zn.a}):E.a.createElement(_.a,{icon:Qn.a})))},po=k.default.div.withConfig({displayName:"Sidebar__Wrapper",componentId:"sc-1qyuuh2-0"})(["position:absolute;z-index:3;right:",";display:flex;top:50%;flex-direction:column;align-items:flex-end;transform:translateY(-50%);@media screen and (","){right:1em;}",""],(function(e){return e.isMessageChatShow?"calc(1em + ".concat(P.b,")"):"1em"}),Q.media.down.lg,(function(e){var t=e.isVideoChatStarted,i=e.isMessageChatShow,n=e.isReelVisible,o=e.isClassicTheme,a=e.isFlowTheme,r=e.isCascadeTheme;return t?Object(k.css)(["top:47%;@media screen and (max-height:768px){flex-direction:row;top:unset;bottom:30%;"," "," "," "," "," "," "," "," ","}@media screen and (max-height:640px){bottom:",";}"],i&&n&&Object(k.css)(["bottom:calc(30% + 180px);"]),i&&!n&&Object(k.css)(["   bottom:calc(30% + 45px);"]),!i&&!n&&Object(k.css)(["   bottom:10%;"]),!i&&n&&Object(k.css)(["   bottom:30%;"]),i&&n&&(o||a)&&Object(k.css)(["bottom:calc(30% + 180px + 20px);"]),i&&!n&&(o||a)&&Object(k.css)(["   bottom:calc(30% + 45px + 20px);"]),!i&&!n&&(o||a)&&Object(k.css)(["   bottom:calc(10% + 20px);"]),!i&&n&&(o||a)&&Object(k.css)(["   bottom:calc(30% + 20px);"]),r&&Object(k.css)(["   bottom:25%;flex-direction:column;"]),(function(e){return e.hasCollection?"235px":"185px"})):Object(k.css)(["@media screen and (max-height:640px){top:2em;transform:unset;}"])})),mo=k.default.div.withConfig({displayName:"Sidebar__IconWrapper",componentId:"sc-1qyuuh2-1"})(["display:flex;justify-content:center;align-items:center;color:",";width:40px !important;height:40px;font-size:1rem;margin-bottom:.3em;background:",";border-radius:.5em;"," "," &:hover{background:rgba(0,0,0,0.6);}",";"],(function(e){return e.iconColor||"white"}),(function(e){return e.isActive?"#fff":"rgba(20, 20, 20, 0.5)"}),(function(e){return e.title===e.commonStr.editTour&&"padding-left: .25em;"}),(function(e){return e.isDisabled?Object(k.css)(["opacity:",";cursor:default;pointer-events:none;"],st.disabledOpacity):Object(k.css)(["cursor:pointer;"])}),(function(e){return e.hasNotification&&Object(k.css)(["position:relative;&::after{position:absolute;right:4px;bottom:4px;content:'';display:block;width:7px;height:7px;border-radius:50%;background-color:#FF8B7B;}"])})),ho=(k.default.img.withConfig({displayName:"Sidebar__DashboardIcon",componentId:"sc-1qyuuh2-2"})(["width:1.2em;height:.9em;"]),k.default.img.withConfig({displayName:"Sidebar__CardboardIcon",componentId:"sc-1qyuuh2-3"})(["width:1.4em;"])),fo=k.default.img.withConfig({displayName:"Sidebar__TooogleMotionIcon",componentId:"sc-1qyuuh2-4"})(["width:1.4em;width:20px;height:20px;animation-name:nudge;animation-duration:.4s;animation-timing-function:linear;animation-delay:2s;animation-iteration-count:1;@keyframes nudge{0%{transform:rotate(-7deg);}33%{transform:rotate(7deg);}66%{transform:rotate(-7deg);}}"]),go=(k.default.img.withConfig({displayName:"Sidebar__LogoIcon",componentId:"sc-1qyuuh2-5"})(["width:1.5em;height:1.5em;"]),k.default.a.withConfig({displayName:"Sidebar__CustomLink",componentId:"sc-1qyuuh2-6"})([""])),bo=(Object(k.default)(_.a).withConfig({displayName:"Sidebar__LoadingSpinner",componentId:"sc-1qyuuh2-7"})(["position:absolute;left:50%;top:40%;font-size:4em;color:",";"],st.actionColor),Object(I.connect)((function(e){return{commonStr:e.app.localization.commonStr,viewerStr:e.app.localization.viewerStr,hasNewMessages:e.tourViewer.hasNewMessages}}),null)((function(e){var t=e.vr,i=e.tour,n=e.openModal,o=e.toggleFullScreen,a=e.toggleMotionConrol,r=e.toggleVR,s=e.runCpl,c=e.toggleHideTourViewerControls,l=e.mlsCompliant,d=e.isVideoChatStarted,u=e.isDisabled,p=void 0!==u&&u,m=e.isHideTourViewerControls,h=e.sound,f=e.setAmbiencePlaying,g=e.commonStr,b=e.viewerStr,w=e.isMessageChatShow,v=e.isReelVisible,x=e.theme,C=e.hasCollection,S=x===ue.F.CLASSIC,I=x===ue.F.CASCADE,k=x===ue.F.FLOW,_=h&&h.ambience&&h.ambience.audio,O=V()(i,"config.isHideShareButton",!1),j=[{title:g.share,icon:Jn.a,onClick:function(){return n("share")},hide:O||t||l},{title:b.fullscreen,icon:qn.a,onClick:function(){return o()},hide:t},{title:g.toggleMotionControl,image:E.a.createElement(fo,{src:"./assets/img/refresh_5.svg"}),onClick:function(){return a()},hide:t||!Q.mobileNavigator||d||i.isGSV},{title:b.virtualReality,image:E.a.createElement(ho,{src:"./assets/img/cardboard.png"}),onClick:function(){return r()},vrActive:t,hide:d||i.isGSV},{title:b.videoChat,icon:Yn.a,onClick:function(){return s()},hide:t||d||!i||!i.isVideoChatEnabled}];return Object(y.useEffect)((function(){_&&d&&f(!1,h.ambience.audio)}),[d,_]),E.a.createElement(po,{isVideoChatStarted:d,isMessageChatShow:w,isReelVisible:v,isClassicTheme:S,isCascadeTheme:I,isFlowTheme:k,hasCollection:C},!d&&E.a.createElement(uo,{isHideTourViewerControls:m,toggleHideTourViewerControls:c,commonStr:g}),h.ambience.audio&&!m?E.a.createElement("div",null,E.a.createElement(co,{ambience:h.ambience,isDisabled:p,setAmbiencePlaying:function(){p||f(!h.ambience.playing,h.ambience.audio)}})):null,E.a.createElement(lo,{items:j,isDisabled:p,isHideTourViewerControls:m,commonStr:g}))}))),wo=i(736),vo=Object(k.default)(wo.a).withConfig({displayName:"Room__Wrapper",componentId:"pxxumo-0"})(["color:white;width:","px;overflow:hidden;position:relative;background:",";cursor:pointer;margin:12px ","px;border-radius:8px;flex-shrink:0;&:first-child{margin-left:30px;}@media screen and (max-width:","){width:160px;}@media screen and (max-width:","){width:140px;}"],200,st.borderColor,5,Q.mobileWidth,Q.xsMobileWidth),xo=Object(k.default)(vo).withConfig({displayName:"Room__ActiveWrapper",componentId:"pxxumo-1"})(["margin:0 ","px;border-radius:15px;border:7px solid #008b8b;"],5),Co=Object(k.default)(wo.a).withConfig({displayName:"Room__CascadeWrapper",componentId:"pxxumo-2"})(["color:white;overflow:hidden;position:relative;background:",";cursor:pointer;border-radius:8px;width:calc(100% - 30px);height:100px;margin:12px 15px;@media screen and (max-width:","){width:calc(100% - 10px);margin:12px 5px;}@media screen and (","){height:70px;}"],st.borderColor,Q.mobileWidth,Q.media.down.md),So=Object(k.default)(Co).withConfig({displayName:"Room__CascadeActiveWrapper",componentId:"pxxumo-3"})(["border-radius:15px;border:7px solid #008B8B;height:150px;width:calc(100% - 20px);margin:5px 10px;@media screen and (max-width:","){width:100%;margin:12px 0;}@media screen and (","){height:100px;}"],Q.mobileWidth,Q.media.down.md),yo=k.default.img.withConfig({displayName:"Room__DefaultRoomImage",componentId:"pxxumo-4"})(["position:absolute;top:0;left:0;height:100%;width:100%;object-fit:cover;transition:all 0.3s;&:hover{transform:scale(1.1);transition:all 0.3s;}"]),Eo=Object(k.default)(yo).withConfig({displayName:"Room__CascadeRoomImage",componentId:"pxxumo-5"})(["object-fit:cover;&:hover{transform:scale(1.1);transition:all 0.3s;left:-5%;}"]),Io=k.default.div.withConfig({displayName:"Room__RoomTitle",componentId:"pxxumo-6"})(["position:absolute;top:4px;left:4px;width:auto;background:rgba(0,0,0,0.6);padding:4px 10px;border-radius:12px;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:",";"],(function(e){return e.active?"178px":"192px"})),ko=function(e){var t=e.theme,i=e.selectedImage,n=e.image,o=e.index,a=(e.prevIndex,e.clickScene),r=e.changingSeen,s=i&&n.url===i.url,c=s?xo:vo,l=yo;switch(t){case"cascade":l=Eo,c=s?So:Co}return E.a.createElement(c,{delay:0,active:s,index:r?-1:Math.abs(o-i.index)},E.a.createElement(Nn,null,E.a.createElement(Vn,{icon:j.a})),E.a.createElement(l,{src:n.thumbUrl||n.url,onClick:function(){return a(n,i.index)},alt:""}),E.a.createElement(Io,{active:s},n.title))},_o=k.default.div.withConfig({displayName:"Content__Wrapper",componentId:"sc-1f91ule-0"})(["height:100%;overflow-x:scroll;overflow-y:hidden;display:flex;margin:",';::-webkit-scrollbar-thumb{-webkit-border-radius:20px;border-radius:20px;background:transparent;box-shadow:inset 0 0 13px white;-webkit-box-shadow:inset 0 0 13px white;}::-webkit-scrollbar{height:12px;}-webkit-mask-image:linear-gradient(to right,transparent 2px,black 50px,black calc(100% - 50px),transparent calc(100% - 2px));mask-image:linear-gradient(to right,transparent 2px,black 50px,black calc(100% - 50px),transparent calc(100% - 2px));&:after{content:"012";display:block;height:1px;opacity:0;}'],(function(e){return"flow"===e.theme?"0 -20px":"0 -100px"})),Oo=k.default.div.withConfig({displayName:"Content__CascadeWrapper",componentId:"sc-1f91ule-1"})(["height:100%;width:100%;overflow-x:hidden;overflow-y:scroll;margin:0;padding:0 0 0 2px;::-webkit-scrollbar-thumb{-webkit-border-radius:20px;border-radius:20px;background:transparent;box-shadow:inset 0 0 13px white;-webkit-box-shadow:inset 0 0 13px white;}::-webkit-scrollbar{height:12px;}-webkit-mask-image:linear-gradient(to top,transparent 2px,black 50px,black calc(100% - 50px),transparent calc(100% - 2px) );mask-image:linear-gradient(to top,transparent 2px,black 50px,black calc(100% - 50px),transparent calc(100% - 2px) );&:before{content:'123';display:block;height:20px;opacity:0;}&:after{content:'123';display:block;height:0px;opacity:0;}"]),jo=function(e){var t=e.tour,i=e.selectedImage,n=e.index,o=e.reelVisible,a=t&&"cascade"===t.theme?Oo:_o;return E.a.createElement(a,{id:"reel-content",show:o,theme:t?t.theme:"classic"},Array.isArray(t?t.images:null)&&t.images.filter((function(e){return void 0===e.hideFromRibbon||!e.hideFromRibbon})).map((function(o,a){return E.a.createElement(ko,x()({},e,{index:a,image:o,selectedImage:x()({},i,{index:n}),theme:t?t.theme:"classic"}))})))},To=k.default.div.withConfig({displayName:"Toggle__Wrapper",componentId:"sc-1cxpq0z-0"})(["width:80px;height:fit-content;border-radius:13px;text-align:center;display:flex;align-items:center;justify-content:center;z-index:100;background:rgba(0,0,0,.75);cursor:pointer;",";&:hover{background:rgba(0,0,0,.85);}"],(function(e){return e.reelvisible?"margin-bottom: 0;\n      transition: all  500ms;":"margin-bottom: -15px;\n      transition: all 300ms;"})),No=k.default.div.withConfig({displayName:"Toggle__CascadeWrapper",componentId:"sc-1cxpq0z-1"})(["width:20px;height:80px;border-radius:13px;text-align:center;display:flex;align-items:center;justify-content:center;z-index:1000;background:rgba(0,0,0,.6);cursor:pointer;&:hover{background:rgba(0,0,0,.8);}"]),Vo=Object(k.default)(_.a).withConfig({displayName:"Toggle__Arrow",componentId:"sc-1cxpq0z-2"})(["color:white;font-size:20px;"]),Mo=function(e){var t=e.toggleReel,i=e.reelvisible,n=e.isCascade,o=To,a=i?pn.a:dn.a;return n&&(o=No,a=i?hn.a:gn.a),E.a.createElement(o,{onClick:t,reelvisible:i},E.a.createElement(Vo,{icon:a}))},Ao=k.default.div.withConfig({displayName:"Arrow__Wrapper",componentId:"sc-1st9qyn-0"})(["display:flex;text-align:center;margin-bottom:18px;align-items:center;justify-content:center;z-index:",";margin:0 15px 18px;cursor:pointer;transition:all  500ms;",""],(function(e){return e.show?100:-1}),(function(e){return!e.show&&"opacity: 0;"})),Lo=Object(k.default)(Ao).withConfig({displayName:"Arrow__ModernWrapper",componentId:"sc-1st9qyn-1"})(["background:rgba(0,0,0,.6);width:60px;border-radius:13px;margin:0;&:hover{background:rgba(0,0,0,.8);}"]),Po=Object(k.default)(Ao).withConfig({displayName:"Arrow__FlowWrapper",componentId:"sc-1st9qyn-2"})(["@media screen and (max-width:","){padding:5px;margin:0 10px 18px;}"],Q.mobileWidth),zo=Object(k.default)(Ao).withConfig({displayName:"Arrow__CascadeWrapper",componentId:"sc-1st9qyn-3"})(["margin:0;"]),Ro=Object(k.default)(_.a).withConfig({displayName:"Arrow__Icon",componentId:"sc-1st9qyn-4"})(["color:white;font-size:",";text-shadow:3px 3px black;@media screen and (max-width:","){font-size:",";}@media screen and (max-width:","){font-size:",";}"],(function(e){return e.size||"40px"}),Q.mobileWidth,(function(e){return e.size||"28px"}),Q.xsMobileWidth,(function(e){var t=e.size,i=e.theme;return t||"flow"===i&&"20px"})),Do=function(e){var t=e.icon,i=e.onClick,n=e.show,o=e.size,a=e.theme,r="modern"===a?Lo:"flow"===a?Po:"cascade"===a?zo:Ao;return E.a.createElement(r,{show:n,onClick:function(){return n&&i()}},E.a.createElement(Ro,{icon:t,size:o,show:n,theme:a}))},Fo=function(e){var t=e.clickPrevArrow,i=e.tour,n=e.reelVisible,o=e.firstRoom;return E.a.createElement(Do,{show:i&&"modern"===i.theme&&n&&!o,onClick:t,icon:hn.a,size:"18px",theme:i?i.theme:"classic"})},Ho=function(e){var t=e.clickNextArrow,i=e.tour,n=e.reelVisible,o=e.lastRoom;e.prevIndex;return E.a.createElement(Do,{show:i&&"modern"===i.theme&&n&&!o,onClick:t,icon:gn.a,size:"18px",theme:i?i.theme:""})},Bo=k.default.div.withConfig({displayName:"Controls__Wrapper",componentId:"rt2u1r-0"})(["width:100%;padding:0 80px;display:flex;justify-content:space-between;height:20px;@media screen and (max-width:","){padding:0 30px;}"],Q.smallMobileWidth),Uo=k.default.div.withConfig({displayName:"Controls__CascadeWrapper",componentId:"rt2u1r-1"})(["position:absolute;height:80px;left:calc(100% + 10px);width:20px;display:flex;justify-content:center;align-items:center;top:calc(50% - 40px);@media screen and (max-width:","){left:calc(100% + 2px);}"],Q.smallMobileWidth),Wo=k.default.div.withConfig({displayName:"Controls__Middle",componentId:"rt2u1r-2"})(["display:flex;"]),Jo=function(e){var t=e.reelVisible,i=e.isCascade,n=e.clickToggleReel,o=i?Uo:Bo;return E.a.createElement(o,null,E.a.createElement(Fo,e),E.a.createElement(Wo,null,E.a.createElement(Mo,{toggleReel:n,reelvisible:t,isCascade:i})),E.a.createElement(Ho,e))},Go=function(e){var t=e.clickNextArrow,i=e.tour,n=e.reelVisible,o=e.lastRoom;return E.a.createElement(Do,{show:i&&"flow"===i.theme&&n&&!o,onClick:t,icon:gn.a,theme:i?i.theme:"classic"})},qo=function(e){var t=e.clickPrevArrow,i=e.tour,n=e.reelVisible,o=e.firstRoom;return E.a.createElement(Do,{show:i&&"flow"===i.theme&&n&&!o,onClick:t,icon:hn.a,theme:i?i.theme:"classic"})},Ko=k.default.div.withConfig({displayName:"CascadeUpArrow__Wrapper",componentId:"feh76p-0"})(["margin:0 0 -10px 0;z-index:100;padding:0 10px 0 0;"]),Yo=function(e){var t=e.clickPrevArrow,i=e.tour,n=e.reelVisible,o=e.firstRoom;return E.a.createElement(Ko,null,E.a.createElement(Do,{show:i&&"cascade"===i.theme&&n&&!o,onClick:t,icon:dn.a,theme:i?i.theme:"classic"}))},Xo=k.default.div.withConfig({displayName:"CascadeDownArrow__Wrapper",componentId:"sc-6qiwth-0"})(["margin:-10px 0 0 0;z-index:100;padding:0 10px 10px 0;@media screen and (max-width:","){padding:0;}"],Q.mobileWidth),Zo=function(e){var t=e.clickNextArrow,i=e.tour,n=e.reelVisible,o=e.lastRoom;return E.a.createElement(Xo,null,E.a.createElement(Do,{show:i&&"cascade"===i.theme&&n&&!o,onClick:t,icon:pn.a,theme:i?i.theme:"classic"}))},$o=Object(k.default)(wo.a).withConfig({displayName:"Component__Wrapper",componentId:"sc-19pe9m0-0"})(["position:absolute;z-index:3;bottom:",";left:0;width:",";display:flex;flex-direction:column;align-items:center;@media screen and (","){width:100%;bottom:",";}"],(function(e){return e.isVideoChatStarted?"calc(".concat(P.a," + 10px)"):"10px"}),(function(e){return e.isChat?"calc(100% - ".concat(P.b,")"):"100%"}),Q.media.down.lg,(function(e){var t=e.isChat,i=e.isVideoChatStarted;return t?"calc(10px + ".concat(P.c,")"):i?"calc(".concat(P.a," + 10px)"):"10px"})),Qo=Object(k.default)($o).withConfig({displayName:"Component__CascadeWrapper",componentId:"sc-19pe9m0-1"})(["left:0;top:0;bottom:",";display:flex;flex-direction:column;align-items:center;background:rgba(0,0,0,.75);border-radius:0;padding:0 0 0 10px;",";@media screen and (","){bottom:",";}@media screen and (","){max-width:calc(100% - 140px);}"],(function(e){return e.isVideoChatStarted?P.a:0}),(function(e){return e.show?"width: 280px !important;\n      opacity: 1;\n      transition: all  500ms;":"width: 0 !important;\n      opacity: 0;\n      transition: all 400ms;\n      padding: 0;"}),Q.media.down.lg,(function(e){var t=e.isVideoChatStarted,i=e.isChat;return t&&i?P.c:t&&!i?P.a:0}),Q.media.down.md),ea=k.default.div.withConfig({displayName:"Component__FlowTheme",componentId:"sc-19pe9m0-2"})(["height:140px;background:rgba(0,0,0,.6);width:fit-content;max-width:calc(100% - 200px);margin:8px 0 0;border-radius:40px;padding:6px 0 0;display:flex;",";@media screen and (max-height:640px){height:115px;","}@media screen and (max-width:","){",";}"],(function(e){return e.show?"height: 140px;\n      opacity: 1;\n      transition: all  500ms;":"height: 0;\n      opacity: 0;\n      transition: all 300ms;"}),(function(e){return e.show?"height: 115px;":"height: 0;"}),Q.mobileWidth,(function(e){return!e.isCascade&&Object(k.css)(["max-width:calc(100% - 30px);"])})),ta=Object(k.default)(ea).withConfig({displayName:"Component__ModernTheme",componentId:"sc-19pe9m0-3"})(["width:100%;padding:6px 80px 0;max-width:unset;border-radius:0;margin-bottom:-10px;@media screen and (max-width:","){max-width:100%;}"],Q.mobileWidth),ia=Object(k.default)(ea).withConfig({displayName:"Component__CascadeTheme",componentId:"sc-19pe9m0-4"})(["height:100% !important;min-height:60%;background:transparent;width:100%;max-width:100%;margin:8px 0 0;border-radius:40px;padding:0;display:flex;flex-direction:column;"]),na=function(e){var t=e.reelVisible,i=e.tour,n=e.isChat,o=e.isVideoChatStarted,a=i&&"cascade"===i.theme,r=a&&i&&i.theme?ia:i&&"flow"===i.theme?ea:ta,s=a?Qo:$o;return E.a.createElement(s,{show:t,isChat:n,isVideoChatStarted:o},E.a.createElement(Jo,x()({},e,{isCascade:a,isChat:n})),E.a.createElement(r,{show:t,isCascade:a},!a&&E.a.createElement(qo,e),a&&E.a.createElement(Yo,e),E.a.createElement(jo,e),a&&E.a.createElement(Zo,e),!a&&E.a.createElement(Go,e)))};function oa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=h()(e);if(t){var o=h()(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return p()(this,i)}}var aa=function(e){d()(i,e);var t=oa(i);function i(){var e;return o()(this,i),(e=t.call(this)).state={index:0,prevIndex:0,changingSeen:!1},e}return r()(i,[{key:"componentWillReceiveProps",value:function(e){var t=e.tour,i=e.selectedImage,n=e.reelVisible,o=t&&t.images.indexOf(t.images.find((function(e){return e===i})));this.setState({index:o});var a=document.getElementById("reel-content"),r=(window.innerWidth<=450?140:window.innerWidth<=812?160:200)+10;if(a&&(a.scrollLeft=r*o+(window.innerWidth>450?-r/2:t&&"flow"===t.theme?10:t&&"modern"===t.theme?-10:0)),t&&"cascade"===t.theme){var s=100;window.innerHeight<=500&&(s=70);var c=(s+12)*o;a&&(a.scrollTop=c)}else n&&t&&"cascade"!==t.theme&&(a.style.display="flex")}},{key:"clickScene",value:function(e,t){this.setState({prevIndex:t,changingSeen:!0}),this.props.setScene(e)}},{key:"clickToggleReel",value:function(){this.setState({prevIndex:-1,changingSeen:!1}),this.props.toggleReel()}},{key:"clickNextArrow",value:function(){this.setState({changingSeen:!0}),this.props.selectNextImage()}},{key:"clickPrevArrow",value:function(){this.setState({changingSeen:!0}),this.props.selectPreviousImage()}},{key:"render",value:function(){return!this.props.vr&&E.a.createElement(na,x()({},this.props,{clickScene:this.clickScene.bind(this),index:this.state.index,prevIndex:this.state.prevIndex,clickToggleReel:this.clickToggleReel.bind(this),clickNextArrow:this.clickNextArrow.bind(this),clickPrevArrow:this.clickPrevArrow.bind(this),changingSeen:this.state.changingSeen}))}}]),i}(y.Component),ra=i(1056),sa=i(1064),ca=i(916),la=i(1063),da=i(1067),ua=i(51),pa=i.n(ua),ma=k.default.div.withConfig({displayName:"FloorplanPanel__Wrapper",componentId:"sc-1hj59mu-0"})([""," background:rgba(20,20,20,0.5);height:150px;margin-top:15px;padding:15px 12px 2px;border-radius:8px;max-width:593px;min-width:100px;position:relative;z-index:1;top:-165px;left:50px;@media screen and (max-width:611px){max-width:394px;}"],(function(e){return!e.show&&"display: none;"})),ha=k.default.div.withConfig({displayName:"FloorplanPanel__ImageListContainer",componentId:"sc-1hj59mu-1"})(["display:flex;height:150px;height:100%;overflow-y:hidden;overflow-x:scroll;::-webkit-scrollbar-thumb{-webkit-border-radius:10px;border-radius:10px;background:transparent;-webkit-box-shadow:inset 0 0 10px white;}::-webkit-scrollbar{height:12px;}"]),fa=k.default.div.withConfig({displayName:"FloorplanPanel__ImageContainer",componentId:"sc-1hj59mu-2"})(["height:100%;padding-right:15px;position:relative;min-width:180px;max-width:180px;overflow:hidden;background:white;margin:0 5px;border-radius:10px;display:flex;cursor:pointer;",""],(function(e){return e.isDisabled?Object(k.css)(["pointer-events:none;opacity:",";"],st.disabledOpacity):null})),ga=k.default.div.withConfig({displayName:"FloorplanPanel__FloorplanName",componentId:"sc-1hj59mu-3"})(["position:absolute;margin:5px;display:block;max-width:150px;white-space:nowrap;text-overflow:ellipsis;background:rgba(0,0,0,",");color:white;border-radius:10px;padding:2px 10px;font-size:13px;overflow:hidden;"],(function(e){return e.selected?"0.55":"0.4"})),ba=k.default.img.withConfig({displayName:"FloorplanPanel__Image",componentId:"sc-1hj59mu-4"})(["height:100%;border-radius:4px;margin:auto;"]),wa=k.default.div.withConfig({displayName:"FloorplanPanel__Triangle",componentId:"sc-1hj59mu-5"})(["position:absolute;top:81%;left:-10px;width:0;height:0;border-right:10px solid rgba(20,20,20,0.5);border-bottom:8px solid transparent;border-top:8px solid transparent;"]),va=function(e){var t=e.floorplanPanel,i=e.tourFloorplans,n=e.setFloorplanModalView,o=e.openModal,a=e.isDisabled,r=void 0!==a&&a;return E.a.createElement(ma,{show:t},E.a.createElement(wa,null),E.a.createElement(ha,null,i.map((function(e){return E.a.createElement(fa,{key:e.floorplanId,onClick:function(){!function(e){r||(n(e),o("floor-plan-link-to-rooms"))}(e)},isDisabled:r},E.a.createElement(ga,null,e.name),E.a.createElement(ba,{src:e.thumbUrl||e.url}))}))))},xa=i(1062),Ca=i.n(xa),Sa=k.default.div.withConfig({displayName:"LeadgenIcon__Wrapper",componentId:"sc-77i5wz-0"})([""," width:40px;height:40px;margin-bottom:5px;"],(function(e){return e.hidden&&"display: none;"})),ya=k.default.div.withConfig({displayName:"LeadgenIcon__IconWrapper",componentId:"sc-77i5wz-1"})(["display:flex;justify-content:center;align-items:center;color:",";width:100%;height:40px;font-size:20px;background:rgba(0,0,0,.6);border-radius:12px;cursor:pointer;&:hover{background:rgba(0,0,0,0.6);}",""],(function(e){return e.iconColor||"white"}),(function(e){return e.isDisabled?Object(k.css)(["pointer-events:none;opacity:",";"],st.disabledOpacity):null})),Ea=Object(I.connect)((function(e){return{viewerStr:e.app.localization.viewerStr}}),null)((function(e){var t,i,n=e.openModal,o=e.tour,a=e.vr,r=e.isDisabled,s=void 0!==r&&r,c=e.viewerStr,l=-1!==window.location.search.indexOf("mls=1");return E.a.createElement(Sa,{hidden:!o.leadgen||!o.leadgen.enabled||a||l},E.a.createElement(eo.a,{title:(null===(t=o.leadgen)||void 0===t?void 0:t.requestButtonText)||c.requestInformation,position:"right",isDisabled:s},E.a.createElement(ya,{onClick:function(){s||n("leadgen")},title:(null===(i=o.leadgen)||void 0===i?void 0:i.requestButtonText)||c.requestInformation,isDisabled:s},E.a.createElement(_.a,{icon:Ca.a}))))})),Ia=k.default.div.withConfig({displayName:"FloorplanIcon__Wrapper",componentId:"iwmhix-0"})([""," width:40px;height:40px;"],(function(e){return e.hidden&&"display: none;"})),ka=k.default.div.withConfig({displayName:"FloorplanIcon__IconWrapper",componentId:"iwmhix-1"})(["display:flex;justify-content:center;align-items:center;color:",";width:100%;height:40px;font-size:20px;background:rgba(0,0,0,.6);border-radius:12px;cursor:pointer;&:hover{background:rgba(0,0,0,0.6);}",""],(function(e){return e.iconColor||"white"}),(function(e){return e.isDisabled?Object(k.css)(["pointer-events:none;opacity:",";"],st.disabledOpacity):null})),_a=k.default.img.withConfig({displayName:"FloorplanIcon__Icon",componentId:"iwmhix-2"})(["width:1em;"]),Oa=Object(I.connect)((function(e){return{viewerStr:e.app.localization.viewerStr}}),null)((function(e){var t=e.toggleFloorplanPanel,i=e.tourFloorplans,n=e.vr,o=e.isDisabled,a=void 0!==o&&o;return E.a.createElement(Ia,{hidden:!i||i&&0===i.length||n},E.a.createElement(eo.a,{title:e.viewerStr.floorplans,position:"right",isDisabled:a},E.a.createElement(ka,{onClick:function(){a||t()},title:e.viewerStr.viewFloorplans,isDisabled:a},E.a.createElement(_a,{src:"./assets/img/floor-plan-icon.png"}))))})),ja=k.default.div.withConfig({displayName:"LeftIcons__Wrapper",componentId:"sc-17x0rmn-0"})(["position:absolute;left:15px;height:86px;z-index:5;bottom:11em;",""],(function(e){var t=e.isVideoChatStarted,i=e.isMessageChatShow,n=e.isReelVisible,o=e.isClassicTheme,a=(e.isFlowTheme,e.isCascadeTheme);return t&&Object(k.css)([""," "," "," "," "," "," "," "," "," "," "," ",""],i&&n&&Object(k.css)(["bottom:calc(30% + 206px);"]),i&&!n&&Object(k.css)(["   bottom:calc(30% + 74px);"]),!i&&!n&&Object(k.css)(["   bottom:calc(10% + 28px);"]),!i&&n&&Object(k.css)(["   bottom:calc(30% + 26px);"]),i&&n&&o&&Object(k.css)(["bottom:calc(30% + 206px + 20px);"]),i&&!n&&o&&Object(k.css)(["   bottom:calc(30% + 74px + 20px);"]),!i&&!n&&o&&Object(k.css)(["   bottom:calc(10% + 28px + 20px);"]),!i&&n&&o&&Object(k.css)(["   bottom:calc(30% + 26px + 20px);"]),i&&n&&a&&Object(k.css)(["   bottom:60%;left:265px;"]),i&&!n&&a&&Object(k.css)(["   bottom:60%;left:30px;"]),!i&&n&&a&&Object(k.css)(["   bottom:60%;left:265px;"]),!i&&!n&&a&&Object(k.css)(["   bottom:60%;left:30px;"]))})),Ta=function(e){var t=e.isHide,i=void 0!==t&&t,n=e.isVideoChatStarted,o=e.isMessageChatShow,a=e.isReelVisible,r=e.theme,s=pa()(e,["isHide","isVideoChatStarted","isMessageChatShow","isReelVisible","theme"]),c=r===ue.F.CLASSIC,l=r===ue.F.CASCADE,d=r===ue.F.FLOW;return!i&&E.a.createElement(ja,{isVideoChatStarted:n,isMessageChatShow:o,isReelVisible:a,isClassicTheme:c,isCascadeTheme:l,isFlowTheme:d},E.a.createElement(Ea,x()({},s,{noPageHeader:!0})),E.a.createElement(Oa,x()({},s,{noPageHeader:!0})),E.a.createElement(va,s))},Na=i(1065),Va=i(880),Ma=i(882),Aa=i(881),La=function(e){var t=e.justifyContent,i=e.size,n=e.gapSize,o=pa()(e,["justifyContent","size","gapSize"]);return E.a.createElement(Pa,x()({justifyContent:t},o),E.a.createElement(za,{type:"button",imgUrl:"/public/google-icon.svg",size:i,gapSize:n,onClick:function(){return window.authenticate("google")}}),E.a.createElement(za,{type:"button",imgUrl:"/public/facebook-icon.svg",size:i,gapSize:n,onClick:function(){return window.authenticate("facebook")}}))},Pa=k.default.div.withConfig({displayName:"AuthNetwork__Wrapper",componentId:"sc-1hbsul0-0"})(["display:flex;justify-content:",";align-items:center;"],(function(e){return e.justifyContent||"flex-start"})),za=k.default.button.withConfig({displayName:"AuthNetwork__NetworkBtn",componentId:"sc-1hbsul0-1"})(["font-size:0;background-image:",";background-repeat:no-repeat;background-size:contain;background-position:center center;padding:0;width:27px;height:27px;border:none;background-color:transparent;cursor:pointer;"," &:first-child{margin-right:1rem;}",""],(function(e){var t=e.imgUrl;return"url(".concat(t,")")}),(function(e){var t=e.size;return t&&Object(k.css)(["width:",";height:",";"],t,t)}),(function(e){var t=e.gapSize;return t&&Object(k.css)(["&:first-child{margin-right:",";}"],t)})),Ra=Object(y.memo)(La),Da=i(611),Fa=function(e){return Object(ee.a)({method:"POST",data:e,url:"".concat("auth","/login")})},Ha=function(e){var t=e.modalStr,i=e.user,n=e.handleClickChangeAccount,o=void 0===n?function(){return null}:n,a=!!(null==i?void 0:i.picture);return E.a.createElement(Ba,null,E.a.createElement(Ua,null,E.a.createElement(Wa,null,a?E.a.createElement(Ja,{src:null==i?void 0:i.picture,alt:"User picture"}):E.a.createElement(Ga,{src:"./assets/img/cp-live/icon-user.svg",size:"22px",color:"#fff"})),E.a.createElement(qa,null,E.a.createElement(Ya,null,null==i?void 0:i.name),E.a.createElement(Ka,null,null==i?void 0:i.email))),E.a.createElement(Xa,{onClick:o},E.a.createElement(Za,{className:"icon",src:"./assets/img/cp-live/icon-simple-user-o.svg",size:"20px",color:"#59C1C9"}),E.a.createElement(X.c,null,t.lgmChangeAccount)))},Ba=k.default.div.withConfig({displayName:"AccountInfo__Container",componentId:"sc-10rkbt4-0"})(["margin-bottom:30px;"]),Ua=k.default.div.withConfig({displayName:"AccountInfo__UserAccount",componentId:"sc-10rkbt4-1"})(["display:flex;"]),Wa=k.default.div.withConfig({displayName:"AccountInfo__UserAvatar",componentId:"sc-10rkbt4-2"})(["display:flex;flex-direction:row;align-items:center;justify-content:center;width:40px;height:40px;min-width:40px;min-height:40px;border:none;overflow:hidden;border-radius:50%;margin:0 12px 0 0;background-color:#BBD2D4;"]),Ja=k.default.img.withConfig({displayName:"AccountInfo__UserPicture",componentId:"sc-10rkbt4-3"})(["width:100%;height:100%;object-fit:cover;"]),Ga=Object(k.default)(st.Icon).withConfig({displayName:"AccountInfo__UserIcon",componentId:"sc-10rkbt4-4"})(["margin-left:2px;"]),qa=k.default.div.withConfig({displayName:"AccountInfo__UserInfo",componentId:"sc-10rkbt4-5"})(["width:calc(100% - 52px);margin-bottom:20px;"]),Ka=k.default.p.withConfig({displayName:"AccountInfo__UserEmail",componentId:"sc-10rkbt4-6"})(["margin:0;font-weight:normal;font-size:16px;line-height:21px;color:#496174;width:100%;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;"]),Ya=Object(k.default)(Ka).withConfig({displayName:"AccountInfo__UserName",componentId:"sc-10rkbt4-7"})(["font-weight:bold;"]),Xa=Object(k.default)(Z.i).withConfig({displayName:"AccountInfo__ChangeAccountButton",componentId:"sc-10rkbt4-8"})(["min-width:260px;&:disabled{p{color:#BBD2D4;}.icon{background-color:#BBD2D4;}}@media screen and (","){width:100%;min-width:unset;}"],Q.media.down.lgm),Za=Object(k.default)(st.Icon).withConfig({displayName:"AccountInfo__SimpleUserIcon",componentId:"sc-10rkbt4-9"})(["margin-right:10px;"]),$a=Object(I.connect)((function(e){return{user:e.app.user,modalStr:e.app.localization.modalStr}}),void 0)(Object(y.memo)(Ha)),Qa={username:"",password:""},er=Aa.a().shape({username:Aa.b().trim().required("Required").test("username-field-test","Email or phone invalid",(function(e){var t=Da.a.test(e),i=Da.b.test(e);return!(!t&&!i)})),password:Aa.b().trim().required("Required")}),tr=function(e){var t=e.commonStr,i=e.user,n=e.handleClickConnect,o=Object(y.useState)(!1),a=W()(o,2),r=a[0],s=a[1],c=function(){s(!1)},l=function(){var e=S()(w.a.mark((function e(t,i){var n,o,a,r,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.setFieldError,e.prev=1,e.next=4,Fa(t);case 4:o=e.sent,Object(on.a)(o.user),s(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),a=e.t0.data,r=a.field,c=a.msg,n(r,c);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,i){return e.apply(this,arguments)}}();Object(y.useEffect)((function(){r&&s(!1)}),i);var d=i&&!!i.token;return E.a.createElement(ir,null,d&&!r?E.a.createElement($a,{handleClickChangeAccount:function(){s(!0)}}):E.a.createElement(Ma.c,{initialValues:Qa,validationSchema:er,onSubmit:l},(function(e){var i=e.isSubmitting;return E.a.createElement(nr,null,E.a.createElement(Ma.a,{name:"username"},(function(e){var t=e.field,i=e.meta;return E.a.createElement(Va.a,x()({label:"Your Email Or Phone"},t,{error:i.touched&&i.error}))})),E.a.createElement(Ma.a,{name:"password"},(function(e){var t=e.field,i=e.meta;return E.a.createElement(Va.a,x()({label:"Password",type:"password"},t,{error:i.touched&&i.error}))})),E.a.createElement(or,{size:"24px",gapSize:"14px"}),E.a.createElement(ar,null,E.a.createElement(rr,{type:"submit",disabled:i},t.signIn),E.a.createElement(sr,{onClick:c},t.cancel)))})),!r&&"guest"!==i.type&&E.a.createElement(cr,{onClick:n},t.connect))},ir=k.default.div.withConfig({displayName:"LoginForm__Container",componentId:"sc-1dht87n-0"})([""]),nr=Object(k.default)(Ma.b).withConfig({displayName:"LoginForm__StyledForm",componentId:"sc-1dht87n-1"})(["width:100%;padding:0;margin:0;"]),or=Object(k.default)(Ra).withConfig({displayName:"LoginForm__AuthBySocialNetwork",componentId:"sc-1dht87n-2"})(["margin-bottom:30px;"]),ar=k.default.div.withConfig({displayName:"LoginForm__Controls",componentId:"sc-1dht87n-3"})(["display:flex;align-items:center;@media screen and (","){flex-direction:column;}& > button{@media screen and (","){min-width:calc(50% - 5px);}&:not(:last-child){margin-right:10px;}@media screen and (","){min-width:100%;&:not(:last-child){margin-right:0;margin-bottom:10px;}}}"],Q.media.down.mdm,Q.media.down.lgm,Q.media.down.mdm),rr=Object(k.default)(Z.c).withConfig({displayName:"LoginForm__SignInButton",componentId:"sc-1dht87n-4"})([""]),sr=Object(k.default)(Z.f).withConfig({displayName:"LoginForm__CancelButton",componentId:"sc-1dht87n-5"})(["min-width:150px;"]),cr=Object(k.default)(Z.c).withConfig({displayName:"LoginForm__ConnectButton",componentId:"sc-1dht87n-6"})(["@media screen and (","){min-width:unset;width:100%;}"],Q.media.down.md),lr=Object(I.connect)((function(e){return{commonStr:e.app.localization.commonStr}}),void 0)(Object(y.memo)(tr)),dr=Object(y.memo)((function(e){var t=e.checked,i=e.onChange,n=void 0===i?function(){return null}:i,o=e.onClick,a=e.children,r=e.className,s=e.disabled,c=e.isWithTransition;return E.a.createElement(pr,{className:r,isWithTransition:c,onClick:o,isDisabled:s},E.a.createElement(ur,{type:"checkbox",checked:t,onChange:n,disabled:s}),E.a.createElement("span",{className:"custom-checkbox"}),E.a.createElement(mr,null,a))})),ur=k.default.input.withConfig({displayName:"CheckboxCpl__CheckboxInput",componentId:"sc-18n9x20-0"})(["margin-right:10px;"]),pr=k.default.label.withConfig({displayName:"CheckboxCpl__CheckboxLabel",componentId:"sc-18n9x20-1"})(["display:flex;position:relative;cursor:pointer;","{opacity:0;&:checked ~ .custom-checkbox{background-color:rgb(87,193,202);border-radius:2px;transform:rotate(0deg) scale(1);opacity:1;border:none;border:2px solid rgb(87,193,202);&::after{transform:rotate(45deg) scale(1);opacity:1;left:3px;top:0px;width:4px;height:8px;border:solid #fff;border-width:0 2px 2px 0;background-color:transparent;border-radius:0;}}}.custom-checkbox{position:absolute;top:0;left:0;height:16px;width:16px;background-color:transparent;border-radius:2px;border:2px solid #E2EAEB;"," &::after{position:absolute;content:'';left:8px;top:8px;height:0;width:0;border-radius:2px;border-width:0 2px 2px 0;transform:rotate(0deg) scale(0);opacity:1;}}",""],ur,(function(e){return e.isWithTransition&&Object(k.css)(["transition:all 0.3s ease-out;"])}),(function(e){return e.isDisabled&&Object(k.css)(["cursor:not-allowed;","{&:checked ~ .custom-checkbox{background-color:#CBD9DB;border:2px solid #CBD9DB;}}.custom-checkbox{border:2px solid #CBD9DB;}p,span{color:#CBD9DB;}"],ur)})),mr=k.default.div.withConfig({displayName:"CheckboxCpl__ChildrenConteiner",componentId:"sc-18n9x20-2"})(["display:inline-block;"]),hr=dr,fr=function(e){var t=e.handleVideoDeviceError,i=Object(y.useState)(!1),n=W()(i,2),o=n[0],a=n[1],r=Object(y.useRef)(null);return Object(y.useEffect)((function(){function e(){return(e=S()(w.a.mark((function e(){var i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}});case 3:i=e.sent,r.current.srcObject=i,a(!0),r.current.play(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),a(!0),t();case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){var e,t;((null===(e=r.current)||void 0===e||null===(t=e.srcObject)||void 0===t?void 0:t.getTracks())||[]).forEach((function(e){e.stop()}))}}),[]),E.a.createElement(gr,null,!o&&E.a.createElement(wr,null,E.a.createElement($.a,{size:"42px"})),E.a.createElement(br,{ref:r}))},gr=k.default.div.withConfig({displayName:"CameraFeed__Container",componentId:"i4ztgk-0"})(["position:relative;display:flex;align-items:center;justify-content:center;background-color:#BBD2D4;border-radius:8px;width:100%;height:100%;overflow:hidden;mask-image:radial-gradient(white,black);-webkit-mask-image:-webkit-radial-gradient(white,black);"]),br=k.default.video.withConfig({displayName:"CameraFeed__Video",componentId:"i4ztgk-1"})(["width:100%;transform:rotateY(180deg);"]),wr=k.default.div.withConfig({displayName:"CameraFeed__SpinnerWrapper",componentId:"i4ztgk-2"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"]),vr=Object(y.memo)(fr),xr=function(e){var t=e.modalStr,i=e.isJoinAsGuest,n=e.userName,o=e.handleVideoChatJoin,a=Object(y.useState)(!0),r=W()(a,2),s=r[0],c=r[1],l=Object(y.useState)(!0),d=W()(l,2),u=d[0],p=d[1],m=Object(y.useState)(!1),h=W()(m,2),f=h[0],g=h[1];return E.a.createElement(Cr,null,E.a.createElement(Sr,null,E.a.createElement(yr,null,s?E.a.createElement(vr,{handleVideoDeviceError:function(){c(!1),g(!0)}}):E.a.createElement(jr,null,E.a.createElement(Tr,{src:"./assets/img/cp-live/icon-user.svg",size:"120px",color:"#fff"}))),E.a.createElement(Vr,null,s?E.a.createElement(Ar,{src:"./assets/img/cp-live/video-icon.svg",size:"27px",color:"#fff"}):E.a.createElement(Ar,{src:"./assets/img/cp-live/video-off-icon.svg",size:"27px",color:"#fff"})),E.a.createElement(Mr,null,u?E.a.createElement(st.Icon,{src:"./assets/img/cp-live/micro-icon.svg",size:"27px",color:"#fff"}):E.a.createElement(st.Icon,{src:"./assets/img/cp-live/micro-off-icon.svg",size:"27px",color:"#fff"}))),E.a.createElement(Er,null,E.a.createElement(X.d,null,t.lgmGivePermissions),E.a.createElement(Ir,null,E.a.createElement(kr,{checked:s,onClick:function(e){e.preventDefault(),e.stopPropagation(),f||c(!s)},disabled:f},E.a.createElement(_r,null,t.lgmEnableVideo)),E.a.createElement(kr,{checked:u,onClick:function(e){e.preventDefault(),e.stopPropagation(),p(!u)}},E.a.createElement(_r,null,t.lgmEnableAudio))),E.a.createElement(Or,{onClick:function(){o({userName:n,isVideoEnabled:s,isAudioEnabled:u,isJoinAsGuest:i})}},t.lgmJoinCall)))},Cr=k.default.div.withConfig({displayName:"JoinPermissionsSettings__Container",componentId:"sc-16huh89-0"})(["display:flex;padding-top:15px;width:100%;@media screen and (","){flex-direction:column;}"],Q.media.down.md),Sr=k.default.div.withConfig({displayName:"JoinPermissionsSettings__Preview",componentId:"sc-16huh89-1"})(["position:relative;width:100%;height:198px;max-width:354px;max-height:198px;margin-right:40px;@media screen and (","){height:0px;padding-bottom:calc(198/354*100%);max-width:unset;margin-right:unset;margin-bottom:40px;}"],Q.media.down.md),yr=k.default.div.withConfig({displayName:"JoinPermissionsSettings__Substrate",componentId:"sc-16huh89-2"})(["position:absolute;width:100%;height:100%;"]),Er=k.default.div.withConfig({displayName:"JoinPermissionsSettings__Permissions",componentId:"sc-16huh89-3"})(["display:flex;flex-direction:column;flex-grow:1;"]),Ir=k.default.div.withConfig({displayName:"JoinPermissionsSettings__SettingControls",componentId:"sc-16huh89-4"})(["display:flex;flex-direction:column;flex-grow:1;"]),kr=Object(k.default)(hr).withConfig({displayName:"JoinPermissionsSettings__SettingsCheckbox",componentId:"sc-16huh89-5"})(["margin-bottom:20px;"]),_r=Object(k.default)(X.e).withConfig({displayName:"JoinPermissionsSettings__CheckboxText",componentId:"sc-16huh89-6"})(["letter-spacing:0.01em;margin-top:2px;"]),Or=Object(k.default)(Z.c).withConfig({displayName:"JoinPermissionsSettings__JoinButton",componentId:"sc-16huh89-7"})(["min-width:150px;max-width:150px;@media screen and (","){min-width:unset;max-width:unset;width:100%;}"],Q.media.down.md),jr=k.default.div.withConfig({displayName:"JoinPermissionsSettings__IconWrapper",componentId:"sc-16huh89-8"})(["position:relative;display:flex;align-items:center;justify-content:center;background-color:#BBD2D4;border-radius:8px;width:100%;height:100%;"]),Tr=Object(k.default)(st.Icon).withConfig({displayName:"JoinPermissionsSettings__UserIcon",componentId:"sc-16huh89-9"})(["margin-left:12px;"]),Nr=k.default.div.withConfig({displayName:"JoinPermissionsSettings__ControlIconWrapper",componentId:"sc-16huh89-10"})(["display:flex;align-items:center;justify-content:center;border-radius:50%;background-color:rgba(0,0,0,0.5);backdrop-filter:blur(7px);width:47px;height:47px;position:absolute;bottom:14px;"]),Vr=Object(k.default)(Nr).withConfig({displayName:"JoinPermissionsSettings__VideoIconWrapper",componentId:"sc-16huh89-11"})(["right:82px;"]),Mr=Object(k.default)(Nr).withConfig({displayName:"JoinPermissionsSettings__AudioIconWrapper",componentId:"sc-16huh89-12"})(["right:22px;"]),Ar=Object(k.default)(st.Icon).withConfig({displayName:"JoinPermissionsSettings__VideoIcon",componentId:"sc-16huh89-13"})([""]),Lr=Object(I.connect)((function(e){return{user:e.app.user,modalStr:e.app.localization.modalStr}}),void 0)(Object(y.memo)(xr)),Pr="guest",zr=[{id:0,label:"Join as guest",value:Pr},{id:1,label:"Login as existing user",value:"user"}],Rr=function(e){var t=e.modalStr,i=e.commonStr,n=e.user,o=e.roomName,a=e.tourTitle,r=e.tourShortId,s=e.sceneId,c=e.isScheduleEnabled,l=e.handleVideoChatJoin,d=e.handleClickClose,u=e.handleOpenScheduleModal,p=Object(y.useState)(zr[0]),m=W()(p,2),h=m[0],f=m[1],g=Object(y.useState)(""),b=W()(g,2),v=b[0],C=b[1],I=Object(y.useState)(!1),k=W()(I,2),_=k[0],O=k[1],j=Object(y.useState)(0),T=W()(j,2),N=T[0],V=T[1],M=h.value===Pr,A=!r||!s||Q.isMlsCompliant;Object(y.useEffect)((function(){function e(){return(e=S()(w.a.mark((function e(t){var i,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie(t);case 3:i=e.sent,n=i.connectedParticipantsCount,V(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(t){e.apply(this,arguments)}(o)}),[]);var L=function(e){f(e)},P=function(){O(!0)};return E.a.createElement(Dr,x()({},e,{isPermissionsSetup:_}),E.a.createElement(Fr,null,E.a.createElement(X.g,null,t.lgmJoinMeeting),E.a.createElement(Jr,{onClick:function(){d(!0)}},E.a.createElement(st.Icon,{src:"./assets/img/closeIcon.svg",size:"24px",color:"#BBD2D5"}))),E.a.createElement(Hr,null,_?E.a.createElement(Lr,{userName:v,isJoinAsGuest:M,handleVideoChatJoin:l}):E.a.createElement(E.a.Fragment,null,E.a.createElement(Br,null,E.a.createElement(Wr,{src:"./assets/img/cp-live/join-meeting@2x.jpg"})),E.a.createElement(Ur,null,E.a.createElement(X.d,null,t.lgmGiveDetails),E.a.createElement(Gr,null,E.a.createElement(qr,null,t.lgmTourTitle),E.a.createElement(Kr,null,E.a.createElement(Yr,null,a),E.a.createElement(Zr,null,E.a.createElement(Xr,{src:"./assets/img/cp-live/icon-simple-user.svg",color:"#7634E1",size:"10px"}),E.a.createElement($r,null,N)))),E.a.createElement(Qr,null,zr.map((function(e){var t=h.value===e.value;return E.a.createElement(Na.a,{className:"cpl-join-radio-btn",key:e.id,option:e,checked:t,handleClick:L})}))),M?E.a.createElement(E.a.Fragment,null,E.a.createElement(es,{label:"Your Name",value:v,onChange:function(e){var t;C(null==e||null===(t=e.target)||void 0===t?void 0:t.value)}}),E.a.createElement(ts,null,E.a.createElement(is,{onClick:P},i.connect),c&&E.a.createElement(ns,{disabled:A,onClick:function(){Q.isMlsCompliant||u(v)}},E.a.createElement(os,{src:"./assets/img/cp-live/icon-calendar.svg",size:"12px",color:"#496174"}),t.lgmBookAppointment))):E.a.createElement(lr,{user:n,handleClickConnect:P})))))},Dr=Object(k.default)(Y.a).withConfig({displayName:"LiveJoinModal__Container",componentId:"sc-1b35tsf-0"})(["@media screen and (","){&__content{min-width:796px;}","}"],Q.media.up.lgm,(function(e){return e.isPermissionsSetup&&Object(k.css)(["&__content{min-width:666px;}"])})),Fr=k.default.div.withConfig({displayName:"LiveJoinModal__Header",componentId:"sc-1b35tsf-1"})(["margin:0;padding:0;"]),Hr=k.default.div.withConfig({displayName:"LiveJoinModal__Content",componentId:"sc-1b35tsf-2"})(["display:flex;padding:0 0 15px;@media screen and (","){flex-direction:column;}"],Q.media.down.md),Br=k.default.section.withConfig({displayName:"LiveJoinModal__LeftSection",componentId:"sc-1b35tsf-3"})(["display:block;width:50%;@media screen and (","){width:100%;text-align:center;}"],Q.media.down.md),Ur=k.default.section.withConfig({displayName:"LiveJoinModal__RightSection",componentId:"sc-1b35tsf-4"})(["width:50%;padding:10px 10px 0 30px;@media screen and (","){width:100%;padding:30px 10px 0 10px;}"],Q.media.down.md),Wr=k.default.img.withConfig({displayName:"LiveJoinModal__JoinImage",componentId:"sc-1b35tsf-5"})(["width:100%;max-width:351px;object-fit:contain;float:right;@media screen and (","){float:inherit;}"],Q.media.down.md),Jr=k.default.button.withConfig({displayName:"LiveJoinModal__CloseButton",componentId:"sc-1b35tsf-6"})(["position:absolute;top:16px;right:18px;display:flex;align-items:center;padding:0;margin:0;border:none;background-color:transparent;cursor:pointer;"]),Gr=k.default.div.withConfig({displayName:"LiveJoinModal__MeetingDetails",componentId:"sc-1b35tsf-7"})(["display:flex;flex-direction:column;margin-bottom:30px;"]),qr=Object(k.default)(X.e).withConfig({displayName:"LiveJoinModal__MeetingDetailsCaption",componentId:"sc-1b35tsf-8"})(["margin-bottom:7px;"]),Kr=k.default.div.withConfig({displayName:"LiveJoinModal__MeetingDetailsContent",componentId:"sc-1b35tsf-9"})(["display:flex;"]),Yr=Object(k.default)(X.c).withConfig({displayName:"LiveJoinModal__MeetingTitle",componentId:"sc-1b35tsf-10"})(["flex-grow:1;margin-right:5px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;"]),Xr=Object(k.default)(st.Icon).withConfig({displayName:"LiveJoinModal__ParticipantIcon",componentId:"sc-1b35tsf-11"})(["margin-right:4px;"]),Zr=k.default.div.withConfig({displayName:"LiveJoinModal__ParticipantCount",componentId:"sc-1b35tsf-12"})(["display:flex;align-items:baseline;"]),$r=Object(k.default)(X.c).withConfig({displayName:"LiveJoinModal__Count",componentId:"sc-1b35tsf-13"})(["color:#7634E1;"]),Qr=k.default.div.withConfig({displayName:"LiveJoinModal__RadioButtonGroup",componentId:"sc-1b35tsf-14"})(["display:flex;margin-bottom:10px;.cpl-join-radio-btn{max-width:50%;&:not(:last-child){margin-right:40px;}}"]),es=Object(k.default)(Va.a).withConfig({displayName:"LiveJoinModal__GuestUserName",componentId:"sc-1b35tsf-15"})(["margin-bottom:30px;"]),ts=k.default.div.withConfig({displayName:"LiveJoinModal__Controls",componentId:"sc-1b35tsf-16"})(["display:flex;width:100%;justify-content:space-between;button:not(:last-child){margin-right:20px;}@media screen and (","){button:not(:last-child){margin-right:10px;}}@media screen and (","){flex-direction:column;button:not(:last-child){margin-right:0;margin-bottom:10px;}}"],Q.media.down.lgm,Q.media.down.mdm),is=Object(k.default)(Z.c).withConfig({displayName:"LiveJoinModal__ConnectButton",componentId:"sc-1b35tsf-17"})(["min-width:136px;max-width:150px;flex-grow:1;@media screen and (","){min-width:120px;}@media screen and (","){min-width:unset;max-width:unset;width:calc(50% - 5px);}@media screen and (","){width:100%;}"],Q.media.down.lgm,Q.media.down.md,Q.media.down.mdm),ns=Object(k.default)(Z.b).withConfig({displayName:"LiveJoinModal__BookAppointmentButton",componentId:"sc-1b35tsf-18"})(["min-width:160px;font-weight:normal;@media screen and (","){min-width:unset;width:calc(50% - 5px);flex-grow:1;}@media screen and (","){width:100%;}"],Q.media.down.md,Q.media.down.mdm),os=Object(k.default)(st.Icon).withConfig({displayName:"LiveJoinModal__CalendarIcon",componentId:"sc-1b35tsf-19"})(["margin-right:5px;"]),as=Object(I.connect)((function(e){return{modalStr:e.app.localization.modalStr,commonStr:e.app.localization.commonStr}}),void 0)(Object(y.memo)(Rr)),rs=function(e){var t=e.modalStr,i=e.commonStr,n=e.handleClickClose;return E.a.createElement(ss,e,E.a.createElement(cs,null,E.a.createElement(us,null,t.memThanksForJoining),E.a.createElement(ds,{onClick:n},E.a.createElement(st.Icon,{src:"./assets/img/closeIcon.svg",size:"24px",color:"#BBD2D5"}))),E.a.createElement(ls,null,E.a.createElement(ps,null,t.memHostHasEndedMeeting),E.a.createElement(ms,null,t.memThisMeetingBrought),E.a.createElement(hs,{onClick:n},i.close)))},ss=Object(k.default)(Y.a).withConfig({displayName:"MeetingEndModal__Container",componentId:"sc-19xo04b-0"})(["@media screen and (","){&__content{width:504px;}}"],Q.media.up.lgm),cs=k.default.div.withConfig({displayName:"MeetingEndModal__Header",componentId:"sc-19xo04b-1"})(["margin:0;padding:0;"]),ls=k.default.div.withConfig({displayName:"MeetingEndModal__Content",componentId:"sc-19xo04b-2"})(["display:flex;flex-direction:column;align-items:center;padding:0 32px 10px;"]),ds=k.default.button.withConfig({displayName:"MeetingEndModal__CloseButton",componentId:"sc-19xo04b-3"})(["position:absolute;top:16px;right:18px;display:flex;align-items:center;padding:0;margin:0;border:none;background-color:transparent;cursor:pointer;"]),us=Object(k.default)(X.g).withConfig({displayName:"MeetingEndModal__StyledModalTitle",componentId:"sc-19xo04b-4"})(["padding:0 60px;margin-bottom:15px;"]),ps=Object(k.default)(X.b).withConfig({displayName:"MeetingEndModal__Message",componentId:"sc-19xo04b-5"})(["text-align:center;margin-bottom:30px;"]),ms=Object(k.default)(X.a).withConfig({displayName:"MeetingEndModal__BrandMessage",componentId:"sc-19xo04b-6"})(["padding:25px 25px;background-color:#F1F5F5;border-radius:4px;text-align:center;margin-bottom:30px;@media screen and (","){width:100%;}"],Q.media.down.md),hs=Object(k.default)(Z.c).withConfig({displayName:"MeetingEndModal__GeneralCloseButton",componentId:"sc-19xo04b-7"})(["min-width:170px;@media screen and (","){width:100%;}"],Q.media.down.md),fs=Object(I.connect)((function(e){return{modalStr:e.app.localization.modalStr,commonStr:e.app.localization.commonStr}}),void 0)(Object(y.memo)(rs)),gs=i(72),bs=i.n(gs),ws=i(1037),vs=i.n(ws),xs=i(1041);function Cs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=h()(e);if(t){var o=h()(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return p()(this,i)}}var Ss={red:"#DD2E44",yellow:"#FFED4D",green:"#66CA2C",blue:"#2676FA",black:"#000",white:"#fff"},ys=function(e){d()(i,e);var t=Cs(i);function i(e){var n;return o()(this,i),n=t.call(this,e),g()(c()(n),"componentDidMount",(function(){var e=document.getElementById("canvas-whiteboard");e.addEventListener("mousedown",n.onMouseDown,!1),e.addEventListener("mouseup",n.onMouseUp,!1),e.addEventListener("mouseout",n.onMouseUp,!1),e.addEventListener("mousemove",vs()(n.onMouseMove,10),!1),e.addEventListener("touchstart",n.onMouseDown,!1),e.addEventListener("touchend",n.onMouseUp,!1),e.addEventListener("touchcancel",n.onMouseUp,!1),e.addEventListener("touchmove",vs()(n.onMouseMove,10),!1),window.addEventListener("resize",n.onResize,!1),n.onResize(),n.props.socket.on("drawing",n.onDrawingEvent),n.props.setDisableViewerOrbitControls(),n.props.setDisableViewerSphericalControls(),bs.a.get("dontShowWhiteBoardNotification")||n.setTimeoutNotification(),n.props.host.sid===n.props.localParticipantSid&&n.handleShowMovingAndEventListener(!0)})),g()(c()(n),"componentDidUpdate",(function(e,t){n.props.sceneId!==e.sceneId&&n.clearCanvas(),n.state.moving!==t.moving&&n.state.moving&&(n.props.setEnableViewerOrbitControls(),n.props.setEnableViewerSphericalControls()),n.state.moving===t.moving||n.state.moving||(n.props.setDisableViewerOrbitControls(),n.props.setDisableViewerSphericalControls()),n.props.host&&n.props.viewer.control.addEventListener("change",n.handleChangeCoords),n.props.host.sid!==n.props.localParticipantSid?n.handleShowMovingAndEventListener(!1):n.handleShowMovingAndEventListener(!0)})),g()(c()(n),"componentWillUnmount",(function(){var e=document.getElementById("canvas-whiteboard");e.removeEventListener("mousedown",n.onMouseDown),e.removeEventListener("mouseup",n.onMouseUp),e.removeEventListener("mouseout",n.onMouseUp),e.removeEventListener("mousemove",vs()(n.onMouseMove,10)),e.removeEventListener("touchstart",n.onMouseDown),e.removeEventListener("touchend",n.onMouseUp),e.removeEventListener("touchcancel",n.onMouseUp),e.removeEventListener("touchmove",vs()(n.onMouseMove,10)),window.removeEventListener("resize",n.onResize,!1),window.removeEventListener("keydown",n.onKeyDown),window.removeEventListener("keyup",n.onKeyUp),n.props.viewer.control.removeEventListener("change",n.handleChangeCoords),n.props.localParticipantSid===n.props.host.sid?(n.props.setEnableViewerOrbitControls(),n.props.setEnableViewerSphericalControls()):(n.props.setDisableViewerOrbitControls(),n.props.setDisableViewerSphericalControls()),n.props.setWhiteBoardStatus(!1)})),g()(c()(n),"onMouseDown",(function(e){n.setState({drawing:!0,x:e.clientX||e.touches[0].clientX,y:e.clientY||e.touches[0].clientY})})),g()(c()(n),"onMouseUp",(function(e){n.state.drawing&&n.setState({drawing:!1},(function(){var t,i,o,a;n.drawLine(n.state.x,n.state.y,e.clientX||(null===(t=e.touches[0])||void 0===t?void 0:t.clientX)||(null===(i=e.changedTouches[0])||void 0===i?void 0:i.clientX),e.clientY||(null===(o=e.touches[0])||void 0===o?void 0:o.clientY)||(null===(a=e.changedTouches[0])||void 0===a?void 0:a.clientY),n.state.targetColor,!0)}))})),g()(c()(n),"onMouseMove",(function(e){n.state.drawing&&(n.drawLine(n.state.x,n.state.y,e.clientX||e.touches[0].clientX,e.clientY||e.touches[0].clientY,n.state.targetColor,!0),n.setState({x:e.clientX||e.touches[0].clientX,y:e.clientY||e.touches[0].clientY}))})),g()(c()(n),"onResize",(function(){var e=document.getElementById("canvas-whiteboard");e.width=window.innerWidth,e.height=window.innerHeight-P.a.slice(0,P.a.length-2)})),g()(c()(n),"onDrawingEvent",(function(e){var t=document.getElementById("canvas-whiteboard");if(t){var i=t.width,o=t.height;n.drawLine(e.x0*i,e.y0*o,e.x1*i,e.y1*o,e.color)}})),g()(c()(n),"onKeyUp",(function(e){"Control"!==e.key&&"Meta"!==e.key||n.setState({moving:!1,drawing:!1})})),g()(c()(n),"onKeyDown",(function(e){(e.metaKey||e.ctrlKey)&&n.setState({moving:!0,drawing:!1},(function(){return n.props.viewer.control.addEventListener("change",n.handleChangeCoords)}))})),g()(c()(n),"setTimeoutNotification",(function(){setTimeout((function(){return n.setState({showNavigationTooltip:!0})}),1e4)})),g()(c()(n),"drawLine",(function(e,t,i,o,a,r){var s=document.getElementById("canvas-whiteboard"),c=s.getContext("2d");if(a?(c.globalCompositeOperation="source-over",c.strokeStyle=a,c.lineWidth=2):(c.globalCompositeOperation="destination-out",c.strokeStyle="black",c.lineWidth=15),c.beginPath(),c.moveTo(e,t),c.lineTo(i,o),c.stroke(),c.closePath(),r){var l=s.width,d=s.height;n.props.socket.emit("drawing",{x0:e/l,y0:t/d,x1:i/l,y1:o/d,color:a})}})),g()(c()(n),"updateTargetColor",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setState({targetColor:e?Ss[e]:e,moving:!1})})),g()(c()(n),"clearCanvas",(function(){var e=document.getElementById("canvas-whiteboard");e.getContext("2d").clearRect(0,0,e.width,e.height)})),g()(c()(n),"handleChangeCoords",(function(){n.clearCanvas(),n.props.viewer.control.removeEventListener("change",n.handleChangeCoords)})),g()(c()(n),"handleSetMoving",(function(){n.setState({moving:!n.state.moving},(function(){n.state.moving?(n.props.viewer.control.addEventListener("change",n.handleChangeCoords),window.removeEventListener("keydown",n.onKeyDown),window.removeEventListener("keyup",n.onKeyUp)):(window.addEventListener("keydown",n.onKeyDown),window.addEventListener("keyup",n.onKeyUp))}))})),g()(c()(n),"handleCloseNotification",(function(){return n.setState({showNavigationTooltip:!1})})),g()(c()(n),"handleDontShow",(function(){bs.a.get("dontShowWhiteBoardNotification")?bs.a.remove("dontShowWhiteBoardNotification"):bs.a.set("dontShowWhiteBoardNotification",1)})),g()(c()(n),"handleShowMovingAndEventListener",(function(e){e?n.setState({showMovingControl:e},(function(){window.addEventListener("keydown",n.onKeyDown),window.addEventListener("keyup",n.onKeyUp)})):n.setState({showMovingControl:e},(function(){window.removeEventListener("keydown",n.onKeyDown),window.removeEventListener("keyup",n.onKeyUp)}))})),n.state={targetColor:Ss.red,drawing:!1,moving:!1,showNavigationTooltip:!1,showMovingControl:!1,x:null,y:null},n}return r()(i,[{key:"render",value:function(){var e=this;return E.a.createElement(y.Fragment,null,E.a.createElement(Es,{id:"canvas-whiteboard",isMoving:this.state.moving}),E.a.createElement(Is,null,E.a.createElement(ks,null,Object.keys(Ss).map((function(t,i){return E.a.createElement(_s,{key:i,background:Ss[t],isActive:!e.state.moving&&Ss[t]===e.state.targetColor,onClick:function(){return e.updateTargetColor(t)}})})),E.a.createElement(Os,null),E.a.createElement(_s,{isEraser:!0,isActive:!this.state.moving&&!this.state.targetColor,onClick:this.updateTargetColor})),E.a.createElement(_s,{isClear:!0,onClick:this.clearCanvas}),this.state.showMovingControl&&E.a.createElement(js,{isActive:this.state.moving,onClick:this.handleSetMoving},this.state.showNavigationTooltip&&E.a.createElement(Ts,{onClick:function(e){return e.stopPropagation()}},E.a.createElement("p",null,"Press ",E.a.createElement("b",null,"Ctrl")," on Windows or ",E.a.createElement("b",null,"Cmd")," on Mac to navigate"),E.a.createElement(xs.a,{className:"checkbox-label",onChange:this.handleDontShow},E.a.createElement("span",{className:"checkbox-text"},"Dont show me it again")),E.a.createElement(H.Button,{onClick:this.handleCloseNotification},"Got It")))))}}]),i}(y.PureComponent),Es=k.default.canvas.withConfig({displayName:"WhiteBoard__Canvas",componentId:"sc-1ie8p50-0"})(["width:100%;height:calc(100% - ",");position:absolute;left:0;top:0;right:0;bottom:0;display:block;pointer-events:",";"],P.a,(function(e){return e.isMoving?"none":"all"})),Is=k.default.div.withConfig({displayName:"WhiteBoard__Controls",componentId:"sc-1ie8p50-1"})(["position:fixed;top:50%;left:15px;transform:translateY(-50%);width:31px;display:flex;flex-direction:column;align-items:center;"]),ks=k.default.div.withConfig({displayName:"WhiteBoard__Colors",componentId:"sc-1ie8p50-2"})(["background:rgba(0,0,0,0.5);border-radius:3px;display:flex;flex-direction:column;align-items:center;padding:5px 4px;width:100%;"]),_s=k.default.button.withConfig({displayName:"WhiteBoard__Color",componentId:"sc-1ie8p50-3"})(["width:19px;height:19px;border-radius:2px;cursor:pointer;transition:all .2s ease-out;padding:0;margin-bottom:8px;",";",";"],(function(e){var t=e.isEraser,i=e.isClear,n=e.background;return t?Object(k.css)(["background:url('./assets/img/transparent-icon.svg') no-repeat center;background-color:#B4C2C4;background-size:cover;margin-bottom:0;"]):i?Object(k.css)(["background:url('./assets/img/clear-draw-icon.svg') no-repeat center;background-size:19px;width:31px;height:31px;background-color:rgba(0,0,0,0.5);margin-top:8px;border-radius:3px;"]):Object(k.css)(["background-color:",";"],n)}),(function(e){return e.isActive?Object(k.css)(["border:2px solid;border-color:",""],(function(e){return"#fff"===e.background?"#B4C2C4":"#fff"})):Object(k.css)(["border:none;"])})),Os=k.default.div.withConfig({displayName:"WhiteBoard__Seporator",componentId:"sc-1ie8p50-4"})(["width:100%;background-color:#000;height:1px;margin-bottom:8px;"]),js=k.default.button.withConfig({displayName:"WhiteBoard__Movement",componentId:"sc-1ie8p50-5"})(["width:31px;height:31px;padding:0;border:none;border-radius:3px;margin-top:5px;background-size:19px;background-repeat:no-repeat;background-position:center center;cursor:pointer;position:relative;",";"],(function(e){return e.isActive?Object(k.css)(["background-color:#fff;background-image:url('./assets/img/movement-black-icon.svg');"]):Object(k.css)(["background-color:rgba(0,0,0,0.5);background-image:url('./assets/img/movement-white-icon.svg');"])})),Ts=k.default.div.withConfig({displayName:"WhiteBoard__NotificationTooltip",componentId:"sc-1ie8p50-6"})(["position:absolute;width:185px;padding:8px 12px;background-color:#fff;border-radius:4px;top:-40%;left:160%;cursor:default;text-align:left;&::after{position:absolute;content:'';display:block;width:0;height:0;border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:12px solid #fff;transform:rotate(-90deg) translateY(-100%);top:20px;left:0;}p{font-size:14px;line-height:19px;letter-spacing:0.01em;margin-top:0;margin-bottom:0;}.checkbox-text{letter-spacing:0.01em;font-size:14px;color:#496174;}.checkbox-label{margin-right:0;margin-top:0.4rem;margin-bottom:0.8rem;display:inline-flex;cursor:pointer;}"]),Ns=Object(I.connect)((function(e){return{socket:e.tourViewer.socket,localParticipantSid:e.tourViewer.localParticipantSid}}),null)(ys);function Vs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=h()(e);if(t){var o=h()(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return p()(this,i)}}var Ms=function(e){return{action:e.app.action,data:e.tourViewer.data,error:e.app.error,loading:e.tourViewer.loading,modal:e.tourViewer.modal,modalMeta:e.tourViewer.modalMeta,reelVisible:e.tourViewer.reelVisible,selectedImage:e.tourViewer.selectedImage,selectedAsset:e.tourEditor.selectedAsset,user:e.app.user,vr:e.tourViewer.vr,selectedInfospot:e.tourEditor.selectedInfospot,sound:e.app.sound,imageLoadingProgress:e.app.imageLoadingProgress,floorplanPanel:e.tourViewer.floorplanPanel,tourFloorplans:e.app.tourFloorplans,passwordEnteredAndValid:e.tourViewer.passwordEnteredAndValid,scheduleShowingForm:e.tourViewer.scheduleShowingForm,commonStr:e.app.localization.commonStr,viewerStr:e.app.localization.viewerStr,host:e.tourViewer.host,isStopTrackLive:e.tourViewer.isStopTrackLive,socket:e.tourViewer.socket,localParticipantSid:e.tourViewer.localParticipantSid,collection:e.tourViewer.collection,modalStr:e.app.localization.modalStr}},As=function(e){return{selectInfospot:function(t){return e(Object(cn.f)(t))},fetchTour:function(t){return e(function(e){return function(){var t=S()(w.a.mark((function t(i){var n,o,a,r,s;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.fetch("/api/tours/".concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(Object(Q.User)().token)}});case 2:return n=t.sent,t.next=5,n.json();case 5:if(o=t.sent,A()(o)){t.next=13;break}return"{}",a=V()(o,"config","{}")||"{}",r=JSON.parse(a),s={id:o.id||"invalid",shortId:o.shortId,name:o.name,logo:o.logo||!1,companyName:o.companyName,description:o.description,userId:o.userId,email:o.email,title:o.title,hideLogo:o.hideLogo,contacts:o.contacts&&JSON.parse(o.contacts)||{person:"",email:"",number:""},images:o.images&&JSON.parse(o.images),type:o.type,owner:o.owner,defaultHotspotStyle:o.defaultHotspotStyle||2,defaultHotspotImage:o.defaultHotspotImage||null,socialImage:o.socialImage||"https://".concat(Q.domain.production,"/api/meta/").concat(o.shortId,"/centerimage.png"),whiteLabelUrl:o.whiteLabelUrl,whiteLabelStatusCode:o.whiteLabelStatusCode,leadgen:o.leadgen&&JSON.parse(o.leadgen),ua:o.ua,privacy:o.privacy,config:{enableRibbon:!o.config||null==JSON.parse(o.config).enableRibbon||JSON.parse(o.config).enableRibbon,tinyPlanet:!(!o.config||null==JSON.parse(o.config).tinyPlanet)&&JSON.parse(o.config).tinyPlanet,hideRibbonAtStart:!(!o.config||null==JSON.parse(o.config).hideRibbonAtStart)&&JSON.parse(o.config).hideRibbonAtStart,audioHotspots:!(!o.config||null==JSON.parse(o.config).audioHotspots)&&JSON.parse(o.config).audioHotspots,lockHorizontalFov:!(!o.config||null==JSON.parse(o.config).lockHorizontalFov)&&JSON.parse(o.config).lockHorizontalFov,autoRotate:!o.config||null==JSON.parse(o.config).autoRotate||JSON.parse(o.config).autoRotate,autoRotateSpeed:o.config&&null!=JSON.parse(o.config).autoRotateSpeed&&JSON.parse(o.config).autoRotateSpeed,ambience:o.config&&null!=JSON.parse(o.config).ambience?JSON.parse(o.config).ambience:void 0,toggleHotspots:!(!o.config||null==JSON.parse(o.config).toggleHotspots)&&JSON.parse(o.config).toggleHotspots,isHideShareButton:r.isHideShareButton||!1,navigationMode:r.navigationMode,transitionType:r.transitionType,roomType:r.roomType||null,watermark:r.watermark||null},isVideoChatEnabled:o.isVideoChatEnabled,theme:o.theme||"classic",isNotifyEnabled:!!o.isNotifyEnabled||!1,isScheduleEnabled:!!o.isScheduleEnabled||!1,agentName:o.agentName||"",agentEmail:o.agentEmail||"",isLinkbackEnabled:!!o.isLinkbackEnabled||!1,isLiveHostEnabled:o.isLiveHostEnabled,liveHostTeamId:r.liveHostTeamId||null},i(Ue(s)),t.abrupt("return",s);case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},setTour:function(t){e(Ue(t))},openModal:function(t){e(We(t))},closeModal:function(){e(Je())},setReel:function(t){e(function(e){return{type:Be.u,reelVisible:e}}(t))},toggleReel:function(){e({type:Be.A})},hideReel:function(){e({type:Be.e})},toggleVR:function(){e({type:Be.B})},startAction:function(t){return e(Object(on.z)(t))},showErrorNotification:function(t){return e(Object(on.x)(t))},hideErrorNotification:function(){return e(Object(on.k)())},selectImage:function(t){e(function(e){return{type:Be.k,image:e}}(t))},share:function(){alert('<iframe onload="this.width=screen.width/2;this.height=screen.height/2;" src="'.concat(window.location.href,'"></iframe>'))},startLoad:function(){return e({type:Be.x})},loadSuccess:function(){return e({type:Be.f})},finishAction:function(){return e(Object(on.h)())},setUser:function(t){return e(Object(on.v)(t))},submitEmail:(t=S()(w.a.mark((function t(i){var n,o,a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.email,o=i.tour,!n.match(/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/)){t.next=12;break}return Object(on.z)((void 0).props.viewerStr.verifyngEmailPleaseWait),a=x()({},o,{email:n,type:"locked-with-email"}),e(Ue(a)),t.next=8,uploadValidTour(a)(e);case 8:t.sent?(e(Ue(a)),Object(on.h)()):console.log("Error updating tour"),t.next=13;break;case 12:alert((void 0).props.viewerStr.invalidEmail);case 13:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)}),dispatchError:function(t){return e(Object(on.x)({message:t}))},changeEmail:function(t){return e(Object(on.b)(t.target.value))},close:function(){return e(closePaymentsModal())},openShareAndEmbed:function(t){e({type:Be.s,meta:t}),e(We("shareAndEmbed"))},exitFree:function(){return e(Je())},exitPaid:function(t,i){return function(){var n=S()(w.a.mark((function n(o){var a;return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e(Object(on.z)(i)),a=x()({},t,{type:"paid"}),e(Ue(a)),n.next=5,fetch("/api/tours/".concat(t.id,"/unlock/paid"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(Object(Q.User)().token)}});case 5:e(Object(on.h)()),e(Je());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},setAmbienceAudio:function(t){return e(Object(on.setAmbienceAudio)(t))},setAmbiencePlaying:function(t,i){i.pause(),e(Object(on.s)(t,i))},toggleFloorplanPanel:function(){return e({type:Be.z})},fetchFloorplans:function(t){return e(Object(on.e)(t))},setFloorplanModalView:function(t){return e(Object(on.t)(t))},changeActiveTab:function(t){return e(Object(cn.a)(t))},setImageLoadingProgress:function(t){return e(Object(on.u)(t))},setPasswordEnteredAndValid:function(){return e({type:Be.t})},updateScheduleForm:function(t){return e(function(e){return{type:Be.C,data:e}}(t))},fetchCollection:function(t,i){return e(function(e,t){return function(){var i=S()(w.a.mark((function i(n){var o,a,r;return w.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,He(e);case 3:return o=i.sent,a=[].concat(Fe()(o.tours.map((function(e){return x()({},e,{images:JSON.parse(e.images)})}))),Fe()(o.gsvTours.map((function(e){return x()({},e,{images:JSON.parse(e.images).map((function(e){return x()({},e,{uploaded:!0})})),isGSV:!0})})))),n(Ge(x()({},o,{tours:a}))),r=t?a.find((function(e){return e.shortId===t})):a[0],n(qe(r||a[0])),i.abrupt("return",!0);case 11:return i.prev=11,i.t0=i.catch(0),i.abrupt("return",!1);case 14:case"end":return i.stop()}}),i,null,[[0,11]])})));return function(e){return i.apply(this,arguments)}}()}(t,i))},setCollectionTour:function(t){return e(qe(t))},setCpLiveUsername:function(t){return e(function(e){return{type:Be.o,username:e}}(t))},setSocket:function(t){return e(function(e){return{type:Be.v,socket:e}}(t))}};var t},Ls=!1,Ps=null,zs=function(e){d()(s,e);var t,i,n,a=Vs(s);function s(e){var t;return o()(this,s),t=a.call(this,e),g()(c()(t),"setAudio",(function(){t.props.setAmbiencePlaying(!0,t.props.sound.ambience.audio||new Audio("./assets/sound/ambience.mp3")),window.removeEventListener("click",t.setAudio),window.removeEventListener("keydown",t.setAudio)})),g()(c()(t),"componentDidUpdate",(function(e,i){var n;t.props.socket&&(null===(n=t.props.host)||void 0===n?void 0:n.sid)===t.props.localParticipantSid&&i.isWhiteBoardStarted!==t.state.isWhiteBoardStarted&&t.state.isWhiteBoardStarted&&t.props.socket.emit("on_draw_mode"),e.socket!==t.props.socket&&t.props.socket&&t.props.socket.on("on_draw_mode",t.handleSocketDrawModeStatus),t.props.tour.isGSV&&!t.state.gsvViewLocation&&e.imageLoadingProgress<=100&&100===t.props.imageLoadingProgress&&!t.props.loading?t.setState({showGsvNotPublishNotification:!0}):t.setState({showGsvNotPublishNotification:!1}),e.tour!==t.props.tour&&t.props.collection&&!t.props.tour.isGSV&&t.setSceneForCollectionTour()})),g()(c()(t),"toggleFullScreen",(function(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?t.exitFullscreen():t.setFullscreen()})),g()(c()(t),"runCpl",(function(){var e,i=t.props,n=i.user,o=i.tour,a=t.state.isVideoChatStarted;if(null===(e=t.viewer)||void 0===e||e.enableControl(0),!a){var r=!(null==n?void 0:n.token);(null==o?void 0:o.isLiveHostEnabled)||r?t.setState({isShowLiveJoinModal:!0}):t.setState((function(e){return{isVideoChatShow:!0,joinSettings:x()({},e.joinSettings,{userName:(null==n?void 0:n.name)||"User",isJoinAsGuest:r})}})),t.toggleUrlSearchParamShowVideoChat(!0)}})),g()(c()(t),"handleVideoChatJoin",function(){var e=S()(w.a.mark((function e(i){var n,o,a,r,s,c,l,d,u,p;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props,o=n.tour,a=n.user,r=!0,!(null==i?void 0:i.isJoinAsGuest)){e.next=7;break}return t.handleCloseLiveJoin(),s=x()({},i,{isHost:!1}),t.setState({joinSettings:s,isVideoChatShow:r}),e.abrupt("return");case 7:return c=(null==o?void 0:o.userId)===a.id,l=c,e.prev=9,e.next=12,ne.a(o.id);case 12:d=e.sent,u=d.hostIds,l=u.includes(a.id),t.setState({hostIds:u}),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(9),console.log(e.t0),t.setState({hostIds:[]});case 22:t.handleCloseLiveJoin(),p=x()({},i,{isHost:l}),t.setState({joinSettings:p,isVideoChatShow:r});case 25:case"end":return e.stop()}}),e,null,[[9,18]])})));return function(t){return e.apply(this,arguments)}}()),g()(c()(t),"findInitialViewOverride",(function(e){var i,n=t.props.selectedImage&&t.props.selectedImage.id;return e.initialViewOverrides&&e.initialViewOverrides.length>0&&(i=e.initialViewOverrides.filter((function(e){return e.id==n}))[0]),i})),g()(c()(t),"createAndSetupPanorama",(function(e,i){var n,o=t.checkIs2DImage(e);return n=t.props.tour&&t.props.tour.config.tinyPlanet?new window.PANOLENS.ImageLittlePlanet(i):o?new window.PANOLENS.SliderPanorama(i):new window.PANOLENS.ImagePanorama(i),t.props.tour&&!t.props.tour.config.tinyPlanet&&(t.addInfospotsToPanorama(e,n),t.addHotspotsToPanorama(e,n)),n})),g()(c()(t),"addInfospotsToPanorama",(function(e,i){var n=t.props.commonStr,o=t.spotsSizes(i).infospotSize;e.infospots&&e.infospots.length>0&&e.infospots.forEach((function(e){if(t.checkIsShouldAddSpot(i,e)){var a=Q.InfospotStyles[e.style]?Q.InfospotStyles[e.style]:e.style,r=new window.PANOLENS.Infospot(o,a);if(r.position.set(e.coords.x,e.coords.y,e.coords.z),"shrt"==e.dataType&&e.data)r.addHoverText(e.data);else if("ext"==e.dataType&&e.data){var s=Object(Q.convertStringToHtmlElement)(Object(Q.getExtendedInfospot)(e.data));r.addHoverElement(s,120)}else if("html"==e.dataType&&e.data){var l=V()(e,"data.previewText",n.clickToView)||n.clickToView;r.addHoverText(l),r.addEventListener("click",t.handleHtmlInfospotOpenByClick.bind(c()(t),e))}else if("image"==e.dataType){var d=V()(e,"data.previewText",n.clickToView);r.addHoverText(d||n.clickToView),r.addEventListener("click",t.handleHtmlInfospotOpenByClick.bind(c()(t),e))}else"hyperLink"==e.dataType&&e.data&&(r.addHoverText(e.data.previewText),r.addEventListener("click",(function(){var t=e.data.url.match("(https://*)|(http://*)")?e.data.url:"http://"+e.data.url;e.data.targetBlank?window.open(t,"_blank"):window.location.assign(t)})));r.addEventListener("hoverenter",(function(){t.props.tour.config.audioHotspots&&t.props.sound.hover.play()})),r.addEventListener("click",(function(){t.props.tour.config.audioHotspots&&t.props.sound.click.play()})),r.type="infospot",i.add(r)}}))})),g()(c()(t),"addHotspotsToPanorama",(function(e,i){var n=t.spotsSizes(i).hotspotSize;e.hotspots&&e.hotspots.length>0&&e.hotspots.forEach((function(e){if(t.checkIsShouldAddSpot(i,e)&&e.image){var o=e.style?e.style:t.props.tour.defaultHotspotStyle,a=new window.PANOLENS.Infospot(n,o==ue.m.HOTSPOT_PREVIEW_IMG?e.image.hotspotUrl:o==ue.m.WHITE_ARROW?"./assets/img/hotspot-icon-white.png":o==ue.m.BLACK_ARROW?"./assets/img/hotspot-icon-black.png":o==ue.m.CUSTOM_IMG?e.image.url:"./assets/img/hotspot-icon-white.png");e.rotation&&(a.material.rotation=e.rotation*Math.PI/180),a.position.set(e.coords.x,e.coords.y,e.coords.z),a.addHoverText(e.image&&e.image.title||"Scene"),a.addEventListener("hoverenter",(function(){t.props.tour.config.audioHotspots&&t.props.sound.hover.play()})),a.addEventListener("click",(function(){t.state.isDisabledControls||(t.setScene(Object(Q.withId)(t.props.tour.images)(e.image),null,null,!0),t.props.tour.config.audioHotspots&&t.props.sound.click.play())})),a.type="toScene",a.title=e.image.title,i.add(a)}}))})),g()(c()(t),"checkIsSkipSceneLoad",(function(e){var i=t.props,n=i.selectedImage,o=i.imageLoadingProgress,a=i.passwordEnteredAndValid,r=i.tour,s=i.user,c=i.loading,l=(null==n?void 0:n.url)===(null==e?void 0:e.url),d=100!==o||c,u=!a&&"Password"===r.privacy&&r.userId!==s.id;return l||d||u})),g()(c()(t),"initiateViewerEnvironment",(function(e){var i=t.state.isTourViewTypeLegacy,n=t.props.tour.config&&t.props.tour.config.autoRotate,o=Object(Q.getRotationSpeedForOrbitControls)(t.props.tour.config.autoRotateSpeed),a=V()(t.props,"tour.config.transitionType",null),r=t.calculateDefaultFovByTourType(i);t.viewerManager=t.createViewerManager({container:e,controlBar:!0,controlButtons:[],enableReticle:t.props.vr,autoHideInfospot:t.props.tour.config&&t.props.tour.config.toggleHotspots,defaultFov:r,horizontalView:t.props.tour.config&&t.props.tour.config.lockHorizontalFov,autoRotateActivationDuration:5e3,autoRotateSpeed:o,autoRotate:n,transitionParams:{type:a}}),t.viewer=t.createViewer(),t.isFirstViewerLoad=!0})),g()(c()(t),"createViewerManager",(function(e){return new window.PANOLENS.ViewerManager(x()({},e))})),g()(c()(t),"createViewer",(function(e){var i=t.calculateSceneFov();return new window.PANOLENS.Viewer(x()({},t.viewerManager.options,{cameraFov:i},e))})),g()(c()(t),"calculateSceneFov",(function(){var e=t.state.isTourViewTypeLegacy,i=t.calculateDefaultFovByTourType(e),n=t.props.selectedImage||t.props.tour.images[0];return V()(n,"cameraZoom",i)})),g()(c()(t),"clearViewerPanoramaResources",(function(){t.viewer.panorama&&t.viewer.panorama.children&&t.viewer.panorama.children.map((function(e){e.removeHoverElement&&e.removeHoverElement(),e.hide()}))})),g()(c()(t),"spotsSizes",(function(e){var i=t.state.isTourViewTypeLegacy,n=t.checkIsSliderPanorama(e),o=t.spotSizesByTourTypeAndNavigator(i),a=n?.2:o;if(Q.mobileNavigator)return{hotspotSize:a,infospotSize:a};var r=n?.09:o;return{hotspotSize:r,infospotSize:r}})),g()(c()(t),"spotSizesByTourTypeAndNavigator",(function(e){return Q.mobileNavigator?e?ue.D.LEGACY.MOBILE:ue.D.MODERN.MOBILE:e?ue.D.LEGACY.DESKTOP:ue.D.MODERN.DESKTOP})),g()(c()(t),"checkIs2DImage",(function(e){return!!(V()(e,"is2D",!1)||!1)})),g()(c()(t),"checkIsSliderPanorama",(function(e){return V()(e,"subtype",null)===ue.r.SLIDER})),g()(c()(t),"checkIsShouldAddSpot",(function(e,i){var n=V()(i,"subtype",ue.E[360]),o=t.checkIsSliderPanorama(e),a=n===ue.E["2D"];return o&&a||!o&&!a})),g()(c()(t),"manageAutoRotationByPanoramaSubtype",(function(e){var i=t.state.isVideoChatStarted,n=t.props.tour.config&&t.props.tour.config.autoRotate;i||e?t.viewer.disableAutoRate():i||!n||e||t.viewer.enableAutoRate()})),g()(c()(t),"handleSetTokens",(function(e){return t.setState({stripeTokens:e})})),g()(c()(t),"addSceneIdToUrl",(function(e){var t=new URLSearchParams(L.history.location.search);t.delete("sceneId"),e&&t.set("sceneId",e);var i=t.toString();-1===L.history.location.pathname.indexOf("/edit")&&L.history.replace({pathname:L.history.location.pathname,search:i?"?".concat(i):null})})),g()(c()(t),"handleSelectTour",(function(e,i){var n=t.props,o=n.setCollectionTour,a=n.selectImage,r=n.tour,s=n.collection,c=n.imageLoadingProgress;if(r.shortId!==e.shortId&&100===c){e.isGSV?t.handleOpenGsv(e):(a(null),o(e));var l=new URLSearchParams(L.history.location.search);l.delete("sceneId"),l.delete("shortId"),e.shortId!==s.tours[0].shortId&&l.set("shortId",e.shortId);var d=l.toString();L.history.replace({pathname:L.history.location.pathname,search:d?"?".concat(d):null})}})),g()(c()(t),"setMessageChatStatus",(function(e){var i="boolean"==typeof e?e:!t.state.isMessageChatShow;t.setState({isMessageChatShow:i})})),g()(c()(t),"handleCloseLiveJoin",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.setState({isShowLiveJoinModal:!1}),e&&t.toggleUrlSearchParamShowVideoChat(!1)})),g()(c()(t),"resetJoinSettings",(function(){t.setState({isVideoChatShow:!1,joinSettings:{userName:"",isVideoEnabled:!0,isAudioEnabled:!0,isHost:!1,isJoinAsGuest:!0}})})),g()(c()(t),"showMeetingEndModal",(function(){var e=t.props.tour,i=t.state.isInitiatorMeetingEnd;(null==e?void 0:e.isLiveHostEnabled)&&!i&&t.setState({isShowMeetingEndModal:!0})})),g()(c()(t),"handleCloseMeetingEndModal",(function(){t.setState({isShowMeetingEndModal:!1})})),g()(c()(t),"setIsInitiatorMeetingEnd",(function(e){t.setState({isInitiatorMeetingEnd:e})})),g()(c()(t),"handleOpenScheduleModal",(function(e){t.handleCloseLiveJoin(),t.props.updateScheduleForm(x()({},t.props.scheduleShowingForm,{name:e})),t.props.openModal("request-showing-tour")})),g()(c()(t),"handleCloseCpl",(function(){t.resetJoinSettings(),t.toggleUrlSearchParamShowVideoChat(!1)})),g()(c()(t),"setWhiteBoardStatus",(function(e){var i=void 0!==e?e:!t.state.isWhiteBoardStarted;t.setState({isWhiteBoardStarted:i})})),g()(c()(t),"handleSocketDrawModeStatus",(function(){t.state.isWhiteBoardStarted||t.setState({isWhiteBoardStarted:!0})})),g()(c()(t),"handleOpenGsv",(function(e){for(var i=null,n=0;e.images.length>n;n++)if(e.images[n].photoObj){var o=e.images[n].photoObj.config.data.pose.latLngPair;i={lat:o.latitude,lng:o.longitude};break}i?(t.props.selectImage(null),t.props.setCollectionTour(e),t.setState({gsvViewLocation:i})):(t.props.selectImage(null),t.props.setCollectionTour(e),t.setScene(e.images[0]))})),g()(c()(t),"setSceneForCollectionTour",(function(){var e=new URLSearchParams(L.history.location.search).get("sceneId"),i=e?t.props.tour.images.find((function(t){return t.id===e})):Object(Q.getViewerRibbonImages)(t.props.tour.images)[0],n=i||(t.props.tour.images.length?t.props.tour.images[0]:null);t.setScene(n)})),t.state={redirect:!1,isDisabledControls:!1,isHideTourViewerControls:!1,isVideoChatStarted:!1,isVideoChatIconHide:!1,isVideoChatShow:!1,isMessageChatShow:!1,selectedInfospotId:null,stripeTokens:null,isTourViewTypeLegacy:!1,isShowLiveJoinModal:!1,joinSettings:{userName:"",isVideoEnabled:!0,isAudioEnabled:!0,isHost:!1,isJoinAsGuest:!0},isShowMeetingEndModal:!1,isInitiatorMeetingEnd:!1,hostIds:[],isWhiteBoardStarted:!1,gsvViewLocation:null,showGsvNotPublishNotification:!1},t}return r()(s,[{key:"initializeCustomUserAnalytics",value:function(e,t){e&&(0===e.toUpperCase().indexOf("UA-")?(T.a.initialize(e),T.a.pageview(t)):0===e.toUpperCase().indexOf("G-")&&window.gtag&&gtag("config",e))}},{key:"componentWillUnmount",value:function(){this.props.selectImage(null),-1!=window.location.pathname.indexOf("browse")&&this.props.setAmbiencePlaying(!1,this.props.sound.ambience.audio||new Audio("https://bigdatahomes.blob.core.windows.net/assets/ambience/".concat(this.props.tour.config.ambience,".mp3"))),this.viewer&&this.viewer.panorama&&this.viewer.panorama.dispose(),this.viewer&&this.viewer.panorama&&this.viewer.panorama.map&&this.viewer.panorama.dispose(),this.viewer&&this.viewer.renderer.dispose(),this.viewer&&this.viewer.renderer.forceContextLoss(),this.viewer=null,this.setDriftVisibilityStatus(!0)}},{key:"componentDidMount",value:(n=S()(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("fullscreenchange",this.onFullScreenChange.bind(this),!1),window.addEventListener("webkitfullscreenchange",this.onFullScreenChange.bind(this),!1),window.addEventListener("mozfullscreenchange",this.onFullScreenChange.bind(this),!1),-1!=window.location.search.indexOf("mls=1")&&(this.mlsCompliant=!0),this.props.setTour(this.props.tour),e.next=7,this.runMountingActivities();case 7:V()(this.props,"tour.isVideoChatEnabled",!1)&&-1!==window.location.search.indexOf("showVideoChat=1")&&this.runCpl(),t=this.isTourViewTypeLegacy(this.props.tour),this.setState({isTourViewTypeLegacy:t});case 11:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"runMountingActivities",value:(i=S()(w.a.mark((function e(){var t,i,n,o=this;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.addEventListener("resize",(function(){o.viewer.onWindowResize(o.pano.offsetWidth,o.pano.offsetHeight);var e=o;setTimeout((function(){e.viewer.onWindowResize(e.pano.offsetWidth,e.pano.offsetHeight)}),200)})),"invalid"!==this.props.tour.id){e.next=3;break}return e.abrupt("return");case 3:if(!(this.props.tour.images.length>0)||this.props.tour.isGSV){e.next=11;break}return t=Object(Q.getViewerRibbonImages)(this.props.tour.images)[0],i=new URLSearchParams(L.history.location.search),(n=i.get("sceneId"))&&this.props.tour.images.length&&(t=this.props.tour.images.find((function(e){return e.id===n}))||t),e.next=10,this.setScene(t||(this.props.tour.images.length?this.props.tour.images[0]:null));case 10:this.props.tour.images.forEach((function(e){(new Image).src=e.url}));case 11:if(this.props.tour.config.ambience&&(window.addEventListener("click",this.setAudio),window.addEventListener("keydown",this.setAudio)),(this.props.tour.config.hideRibbonAtStart&&this.props.reelVisible||!this.props.tour.config.hideRibbonAtStart&&!this.props.reelVisible)&&this.props.toggleReel(),!this.props.tour){e.next=20;break}if(!this.props.preview){e.next=16;break}return e.abrupt("return");case 16:this.initializeCustomUserAnalytics(this.props.tour.ua,this.props.tour.title),document.title="360 Tour - "+this.props.tour.title,this.checkLockStatus(),this.props.fetchFloorplans(this.props.tour);case 20:window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",this.handleOrientation,!1);case 21:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"checkLockStatus",value:function(){"locked"===this.props.tour.type&&this.props.tour.owner&&(this.props.tour.userId==this.props.user.id?2===this.props.tour.owner.type?this.props.openShareAndEmbed(this.props.tour):this.props.openModal("payments"):this.props.openModal("locked-tour"))}},{key:"handleOrientation",value:function(e){Ps=e}},{key:"setCameraForStreaming",value:(t=S()(w.a.mark((function e(t,i,n,o){var a,r,s,c,l,d,u,p=this;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.state.isTourViewTypeLegacy,o===this.props.tour.shortId){e.next=4;break}return this.handleSelectTour(this.props.collection.tours.find((function(e){return e.shortId===o})),i),e.abrupt("return");case 4:if(!this.props.tour.isGSV||i===(null===(a=this.props.selectedImage)||void 0===a?void 0:a.shortId)){e.next=8;break}return c=this.props.tour.images.filter((function(e){return e.shortId===i}))[0],this.setScene(c,t,n),e.abrupt("return");case 8:if(this.props.tour.isGSV||i===(null===(r=this.props.selectedImage)||void 0===r?void 0:r.id)){e.next=12;break}return l=this.props.tour.images.filter((function(e){return e.id===i}))[0],this.setScene(l,t,n),e.abrupt("return");case 12:s?(this.viewer.camera.position.set(t.x,t.y,t.z),this.viewer.control.update()):this.viewer.control.centerTo(t.h,t.v),d={fov:this.viewer.camera.fov},u=new TWEEN.Tween(d).to({fov:n},100).easing(TWEEN.Easing.Exponential.Out).onUpdate((function(){p.viewer.setCameraFov(d.fov)})),this.viewer.camera.fov!==n&&u.start();case 16:case"end":return e.stop()}}),e,this)}))),function(e,i,n,o){return t.apply(this,arguments)})},{key:"exitFullscreen",value:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}},{key:"setFullscreen",value:function(){this.panoContainer.requestFullscreen&&this.panoContainer.requestFullscreen(),this.panoContainer.msRequestFullscreen&&this.panoContainer.msRequestFullscreen(),this.panoContainer.mozRequestFullScreen&&this.panoContainer.mozRequestFullScreen(),this.panoContainer.webkitRequestFullscreen&&this.panoContainer.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}},{key:"onFullScreenChange",value:function(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?(this.panoContainer.style.left=0,this.panoContainer.style.top=0,this.pano.style.top=0,this.pano.style.left=0,this.pano.style.width="100%",this.pano.style.height="100%",this.viewer.onWindowResize(this.pano.offsetWidth,this.pano.offsetHeight)):(this.pano.style.top="unset",this.pano.style.left="unset",this.panoContainer.style.top="unset",this.panoContainer.style.left="unset",this.pano.style.width=this.props.preview?"70vw":"100%",this.pano.style.height=this.props.preview?"70vh":"100%",this.viewer.onWindowResize(this.pano.offsetWidth,this.pano.offsetHeight))}},{key:"toggleVR",value:function(){this.props.toggleVR(),this.props.vr?(this.exitFullscreen(),this.viewer.disableEffect(),Q.mobileNavigator&&(Ls=!1,this.viewer.enableControl(0))):(this.setFullscreen(),this.viewer.camera.fov=1.1*this.viewer.camera.fov,this.viewer.enableEffect(PANOLENS.MODES.CARDBOARD),Q.mobileNavigator&&(Ls||this.toggleMotionConrol()),this.viewer.enableReticleControl())}},{key:"toggleUrlSearchParamShowVideoChat",value:function(e){var t=V()(this.props,"location.pathname",null),i=V()(this.props,"location.search",""),n=new URLSearchParams(i);e?n.set("showVideoChat",1):n.delete("showVideoChat");var o=n.toString();L.history.replace({pathname:t,search:o?"?".concat(o):null})}},{key:"toggleVideoChatView",value:function(){var e=this,t=this.state.isVideoChatStarted;this.viewer&&this.viewer.enableControl(0),t||this.setState((function(t){var i=!t.isVideoChatShow;return e.toggleUrlSearchParamShowVideoChat(i),{isVideoChatShow:i}}))}},{key:"toggleHideTourViewerControls",value:function(){this.setState((function(e){return{isHideTourViewerControls:!e.isHideTourViewerControls}}),this.toggleUIControls)}},{key:"setHideTourViewerControlsByChatStatus",value:function(){var e=this.state.isVideoChatStarted;this.setState({isHideTourViewerControls:e},this.toggleUIControls)}},{key:"setDriftVisibilityStatusByChatStatus",value:function(){var e=this.state.isVideoChatStarted;this.setDriftVisibilityStatus(!e)}},{key:"setDriftVisibilityStatus",value:function(e){try{var t=document.getElementById("drift-widget");if(!t)return;e&&!this.state.isVideoChatStarted?t.classList.remove("drift-widget--hide-controls"):t.classList.add("drift-widget--hide-controls")}catch(e){console.log(e)}}},{key:"toggleUIControls",value:function(){var e=this.state.isHideTourViewerControls;(0,this.props.setReel)(!e),this.setDriftVisibilityStatus(!e)}},{key:"setViewerAutorotateStatus",value:function(e){var t=this.props.selectedImage,i=V()(this.props,"tour.config.autoRotate",!1),n=this.checkIs2DImage(t);"boolean"==typeof e&&this.viewer&&this.viewer.OrbitControls&&(e&&i&&!n?this.viewer.enableAutoRate():this.viewer.disableAutoRate())}},{key:"setViewerAutorotateStatusByChatStatus",value:function(){var e=this.state.isVideoChatStarted;this.setViewerAutorotateStatus(!e)}},{key:"setVideoChatStatus",value:function(e){"boolean"==typeof e&&this.setState({isVideoChatStarted:e,isVideoChatShow:e},this.postProcessingSetVideoChatStatus)}},{key:"postProcessingSetVideoChatStatus",value:function(){var e=this.state.isVideoChatStarted;this.setViewerAutorotateStatusByChatStatus(),this.setHideTourViewerControlsByChatStatus(),this.setDriftVisibilityStatusByChatStatus(),e||this.toggleUrlSearchParamShowVideoChat(e)}},{key:"handleHtmlInfospotOpen",value:function(e){e&&(this.props.selectInfospot(e),this.props.openModal("htmlInfospotModal"));var t=V()(e,"id",null);this.setState({selectedInfospotId:t})}},{key:"handleHtmlInfospotOpenByClick",value:function(e){this.state.isDisabledControls||this.handleHtmlInfospotOpen(e)}},{key:"handleHtmlInfospotClose",value:function(){this.setState({selectedInfospotId:null}),this.props.closeModal()}},{key:"handleHtmlInfospotCloseByClick",value:function(){this.state.isDisabledControls||this.handleHtmlInfospotClose()}},{key:"setSelectedHtmlInfospot",value:function(e){var t="htmlInfospotModal"===V()(this.props,"modal",null);e||!t?this.handleHtmlInfospotOpen(e):this.handleHtmlInfospotClose()}},{key:"setScene",value:function(e,t,i){var n=this,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=this.checkIsSkipSceneLoad(e);if(!a){if(this.props.startLoad(),null==e||e&&!e.uploaded){var r=new window.PANOLENS.BasicPanorama;return this.props.selectImage(e),void(this.viewer&&(this.clearViewerPanoramaResources(),this.viewer=this.createViewer(),this.viewer.add(r),this.viewerManager.add(this.viewer),this.viewerManager.setScene(this.viewer)))}var s=Object(Q.getViewerRibbonImages)(this.props.tour.images);this.addSceneIdToUrl(s[0].id!==e.id?e.id:null),PANOLENS.ImageLoader.load(e.url,(function(a){var r,s;if(a.width){var c=n.findInitialViewOverride(e),l=n.createAndSetupPanorama(e,a);if(a.src){var d=V()(n.props,"selectedImage",null),u=V()(d,"is2D",!1),p=V()(d,"cameraPosition",x()({},ue.b.POSITION)),m=V()(d,"rotationInitialView",x()({},ue.b.ROTATION)),h=V()(d,"rotationNorthPoint",x()({},ue.b.ROTATION)),f=V()(n.viewer,"camera.position",x()({},ue.b.POSITION)),g=(null===(r=n.viewer)||void 0===r||null===(s=r.control)||void 0===s?void 0:s.getRotations())||x()({},ue.b.ROTATION);n.props.selectImage(e);var b=x()({},e,{isInitiatorInfospot:o,forceCoords:t,forceFov:i,initialViewOverride:c,prevImageIs2D:u,prevCameraPosition:p,prevRotationInitialView:m,prevRotationNorthPoint:h,prevCurrentCameraPosition:f,prevCurrentRotation:g});n.isFirstViewerLoad||(n.clearViewerPanoramaResources(),n.viewer=n.createViewer()),n.isFirstViewerLoad=!1,n.addPanormaAndSetScene(l,b),n.props.loadSuccess(),n.state.gsvViewLocation&&n.setState({gsvViewLocation:null})}}}),(function(e){n.props.setImageLoadingProgress(e.loaded/e.total*100)}),(function(e){return n.handleSetSceneError(e)}))}}},{key:"handleSetSceneError",value:function(e){console.log("Error:",e),this.setScene(null)}},{key:"addPanormaAndSetScene",value:function(e,t){var i=this.state.isTourViewTypeLegacy,n=this.checkIs2DImage(t);if(this.viewer.add(e),i){var o=t.initialViewOverride,a=t.cameraPosition,r=V()(o,"cameraPosition",a);this.setCameraPosition(r)}else{var s=this.calculateRotationByNavigationMode(t);this.setCameraRotation(s)}this.manageAutoRotationByPanoramaSubtype(n),this.viewer.control.noRotate=n,this.viewerManager.add(this.viewer),this.viewerManager.setScene(this.viewer,t.isInitiatorInfospot)}},{key:"calculateRotationByNavigationMode",value:function(e){switch(V()(this.props,"tour.config.navigationMode",ue.n.INITIAL_VIEW)){case ue.n.HYBRID:return this.calculateRotationForHybridMode(e);case ue.n.NORTH_POINT:return this.calculateRotationForNorthPointMode(e);case ue.n.INITIAL_VIEW:default:return this.calculateRotationForInitialViewMode(e)}}},{key:"calculateRotationForInitialViewMode",value:function(e){var t=e.rotationInitialView||x()({},ue.b.ROTATION);return this.viewer.camera.type="initial",t}},{key:"calculateRotationForNorthPointMode",value:function(e){var t=e.prevRotationNorthPoint,i=e.prevCurrentRotation,n=e.prevImageIs2D,o=V()(e,"rotationNorthPoint",x()({},ue.b.ROTATION));if(this.viewer.camera.type="north",!n){var a=t.h-o.h;return{h:i.h-a,v:i.v}}return{h:o.h,v:o.v}}},{key:"calculateRotationForHybridMode",value:function(e){return V()(e,"isInitiatorInfospot",!1)?this.calculateRotationForNorthPointMode(e):this.calculateRotationForInitialViewMode(e)}},{key:"isTourViewTypeLegacy",value:function(e){return V()(e,"images",[]).some((function(e){return!!e.cameraPosition}))}},{key:"setCameraPosition",value:function(e,t){var i=t||this.viewer,n=A()(e)?x()({},ue.b.POSITION):e;i.camera.type="initial",i.camera.position.set(n.x,n.y,n.z)}},{key:"setCameraRotation",value:function(e,t){var i=this.props.selectedImage||this.props.tour.images[0];if(!this.checkIs2DImage(i)){var n=t||this.viewer,o=e||x()({},ue.b.ROTATION);n.control.centerTo(o.h,o.v)}}},{key:"setCameraFov",value:function(e){this.viewer&&this.viewer.setCameraFov(e)}},{key:"setCameraToView",value:function(e){var t=x()({},ue.b.POSITION),i=ue.b.FOV;t=e.forceCoords?e.forceCoords:V()(e,"cameraPosition",null),i=e.forceFov?e.forceFov:V()(e,"cameraZoom",ue.b.FOV)||ue.b.FOV,this.setCameraPosition(t),this.setCameraFov(i)}},{key:"reenableVR",value:function(){this.props.vr&&this.viewer.enableEffect(PANOLENS.MODES.CARDBOARD)}},{key:"setPanoContainerRef",value:function(e){e&&(this.panoContainer=e)}},{key:"setPanoRef",value:function(e){e&&this.props.selectedImage&&!this.viewer&&(this.pano=e,this.initiateViewerEnvironment(this.pano))}},{key:"calculateDefaultFovByTourType",value:function(e){return e?ue.b.FOV:ue.b.FOV_MODERN}},{key:"setDisableViewerOrbitControls",value:function(){this.viewer&&this.viewer.OrbitControls&&this.viewer.OrbitControls.enabled&&this.viewerManager.setControlEnabled(!1)}},{key:"setEnableViewerOrbitControls",value:function(){this.viewer&&this.viewer.OrbitControls&&!this.viewer.OrbitControls.enabled&&this.viewerManager.setControlEnabled(!0)}},{key:"setDisableViewerSphericalControls",value:function(){this.viewer&&this.viewer.SphericalControls&&this.viewer.SphericalControls.enabled&&(this.viewer.SphericalControls.enabled=!1)}},{key:"setEnableViewerSphericalControls",value:function(){this.viewer&&this.viewer.SphericalControls&&!this.viewer.SphericalControls.enabled&&(this.viewer.SphericalControls.enabled=!0)}},{key:"setDisableControls",value:function(){this.setDisableViewerOrbitControls(),this.setDisableViewerSphericalControls(),this.setState({isDisabledControls:!0})}},{key:"setEnableControls",value:function(){this.setEnableViewerOrbitControls(),this.setEnableViewerSphericalControls(),this.setState({isDisabledControls:!1})}},{key:"selectNextImage",value:function(){var e=this,t="undefined"!==this.props.selectedImage.hideFromRibbon&&this.props.selectedImage.hideFromRibbon,i=Object(Q.getViewerRibbonImages)(this.props.tour.images),n=t?[this.props.selectedImage]:i.filter((function(t){return t.id===e.props.selectedImage.id})),o=Object(Q.indexById)(t?this.props.tour.images:i)(n[0])+1;o<(t?this.props.tour.images.length:i.length)&&this.setScene(t?this.props.tour.images[o]:i[o])}},{key:"selectPreviousImage",value:function(){var e=this,t="undefined"!==this.props.selectedImage.hideFromRibbon&&this.props.selectedImage.hideFromRibbon,i=Object(Q.getViewerRibbonImages)(this.props.tour.images),n=t?[this.props.selectedImage]:i.filter((function(t){return t.id===e.props.selectedImage.id})),o=Object(Q.indexById)(t?this.props.tour.images:i)(n[0])-1;o>=0&&this.setScene(t?this.props.tour.images[o]:i[o])}},{key:"toggleMotionConrol",value:function(){var e=this;(Ls=!Ls)?Ps?this.viewer.enableControl(1):window.DeviceOrientationEvent&&"function"==typeof window.DeviceOrientationEvent.requestPermission?window.DeviceOrientationEvent.requestPermission().then((function(t){"granted"==t&&(Ps=!0,e.viewer.enableControl(1)),"granted"!=t&&(e.props.dispatchError(e.props.viewerStr.weCantReadMotionFrom),Ls=!1)})).catch((function(){e.props.dispatchError(e.props.viewerStr.weCantReadMotionFrom),Ls=!1})):(this.props.dispatchError(this.props.viewerStr.weCantReadMotionFrom),Ls=!1):("device-orientation"===this.viewer.control.id&&this.viewer.enableControl(0),Ls=!1)}},{key:"lastImage",value:function(){var e=this;if(this.props.tour.isGSV)return!0;if(this.props.selectedImage){if(this.props.tour.images){var t="undefined"!==this.props.selectedImage.hideFromRibbon&&this.props.selectedImage.hideFromRibbon,i=Object(Q.getViewerRibbonImages)(this.props.tour.images);if(!i.length&&this.props.tour.images.length)return!0;var n=t?[this.props.selectedImage]:i.filter((function(t){return t.id===e.props.selectedImage.id}));return Object(Q.indexById)(t?this.props.tour.images:i)(n[0])+1>=(t?this.props.tour.images.length:i.length)}return!1}}},{key:"firstImage",value:function(){var e=this;if(this.props.tour.isGSV)return!0;if(this.props.selectedImage){if(this.props.tour.images){var t="undefined"!==this.props.selectedImage.hideFromRibbon&&this.props.selectedImage.hideFromRibbon,i=Object(Q.getViewerRibbonImages)(this.props.tour.images);if(!i.length&&this.props.tour.images.length)return!0;var n=t?[this.props.selectedImage]:i.filter((function(t){return t.id===e.props.selectedImage.id}));return Object(Q.indexById)(t?this.props.tour.images:i)(n[0])-1<0}return!1}}},{key:"toggleAmbience",value:function(){this.sound.ambience&&this.sound.ambience.audio&&!this.sound.ambience.playing?(this.sound.ambience.playing=!0,this.sound.ambience.audio.play().loop()):(this.sound.ambience.playing=!1,this.sound.ambience.audio.pause())}},{key:"render",value:function(){var e,t,i,n,o,a,r,s,c,l,d,u,p,m=this,h=this.state,f=h.isShowLiveJoinModal,g=h.isShowMeetingEndModal,b=h.hostIds,w=window.location.hostname.toLowerCase(),v=w!==Q.domain.production.replace(":".concat(window.location.port),""),C=(v&&void 0!==this.props.tour.whiteLabelUrl&&this.props.tour.whiteLabelUrl,v&&this.props.tour.whiteLabelUrl&&this.props.tour.whiteLabelUrl.trim().toLowerCase(),Ae(null===(e=this.props.collection)||void 0===e?void 0:e.shortId,null===(t=this.props.tour)||void 0===t?void 0:t.shortId)),S=this.props.tour.isGSV&&!this.state.gsvViewLocation?[this.props.tour.images[0]]:this.props.tour.isGSV&&this.state.gsvViewLocation?[]:this.props.tour.images,y=V()(this.props,"tour.isVideoChatEnabled",!1),I=this.state,k=I.isMessageChatShow,_=I.isWhiteBoardStarted;return"Password"!=this.props.tour.privacy||this.props.passwordEnteredAndValid||this.props.tour.userId==this.props.user.id?E.a.createElement(Ws,{isChat:k},E.a.createElement(B.a,{watermark:null===(i=this.props.tour.config)||void 0===i?void 0:i.watermark,reelVisible:this.props.reelVisible,isTourViewer:!0}),Ps&&Q.mobileNavigator&&Ls?E.a.createElement(Ds,null,E.a.createElement(Fs,{src:"./assets/img/rotate-mobile.png"}),E.a.createElement("div",null,this.props.viewerStr.moveOrTapYourPhone)):null,!Ps&&Q.mobileNavigator?E.a.createElement(Ds,null,E.a.createElement(Fs,{src:"./assets/img/rotate-mobile.png"}),E.a.createElement("div",null,this.props.viewerStr.tapYourPhoneToExplore)):null,Q.mobileNavigator?null:E.a.createElement(Ds,null,E.a.createElement(Hs,{src:"./assets/img/rotate-desktop.png"}),E.a.createElement("div",null,this.props.viewerStr.clickAndDragMouseToExplore)),E.a.createElement("div",{ref:this.setPanoContainerRef.bind(this)},E.a.createElement("title",null,this.props.tour.title?this.props.tour.title:this.props.commonStr.title),this.props.preview?null:E.a.createElement("div",null,y&&this.state.isVideoChatShow&&E.a.createElement(Ni,{tourId:this.props.tour&&this.props.tour.id,tourShortId:this.props.tour&&this.props.tour.shortId,sceneId:this.props.selectedImage&&(this.props.selectedImage.id||this.props.selectedImage.shortId),setCameraForStreaming:function(e,t,i,n){return m.setCameraForStreaming(e,t,i,n)},viewer:this.viewer,setEnableControls:this.setEnableControls.bind(this),setDisableControls:this.setDisableControls.bind(this),setVideoChatStatus:this.setVideoChatStatus.bind(this),viewerProps:this.props,user:this.props.user,selectedInfospotId:this.state.selectedInfospotId,setSelectedHtmlInfospot:this.setSelectedHtmlInfospot.bind(this),isTourViewTypeLegacy:this.state.isTourViewTypeLegacy,setCpLiveUsername:this.props.setCpLiveUsername,isMessageChatShow:k,setMessageChatStatus:this.setMessageChatStatus,toggleHideTourViewerControls:this.toggleHideTourViewerControls.bind(this),isHideTourViewerControls:this.state.isHideTourViewerControls,joinSettings:this.state.joinSettings,isLiveHostEnabled:this.props.tour.isLiveHostEnabled,resetJoinSettings:this.resetJoinSettings,showMeetingEndModal:this.showMeetingEndModal,isHostnameNotTheSame:v,setIsInitiatorMeetingEnd:this.setIsInitiatorMeetingEnd,hostIds:b,tourTitle:this.props.tour&&this.props.tour.title,close:this.handleCloseCpl,isWhiteBoardStarted:_,setWhiteBoardStatus:this.setWhiteBoardStatus,collectionId:null===(n=this.props.collection)||void 0===n?void 0:n.shortId}),E.a.createElement(bo,x()({},this.props,{setFullscreen:this.setFullscreen.bind(this),toggleFullScreen:this.toggleFullScreen,toggleMotionConrol:this.toggleMotionConrol.bind(this),toggleVR:this.toggleVR.bind(this),toggleVideoChatView:this.toggleVideoChatView.bind(this),runCpl:this.runCpl,toggleHideTourViewerControls:this.toggleHideTourViewerControls.bind(this),mlsCompliant:this.mlsCompliant,isVideoChatStarted:this.state.isVideoChatStarted,isDisabled:this.state.isDisabledControls,isHideTourViewerControls:this.state.isHideTourViewerControls,isMessageChatShow:k,isReelVisible:this.props.reelVisible,theme:this.props.tour.theme,hasCollection:this.props.collection}))),this.props.vr||this.mlsCompliant||this.state.isHideTourViewerControls||this.state.isVideoChatStarted?null:E.a.createElement(bn,{isCascade:"cascade"===this.props.tour.theme},Bs(this.props.tour),E.a.createElement(vn,null,E.a.createElement(xn,null,this.props.tour.contacts&&this.props.tour.contacts.person),E.a.createElement(Cn,{onClick:function(){return window.open("tel:".concat(m.props.tour.contacts&&m.props.tour.contacts.number))}},this.props.tour.contacts&&this.props.tour.contacts.number),E.a.createElement(Cn,{onClick:function(){return window.open("mailto:".concat(m.props.tour.contacts&&m.props.tour.contacts.email))}},this.props.tour.contacts&&this.props.tour.contacts.email))),this.props.tour.config&&this.props.tour.config.enableRibbon?E.a.createElement("div",null,this.props.tour&&this.props.tour.theme&&"classic"===this.props.tour.theme?E.a.createElement("div",null,this.lastImage.bind(this)()?null:E.a.createElement(In,{large:!0,reelvisible:this.props.reelVisible?1:0,onClick:this.selectNextImage.bind(this),disabled:this.state.isDisabledControls,hasCollection:Boolean(this.props.collection),isChat:k,isVideoChatStarted:this.state.isVideoChatStarted}),this.firstImage.bind(this)()?null:E.a.createElement(kn,{large:!0,reelvisible:this.props.reelVisible?1:0,onClick:this.selectPreviousImage.bind(this),disabled:this.state.isDisabledControls,hasCollection:Boolean(this.props.collection),isChat:k,isVideoChatStarted:this.state.isVideoChatStarted}),this.props.vr?null:E.a.createElement(Sn,{visible:this.props.reelVisible,hasCollection:Boolean(this.props.collection),isChat:k,isVideoChatStarted:this.state.isVideoChatStarted},E.a.createElement(yn,{reelvisible:this.props.reelVisible,onClick:this.props.toggleReel}),E.a.createElement(zn,{visible:this.props.reelVisible,hasCollection:Boolean(this.props.collection),hasImages:Boolean(S.length)},S&&Object(Q.getViewerRibbonImages)(S).map((function(e){return E.a.createElement(On,{key:e.id,isDisabled:m.state.isDisabledControls,hasCollection:Boolean(m.props.collection),isActive:m.props.selectedImage&&e.url===m.props.selectedImage.url,id:m.props.selectedImage&&e.url===m.props.selectedImage.url&&"active-scene"},E.a.createElement(Tn,{hasCollection:Boolean(m.props.collection)},E.a.createElement(Nn,null,E.a.createElement(Vn,{icon:j.a})),E.a.createElement(jn,{disabled:m.state.isDisabledControls,onClick:function(){return m.setScene(e)},src:e.thumbUrl||e.url,alt:""})),E.a.createElement("span",{className:"scene-title"},e.title))}))),this.props.collection&&E.a.createElement(Mn,{visible:this.props.reelVisible},this.props.collection.tours.map((function(e){return E.a.createElement(An,{isDisabled:m.state.isDisabledControls,onClick:function(){return m.handleSelectTour(e)},isActive:e.shortId===m.props.tour.shortId,id:e.shortId===m.props.tour.shortId&&"active-collection",isGsv:e.isGSV},E.a.createElement(Ln,null,E.a.createElement(Nn,null,E.a.createElement(Vn,{icon:j.a})),E.a.createElement(Pn,{disabled:m.state.isDisabledControls,src:e.images[0].thumbUrl||e.images[0].url}),e.isGSV&&E.a.createElement(Rn,null,E.a.createElement("img",{src:"./assets/img/gsvIcons/ic_pagman.svg",alt:"icon"}),E.a.createElement("span",null,m.props.modalStr.gsTour))),E.a.createElement("span",{className:"tour-title"},e.title))}))))):this.props.vr?null:E.a.createElement(aa,x()({},this.props,{setScene:this.setScene.bind(this),selectNextImage:this.selectNextImage.bind(this),selectPreviousImage:this.selectPreviousImage.bind(this),lastRoom:this.lastImage.bind(this)(),firstRoom:this.firstImage.bind(this)(),isChat:k,isVideoChatStarted:this.state.isVideoChatStarted}))):null,!this.props.preview||this.props.preview&&Q.mobileNavigator?E.a.createElement("div",{style:{height:"100%",width:"100%",left:0,top:0,position:"fixed",backgroundColor:"black",cursor:"-webkit-grab"},ref:this.setPanoRef.bind(this)}):E.a.createElement("div",{style:{height:this.props.height?this.props.height:"70vh",width:this.props.width?this.props.width:"70vw",position:"fixed",cursor:"-webkit-grab"},ref:this.setPanoRef.bind(this)}),!this.props.preview&&this.state.isVideoChatStarted&&E.a.createElement(E.a.Fragment,null,E.a.createElement(nn,{isShow:k,setMessageChatStatus:this.setMessageChatStatus,tourShortId:this.props.tour.shortId,setSocket:this.props.setSocket}),_&&Boolean(this.props.host)&&(!this.props.isStopTrackLive||this.props.host.sid===this.props.localParticipantSid)&&E.a.createElement(Ns,{sceneId:this.props.selectedImage&&this.props.selectedImage.id,viewer:this.viewer,isTourViewTypeLegacy:this.state.isTourViewTypeLegacy,setEnableViewerOrbitControls:this.setEnableViewerOrbitControls.bind(this),setEnableViewerSphericalControls:this.setEnableViewerSphericalControls.bind(this),setDisableViewerOrbitControls:this.setDisableViewerOrbitControls.bind(this),setDisableViewerSphericalControls:this.setDisableViewerSphericalControls.bind(this),host:this.props.host,isWhiteBoardStarted:_,setWhiteBoardStatus:this.setWhiteBoardStatus})),this.state.gsvViewLocation&&E.a.createElement(da.a,{center:this.state.gsvViewLocation}),this.state.showGsvNotPublishNotification&&E.a.createElement(Dn,null,E.a.createElement("p",null,"The Google Street View has not been published yet. ".concat(this.props.tour.userId===this.props.user.id?"Publish it in GSV Tour Editor":"Ask a tour owner to publish it in GSV Tour Editor")),this.props.tour.userId===this.props.user.id&&E.a.createElement(H.Button,{onClick:function(){return L.history.push("/tours/".concat(m.props.tour.shortId,"/gsv"))},className:"btn"},"Go to GSV Tour Editor")),E.a.createElement("div",null,E.a.createElement(z.a,x()({},this.props,{closeModal:this.handleHtmlInfospotCloseByClick.bind(this),noPageHeader:!0}),E.a.createElement("div",null,this.props.selectedInfospot&&this.props.selectedInfospot.data&&("image"===this.props.selectedInfospot.dataType?E.a.createElement("div",{dangerouslySetInnerHTML:{__html:'<div style="object-fit:contain; text-align: center;">\n                    <img src="'.concat(this.props.selectedInfospot.data.image&&this.props.selectedInfospot.data.image.thumbUrl,'" />\n                    <br>\n                    <span>\n                      ').concat(this.props.selectedInfospot.data.caption,"\n                    </span>\n                      </div>")}}):E.a.createElement("div",{dangerouslySetInnerHTML:{__html:'<div style="object-fit:contain;">'.concat((p=this.props.selectedInfospot.data,"string"==typeof p?p:V()(p,"htmlContent",null)||""),"</div>")}}))))),E.a.createElement(sn.a,x()({},this.props,{isTourViewerPage:!0,setScene:this.setScene.bind(this)})),E.a.createElement(R.a,x()({},this.props,{noPageHeader:!0})),E.a.createElement(F.a,{height:"auto",in:"shareAndEmbed"===this.props.modal,closeModal:this.props.closeModal,onRequestClose:2===Object(Q.User)().type?this.props.exitPaid(this.props.tour,this.props.viewerStr.savingTheTourPleaseWait):this.props.exitFree,buttonOneAction:2===Object(Q.User)().type?this.props.exitPaid(this.props.tour,this.props.viewerStr.savingTheTourPleaseWait):this.props.exitFree,buttonOneText:this.props.commonStr.exit,buttonTwoAction:2===Object(Q.User)().type?this.props.exitPaid(this.props.tour,this.props.viewerStr.savingTheTourPleaseWait):this.props.exitFree,buttonTwoText:this.props.commonStr.viewTour,noPageHeader:!0},E.a.createElement(rn.a,{user:this.props.user,tour:this.props.tour,showNotification:this.props.showNotification,path:this.props.modalMeta&&"/tours/".concat(this.props.modalMeta.shortId),noPageHeader:!0})),E.a.createElement(Hn.a,{in:!this.props.preview&&("payments"===this.props.modal||"branding"===this.props.modal),tour:this.props.tour,closeModal:this.props.closeModal,finishAction:this.props.finishAction,startAction:this.props.startAction,showNotification:this.props.showNotification,openShareAndEmbed:function(){return m.props.openShareAndEmbed(m.props.tour)},user:this.props.user,setUser:this.props.setUser,setTour:this.props.setTour,noPageHeader:!0,setStripeTokens:this.handleSetTokens,openModal:this.props.openModal}),E.a.createElement(Un.a,x()({in:"pro-plus-trial"===this.props.modal,tour:this.props.tour,setTour:function(e){return m.props.setTour(x()({},m.props.tour,{type:e}))},stripeTokens:this.state.stripeTokens,openShareAndEmbed:function(){return m.props.openShareAndEmbed(m.props.tour)}},this.props)),E.a.createElement(ra.a,x()({},this.props,{noPageHeader:!0})),E.a.createElement(Ta,x()({},this.props,{isDisabled:this.state.isDisabledControls,isHide:this.state.isHideTourViewerControls,isVideoChatStarted:this.state.isVideoChatStarted,isMessageChatShow:k,isReelVisible:this.props.reelVisible,theme:this.props.tour.theme})),this.props.preview?null:E.a.createElement(Gs,{title:this.props.viewerStr.upgradeToRemoveThisWatermark,show:this.props.tour.type&&"free"==this.props.tour.type,onClick:function(){return window.open("https://www.cloudpano.com")}},this.props.viewerStr.madeFreeAndEasyWith," ",E.a.createElement(qs,null,"CloudPano")),E.a.createElement(la.a,x()({},this.props,{tour:this.props.tour,showNotification:this.props.showNotification,path:"",noPageHeader:!0}))),E.a.createElement(Js,{percent:this.props.imageLoadingProgress}),E.a.createElement(sa.a,this.props),f&&E.a.createElement(as,{user:this.props.user,roomName:C,tourTitle:null===(o=this.props)||void 0===o||null===(a=o.tour)||void 0===a?void 0:a.title,tourShortId:null===(r=this.props)||void 0===r||null===(s=r.tour)||void 0===s?void 0:s.shortId,isScheduleEnabled:null===(c=this.props)||void 0===c||null===(l=c.tour)||void 0===l?void 0:l.isScheduleEnabled,sceneId:null===(d=this.props)||void 0===d||null===(u=d.selectedImage)||void 0===u?void 0:u.id,isOpen:f,handleClickClose:this.handleCloseLiveJoin,handleVideoChatJoin:this.handleVideoChatJoin,handleOpenScheduleModal:this.handleOpenScheduleModal}),g&&E.a.createElement(fs,{isOpen:g,handleClickClose:this.handleCloseMeetingEndModal})):E.a.createElement("div",null,E.a.createElement(R.a,x()({},this.props,{noPageHeader:!0})),E.a.createElement(ca.a,x()({},this.props,{onValid:function(){m.props.setPasswordEnteredAndValid(),m.runMountingActivities()},noPageHeader:!0})))}}]),s}(E.a.PureComponent),Rs=Object(k.keyframes)(["0%{opacity:1;z-index:1;transform:scale(0.001);}10%{opacity:1;z-index:1;transform:scale(1);}95%{opacity:1;z-index:1;transform:scale(1);}99%{opacity:1;z-index:1;transform:scale(.001);}100%{z - index:-5;transform:scale(0.001);}"]),Ds=k.default.div.withConfig({displayName:"TourViewer__RotateWrapper",componentId:"oodlia-0"})(["position:absolute;text-align:center;width:10em;top:30%;left:0;right:0;margin-left:auto;margin-right:auto;color:white;opacity:0;animation:"," 3s linear;"],Rs),Fs=k.default.img.withConfig({displayName:"TourViewer__RotateMobileImage",componentId:"oodlia-1"})(["width:10em;"]),Hs=k.default.img.withConfig({displayName:"TourViewer__RotateDesktopImage",componentId:"oodlia-2"})(["width:10em;"]),Bs=function(e){return e.logo&&e.logo.length>1?E.a.createElement(wn,{src:e.logo}):null},Us=Object(k.default)(_.a).withConfig({displayName:"TourViewer__LoadingSpinner",componentId:"oodlia-3"})(["position:absolute;left:50%;top:40%;font-size:4em;color:",";"],st.actionColor),Ws=k.default.div.withConfig({displayName:"TourViewer__Wrapper",componentId:"oodlia-4"})(["width:",";@media screen and (max-width:","){height:100%;width:100%;overflow:none;display:block;position:fixed;}",";"],(function(e){return e.isChat?"calc(100% - ".concat(P.b,")"):"100%"}),Q.mobileWidth,(function(e){return e.styles})),Js=k.default.div.withConfig({displayName:"TourViewer__ProgressLoadingBar",componentId:"oodlia-5"})([""," height:5px;position:absolute;top:0;background:white;-webkit-transition:opacity 0.5s ease;transition:opacity 0.5s ease;z-index:1;",";"],(function(e){var t=e.percent;return t&&"width: ".concat(t+"%",";")}),(function(e){return 100==e.percent&&"opacity:0;"})),Gs=k.default.div.withConfig({displayName:"TourViewer__StyledWatermark",componentId:"oodlia-6"})(["background:rgba(20,20,20,0.5);position:absolute;width:200px;left:50%;top:0;margin-left:-100px;z-index:0;color:white;font-family:'Lato',sans-serif;font-size:10px;text-align:center;cursor:pointer;border-radius:0 0 0.5em 0.5em;display:none;",";"],(function(e){return e.show&&"display:unset;"})),qs=k.default.div.withConfig({displayName:"TourViewer__CloudPanoText",componentId:"oodlia-7"})(["font-family:'Pacifico',cursive;font-size:1rem;"]);t.default=Object(I.connect)(Ms,As)(zs)},625:function(e,t,i){"use strict";i.r(t),i.d(t,"Editor",(function(){return x})),i.d(t,"TourTitleWrapper",(function(){return C})),i.d(t,"GenericIcon",(function(){return S})),i.d(t,"GenericWrapper",(function(){return y})),i.d(t,"Image",(function(){return E})),i.d(t,"ControlContainer",(function(){return I})),i.d(t,"ActionsWrapper",(function(){return k})),i.d(t,"DeleteAction",(function(){return _})),i.d(t,"DownloadAction",(function(){return O})),i.d(t,"SwapAction",(function(){return j})),i.d(t,"LinkWrapper",(function(){return N})),i.d(t,"ExpandAction",(function(){return V})),i.d(t,"EditAction",(function(){return M})),i.d(t,"Link",(function(){return A})),i.d(t,"GenericAction",(function(){return L})),i.d(t,"ActionIcon",(function(){return P})),i.d(t,"ExpandIcon",(function(){return z})),i.d(t,"Progress",(function(){return R})),i.d(t,"Wrapper",(function(){return D})),i.d(t,"Button",(function(){return F})),i.d(t,"TextField",(function(){return H})),i.d(t,"ErrorText",(function(){return B})),i.d(t,"Stack",(function(){return U})),i.d(t,"Line",(function(){return W})),i.d(t,"LeaderImage",(function(){return J})),i.d(t,"Header",(function(){return G})),i.d(t,"Leader",(function(){return q})),i.d(t,"FeatureListContainer",(function(){return K})),i.d(t,"FeatureListText",(function(){return Y})),i.d(t,"FeatureList",(function(){return X})),i.d(t,"FeatureListItem",(function(){return Z})),i.d(t,"FeatureItemIcon",(function(){return $})),i.d(t,"FeatureItemText",(function(){return Q})),i.d(t,"SidebarTitle",(function(){return ee})),i.d(t,"SidebarSpanRegular",(function(){return te})),i.d(t,"SidebarParagraphRegular",(function(){return ie})),i.d(t,"Divider",(function(){return ne})),i.d(t,"RotateIcon",(function(){return oe})),i.d(t,"AngleIcon",(function(){return ae}));var n=i(0),o=i.n(n),a=i(3),r=i.n(a),s=i(65),c=i(135),l=i(689),d=i.n(l),u=i(910),p=i.n(u),m=i(911),h=i.n(m),f=i(644),g=i.n(f),b=i(912),w=i.n(b),v=i(618),x=s.default.div.withConfig({displayName:"UI__Editor",componentId:"sc-1tbuii0-0"})(["-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;border-right:0.1em solid #1CA59B;border-left:0.1em solid #1CA59B;align-items:flex-start;align-content:baseline;justify-content:center;flex-direction:column;overflow-y:scroll;overflow-x:hidden;border-bottom:0.1em solid ",";@media screen and (max-width:","){padding:1em;max-width:100%;}@media screen and (max-height:","){}::-webkit-scrollbar{width:0 !important;}"],v.actionColor,v.mobilePortraitWidth,v.mobileLandscapeHeight),C=s.default.div.withConfig({displayName:"UI__TourTitleWrapper",componentId:"sc-1tbuii0-1"})(["padding-left:45%;padding-bottom:1em;"]),S=Object(s.default)(c.a).withConfig({displayName:"UI__GenericIcon",componentId:"sc-1tbuii0-2"})(["cursor:pointer;color:",";&:active{color:",";}"],v.actionColor,v.actionActiveColor),y=s.default.div.withConfig({displayName:"UI__GenericWrapper",componentId:"sc-1tbuii0-3"})(["padding-left:0.4em;@media screen and (max-width:","){padding-left:0;}"],v.mobilePortraitWidth),E=s.default.img.withConfig({displayName:"UI__Image",componentId:"sc-1tbuii0-4"})(["margin:0.6em;margin-top:0;max-width:10em;border-radius:0.2em;cursor:pointer;@media screen and (max-width:","){max-width:100%;margin:0;}"],v.mobilePortraitWidth),I=s.default.div.withConfig({displayName:"UI__ControlContainer",componentId:"sc-1tbuii0-5"})(["position:absolute;top:1em;left:50%;background:white;padding:0.4em;border-radius:0.2em;color:#3e8aef;&:active{color:darkblue;}"]),k=s.default.div.withConfig({displayName:"UI__ActionsWrapper",componentId:"sc-1tbuii0-6"})(["position:absolute;"," background:white;display:flex;border-radius:0.2em;box-shadow:0.01em 0.01em 0.01em 0.08em lightgray;","  "," @media screen and (max-width:30em){right:15%;}"],(function(e){return e.relative?"position: relative;":"position: absolute;"}),(function(e){return e.positionTemp?e.positionTemp:"top: 0.2em;\n  right: 1em;\n  "}),(function(e){return e.position})),_=function(e){return r.a.createElement(T,{styles:e.styles,onClick:e.onClick,noBorder:!0},r.a.createElement(P,{icon:h.a}))},O=function(e){return r.a.createElement(T,{styles:e.styles,onClick:e.onClick,noBorder:!0},r.a.createElement(P,{icon:w.a}))},j=function(e){return r.a.createElement(T,{styles:e.styles,noBorder:!0},r.a.createElement(P,{icon:e.icon}))},T=s.default.div.withConfig({displayName:"UI__IconWrapper",componentId:"sc-1tbuii0-7"})(["color:",";display:inline-block;text-align:center;cursor:pointer;",";"],v.actionColor,(function(e){return e.styles})),N=s.default.div.withConfig({displayName:"UI__LinkWrapper",componentId:"sc-1tbuii0-8"})(["margin:0.4em;padding:0.2em;border-radius:0.2em;box-shadow:0.01em 0.01em 0.01em 0.08em lightgray;width:8em;text-align:center;&:active{box-shadow:0.01em 0.01em 0.01em 0.04em black;transform:translateY(0.1em);}"]),V=function(e){return r.a.createElement(T,{onClick:e.onClick,noBorder:e.noBorder},r.a.createElement(z,{icon:d.a}))},M=function(e){return r.a.createElement(T,{styles:e.styles,onClick:e.onClick,noBorder:e.noBorder},r.a.createElement(z,{color:e.color,icon:p.a}))},A=s.default.a.withConfig({displayName:"UI__Link",componentId:"sc-1tbuii0-9"})(["color:",";&:active{color:",";}"],v.actionColor,v.actionActiveColor),L=function(e){return r.a.createElement(T,{onClick:e.onClick,large:e.large,noBorder:e.noBorder},r.a.createElement("a",null,e.text))},P=Object(s.default)(c.a).withConfig({displayName:"UI__ActionIcon",componentId:"sc-1tbuii0-10"})(["color:white;&:active{color:",";}"],v.actionActiveColor),z=Object(s.default)(c.a).withConfig({displayName:"UI__ExpandIcon",componentId:"sc-1tbuii0-11"})(["cursor:pointer;color:",";&:active{color:",";}"],(function(e){return e.color||v.actionColor}),v.actionActiveColor),R=s.default.div.withConfig({displayName:"UI__Progress",componentId:"sc-1tbuii0-12"})(["position:absolute;top:0;left:50%;margin-top:1em;"]),D=s.default.div.withConfig({displayName:"UI__Wrapper",componentId:"sc-1tbuii0-13"})(["height:100%;width:100%;overflow:none;display:block;position:fixed;"]),F=s.default.button.withConfig({displayName:"UI__Button",componentId:"sc-1tbuii0-14"})(["-webkit-appearance:none;-moz-appearance:none;appearance:none;color:white;background:",";border:none;border-radius:5px;font-size:.9em;text-align:center;width:100%;margin:.3em 0;padding:.7em .8em;cursor:pointer;transition:500ms;&:hover{background:",";color:white;cursor:pointer;}",";"],(function(e){return e.disabled?"grey":"#57c1ca"}),(function(e){return e.disabled?"grey":"#61d6df"}),(function(e){return e.styles})),H=s.default.input.withConfig({displayName:"UI__TextField",componentId:"sc-1tbuii0-15"})(["border-color:",";font-size:.9em;text-align:center;width:100%;margin:.3em 0;padding:.7em .8em;"],(function(e){return e.error?"red":"inherit"})),B=s.default.span.withConfig({displayName:"UI__ErrorText",componentId:"sc-1tbuii0-16"})(["color:red;text-align:center;display:block;font-size:14px;"]),U=s.default.div.withConfig({displayName:"UI__Stack",componentId:"sc-1tbuii0-17"})([""]),W=s.default.div.withConfig({displayName:"UI__Line",componentId:"sc-1tbuii0-18"})(["width:100%;height:1px;background:",";margin:1.5em 0;"],(function(e){return e.hidden?"transparent":"grey"})),J=s.default.img.withConfig({displayName:"UI__LeaderImage",componentId:"sc-1tbuii0-19"})(["border-radius:50%;width:150px;height:150px;object-fit:cover;"]),G=s.default.h3.withConfig({displayName:"UI__Header",componentId:"sc-1tbuii0-20"})(["color:white;width:100%;text-shadow:black 1px 1px 20px;text-align:left;"]),q=Object(s.default)(v.Horizontal).withConfig({displayName:"UI__Leader",componentId:"sc-1tbuii0-21"})(["background:linear-gradient(90deg,#00c4cc,#7d2ae8);border-radius:10px;margin-bottom:20px;padding:10px;box-shadow:0px 3px 4px 0px black;cursor:pointer;height:170px;font-size:1.2rem;"]),K=s.default.div.withConfig({displayName:"UI__FeatureListContainer",componentId:"sc-1tbuii0-22"})([""]),Y=s.default.p.withConfig({displayName:"UI__FeatureListText",componentId:"sc-1tbuii0-23"})(["font-size:0.8em;color:white;margin:0;text-align:left;"]),X=s.default.ul.withConfig({displayName:"UI__FeatureList",componentId:"sc-1tbuii0-24"})(["position:relative;list-style-type:none;text-align:left;line-height:1.4em;padding:0;"]),Z=s.default.li.withConfig({displayName:"UI__FeatureListItem",componentId:"sc-1tbuii0-25"})(["display:flex;margin-top:15px;"]),$=s.default.span.withConfig({displayName:"UI__FeatureItemIcon",componentId:"sc-1tbuii0-26"})(["display:flex;min-width:25px;width:25px;font-size:0.8em;"]),Q=s.default.span.withConfig({displayName:"UI__FeatureItemText",componentId:"sc-1tbuii0-27"})(["font-size:0.8em;color:white;"]),ee=s.default.h2.withConfig({displayName:"UI__SidebarTitle",componentId:"sc-1tbuii0-28"})(["text-align:start;font-weight:bold;font-size:18px;line-height:22px;color:white;margin:0 0 25px 0;"]),te=s.default.span.withConfig({displayName:"UI__SidebarSpanRegular",componentId:"sc-1tbuii0-29"})(["font-weight:normal;font-size:14px;line-height:17px;text-align:start;"]),ie=s.default.p.withConfig({displayName:"UI__SidebarParagraphRegular",componentId:"sc-1tbuii0-30"})(["font-weight:normal;font-size:14px;line-height:17px;margin:0 0 16px 0;text-align:start;"]),ne=s.default.div.withConfig({displayName:"UI__Divider",componentId:"sc-1tbuii0-31"})(["width:100%;height:1px;background:black;margin:0;"]),oe=Object(s.default)(c.a).withConfig({displayName:"UI__RotateIcon",componentId:"sc-1tbuii0-32"})(["color:white;font-size:14px;",""],(function(e){return e.isOpen&&Object(s.css)(["transform:rotate(180deg);"])})),ae=function(e){return r.a.createElement(oe,o()({},e,{icon:g.a}))}},643:function(e,t,i){"use strict";i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return r})),i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return c}));var n=i(9),o="tours",a=function(e){return Object(n.a)({url:"".concat(o,"/").concat(e,"/joinChat")})},r=function(e,t){return Object(n.a)({method:"POST",url:"".concat(o,"/").concat(e,"/requestShowing"),data:t})},s=function(e){return Object(n.a)({url:"".concat(o,"/").concat(e,"/hosts/ids")})},c=function(e,t,i){var a={tourId:e,room:t};return Object(n.a)({method:"POST",url:"".concat(o,"/cpl/is-host-connected"),data:a,cancelToken:i})}},869:function(e,t,i){"use strict";i.d(t,"b",(function(){return d})),i.d(t,"a",(function(){return u}));var n=i(5),o=i.n(n),a=i(8),r=i.n(a),s=i(246),c=i(9),l=(i(188),i(11),i(25),i(268),function(e){return{type:s.d,key:e}}),d=function(e){return{type:s.b,value:e}},u=function(){return function(){var e=r()(o.a.mark((function e(t){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)({url:"gsv/getKey"});case 3:i=e.sent,t(l(i)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Get Api Key error: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}}}]);